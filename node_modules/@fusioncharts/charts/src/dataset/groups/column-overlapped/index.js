import _inheritsLoose from"@babel/runtime/helpers/inheritsLoose";import ColumnMultiSeriesgroup from"../column-multiseries";import{pluckNumber}from"@fusioncharts/core/src/lib";var UNDEF;var ColumnOverlappedgroup=function(_ColumnMultiSeriesgro){_inheritsLoose(ColumnOverlappedgroup,_ColumnMultiSeriesgro);function ColumnOverlappedgroup(){return _ColumnMultiSeriesgro.apply(this,arguments)||this}var _proto=ColumnOverlappedgroup.prototype;_proto.getType=function getType(){return"group"};_proto.getName=function getName(){return"columnOverlappedGroup"};_proto.setColumnPosition=function setColumnPosition(){var manager=this,chartAttr=manager.getFromEnv("chart-attrib"),xAxis=manager.getFromEnv("xAxis"),chart=manager.getFromEnv("chart"),oldNumOfColumns=manager.getFromEnv("numOfColumns"),definedGroupPadding=Math.max(pluckNumber(chartAttr.plotspacepercent),0),plotSpacePercent=Math.max(pluckNumber(definedGroupPadding,20)%100,0),groupPadding=plotSpacePercent/200,xAxisZeroPos=xAxis.getPixel(0),xAxisFirstPos=xAxis.getPixel(1),maxColWidth=chart.isBar?chart.config.maxBarHeight:chart.config.maxColWidth,groupMaxWidth=Math.abs(xAxisFirstPos-xAxisZeroPos),groupNetWidth,columnWidth,xPosFirst,xPosNext,isCrisp=true,groupNetHalfWidth,groupNetGapWidth=4,count=0,numOfColumns=0;manager.addToEnv("groupMaxWidth",groupMaxWidth);manager._mapChildren(function(child){if(!child.getState("removed")&&child.getState("visible")!==false){numOfColumns++}});manager.addToEnv("numOfColumns",numOfColumns);manager.addToEnv("numColDiff",pluckNumber(oldNumOfColumns-numOfColumns,0));if((columnWidth=manager.getFromEnv("plotWidth"))===UNDEF){columnWidth=(1-definedGroupPadding*.01)*groupMaxWidth||Math.min(groupMaxWidth*(1-groupPadding*2),maxColWidth*(numOfColumns||1))}manager._mapChildren(function(child){if(!child.getState("removed")&&child.getState("visible")!==false){child.addToEnv("plotWidth",columnWidth-columnWidth/numOfColumns*count);count++}});groupNetHalfWidth=groupNetWidth/2;xPosFirst=xAxisZeroPos-groupNetHalfWidth;xPosNext=xAxisFirstPos-groupNetHalfWidth;if(xPosNext-(xPosFirst+groupNetWidth)<groupNetGapWidth){isCrisp=false}if(plotSpacePercent===0){isCrisp=true}manager.addToEnv("isCrisp",isCrisp)};return ColumnOverlappedgroup}(ColumnMultiSeriesgroup);export default ColumnOverlappedgroup;