import _assertThisInitialized from"@babel/runtime/helpers/assertThisInitialized";import _inheritsLoose from"@babel/runtime/helpers/inheritsLoose";import ColumnDataset from"../column";import{pluck,pluckNumber,toRaphaelColor,parseConfiguration,extend2,hasSVG,TOUCH_THRESHOLD_PIXELS,CLICK_THRESHOLD_PIXELS,HUNDREDSTRING,hasTouch,getValidValue,preDefStr,getDefinedColor,getDashStyle,parseUnsafeString,parseTooltext,getFirstValue,polyPathToPath,mapSymbolName,getFirstAlpha,getFirstColor}from"@fusioncharts/core/src/lib";import{priorityList}from"@fusioncharts/core/src/schedular";import{addDep}from"@fusioncharts/core/src/dependency-manager";import areaAnimation from"./index.animation";var UNDEF,isVML=!hasSVG,NONE="none",ROLLOVER="DataPlotRollOver",ROLLOUT="DataPlotRollOut",MOUSEOVER="mouseOver",MOUSEOUT="mouseOut",AREA_STR="area",COMMASTRING=",",BLANKSTRING="",LINE="line",M="M",L="L",Z="Z",TOP_BORDER_PATH="topBorderPath",HTP=hasTouch?TOUCH_THRESHOLD_PIXELS:CLICK_THRESHOLD_PIXELS,PLOTBORDERCOLOR="plotBorderColor",PLOTGRADIENTCOLOR="plotGradientColor",SHOWSHADOW="showShadow",POINTER="pointer",EVENTARGS="eventArgs",DATAPLOTCLICK="dataplotclick",LABELUPDATEONIMAGELOADID="labelUpdateOnImageLoadID",DEFAULT_CURSOR=preDefStr.DEFAULT,SETROLLOVERATTR=preDefStr.setRolloverAttrStr,SETROLLOUTATTR=preDefStr.setRolloutAttrStr,FULL_OPACITY="100",getPathArr=function getPathArr(mode){if(mode===void 0){mode="full"}var pathObj=this,pathMap=pathObj.pathMap,path2Map=pathObj.path2Map,path=[],bottom=[],fullArea=true;switch(mode){case"detailed":for(var key in pathMap){if(pathMap.hasOwnProperty(key)){path.push(pathMap[key]);if(path2Map[key].length){var topPath=pathMap[key],bottomPath=Object.assign([],path2Map[key]);if(bottomPath[bottomPath.length-1]===Z)bottomPath.pop();if(bottomPath.length){var firstPoint=Object.assign([],topPath[topPath.length-1]),lastPoint=Object.assign([],topPath[0]);firstPoint[0]=M;lastPoint[0]=L;bottomPath.unshift(firstPoint);bottomPath.push(lastPoint)}bottom.push(bottomPath)}}}path=path.flat();if(path.length){return{top:path,bottom:bottom.flat()}}return{top:["M0,0"],bottom:["M0,0"]};case"top":fullArea=false;default:for(var _key in pathMap){if(pathMap.hasOwnProperty(_key)){path.push(pathMap[_key]);if(fullArea)path.push(path2Map[_key])}}path=path.flat();if(path.length){return path}return["M0,0"]}},defined=function defined(obj){return obj!==UNDEF&&obj!==null&&obj!==""},math=Math,mathMin=math.min,mathMax=math.max,mathCeil=math.ceil,MAX_MITER_LINEJOIN=2,_imageDrawHelper=function _imageDrawHelper(dataset,dataObj){var chart=dataset.getFromEnv("chart"),chartConf=chart.config,config=dataObj.config,graphics=dataObj.graphics,imageElement=graphics.image||graphics.element,eventArgs=config.eventArgs,imgRef=imageElement._.RefImg,x=dataObj._xPos,y=dataObj._yPos,anchorProps=config.anchorProps,anchorShadowGroup=dataset.getContainer("shadowGroup"),trackerRadius=2,hoverEffects=config.hoverEffects,setLink=config.setLink,scale=anchorProps.imageScale,alpha=anchorProps.imageAlpha,hoverAlpha=hoverEffects.imageHoverAlpha,hoverScale=hoverEffects.imageHoverScale,imgH=imgRef.height*scale*.01,imgW=imgRef.width*scale*.01,hotW=imgRef.width*hoverScale*.01,hotH=imgRef.height*hoverScale*.01,symbol,dip,markerRadius,anchorShadow,imageRolloverPath,rolloverClipRadius,imageRolloutPath,rolloutClipRadius,imagePadding,relImageAlpha,relImageHoverAlpha,setRolloverAttr,setRolloutAttr,anchorBackground,isAnchorRadius,isAnchorHoverRadius,cosmeticAttrs;isAnchorRadius=anchorProps.isAnchorRadius;anchorProps.markerRadius=markerRadius=anchorProps.radius=isAnchorRadius?anchorProps.radius:mathMin(imgW,imgH)/2;if(!isVML){symbol=anchorProps.symbol[1];isAnchorHoverRadius=hoverEffects.isAnchorHoverRadius;anchorShadow=anchorProps.shadow;imagePadding=anchorProps.imagePadding;hoverEffects.radius=isAnchorHoverRadius?hoverEffects.anchorRadius:markerRadius+1;rolloverClipRadius=hoverEffects.radius-imagePadding-hoverEffects.anchorBorderThickness*.5;rolloutClipRadius=markerRadius-imagePadding-anchorProps.borderThickness*.5;setRolloverAttr=setRolloutAttr={};chartConf.dragTolerance=chartConf.dragTolerance<markerRadius?markerRadius+.5:chartConf.dragTolerance;cosmeticAttrs={fill:toRaphaelColor({color:anchorProps.bgColor,alpha:anchorProps.bgAlpha}),"stroke-width":anchorProps.borderThickness,stroke:toRaphaelColor({color:anchorProps.borderColor,alpha:anchorProps.borderAlpha})};setRolloutAttr=extend2({path:polyPathToPath([symbol||2,x,y,markerRadius,anchorProps.startAngle,dip])},cosmeticAttrs);if(hoverEffects){setRolloverAttr={path:polyPathToPath([hoverEffects.anchorSides||2,x,y,hoverEffects.radius,hoverEffects.startAngle,hoverEffects.dip]),fill:toRaphaelColor({color:hoverEffects.anchorColor,alpha:hoverEffects.anchorBgAlpha}),"stroke-width":hoverEffects.anchorBorderThickness,stroke:toRaphaelColor({color:hoverEffects.anchorBorderColor,alpha:hoverEffects.anchorBorderAlpha})};relImageHoverAlpha=mathMax(hoverEffects.anchorAlpha,hoverEffects.anchorBorderAlpha);if(hoverAlpha>relImageHoverAlpha){hoverAlpha=relImageHoverAlpha}}if(anchorProps.bgAlpha&&anchorProps.borderAlpha){relImageAlpha=mathMax(anchorProps.bgAlpha,anchorProps.borderAlpha);if(alpha>relImageAlpha){alpha=relImageAlpha}}anchorBackground=graphics.element;anchorBackground.attr(Object.assign(cosmeticAttrs,{path:setRolloutAttr.path}));anchorBackground.attr({cursor:setLink?POINTER:""}).data("alwaysInvisible",!markerRadius).data("setRolloverProperties",hoverEffects).data("hoverEnabled",hoverEffects.enabled).data(SETROLLOVERATTR,setRolloverAttr).data(SETROLLOUTATTR,setRolloutAttr).data("anchorRadius",markerRadius).data("anchorHoverRadius",hoverEffects&&hoverEffects.radius).data(EVENTARGS,eventArgs).shadow(anchorShadow,anchorShadowGroup);imageRolloutPath=polyPathToPath([symbol||2,x,y,rolloutClipRadius>0?rolloutClipRadius:0,anchorProps.startAngle,dip]);imageRolloverPath=polyPathToPath([symbol||2,x,y,rolloverClipRadius>0?rolloverClipRadius:0,hoverEffects.startAngle,hoverEffects.dip]);anchorProps.imgRefWidth=imgRef.width;anchorProps.imgRefHeight=imgRef.height;anchorProps.imgRefScale=scale;anchorProps.rolloutClipRadius=rolloutClipRadius;setRolloutAttr={x:x-imgRef.width*scale*.005,y:y-imgRef.height*scale*.005,width:imgW,height:imgH,"clip-path":imageRolloutPath};setRolloverAttr={x:x-imgRef.width*hoverScale*.005,y:y-imgRef.height*hoverScale*.005,width:hotW,height:hotH,alpha:hoverAlpha,"clip-path":imageRolloverPath};imageElement.attr({x:setRolloutAttr.x,y:setRolloutAttr.y,width:setRolloutAttr.width,height:setRolloutAttr.height,"clip-path":setRolloutAttr["clip-path"]}).data("alwaysInvisible",!scale).data("setRolloverProperties",hoverEffects).data(SETROLLOVERATTR,setRolloverAttr).data(SETROLLOUTATTR,setRolloutAttr).data("anchorRadius",scale).data("imgRef",imgRef).data("anchorHoverRadius",hoverScale);config.isAnchorsDrawn=true;markerRadius=mathMax(markerRadius,hoverEffects&&hoverEffects.anchorRadius||0,trackerRadius)}else{setRolloutAttr={x:x-imgRef.width*scale*.005,y:y-imgRef.height*scale*.005,width:imgW,height:imgH};setRolloverAttr={x:x-imgRef.width*hoverScale*.005,y:y-imgRef.height*hoverScale*.005,width:hotW,height:imgRef.height*hoverScale*.01,alpha:hoverAlpha};config.isAnchorsDrawn=true;chartConf.dragTolerance=chartConf.dragTolerance<imgH?imgH+.5:chartConf.dragTolerance;imageElement.data("alwaysInvisible",!scale).data("setRolloverProperties",hoverEffects).data("hoverEnabled",hoverEffects).data(SETROLLOVERATTR,setRolloverAttr).data(SETROLLOUTATTR,setRolloutAttr).data("imgRef",imgRef).data("anchorRadius",scale).data("anchorHoverRadius",hoverScale);imageElement.attr(setRolloutAttr);setRolloutAttr.alpha=alpha}dataObj._xPos=x;dataObj._yPos=y;dataset.parseLabelAttributes(dataObj,dataObj._index)};addDep({name:"areaAnimation",type:"animationRule",extension:areaAnimation});var AreaDataset=function(_ColumnDataset){_inheritsLoose(AreaDataset,_ColumnDataset);function AreaDataset(){var _this;_this=_ColumnDataset.call(this)||this;var ds=_assertThisInitialized(_this);ds.__removeElem=function(el,type){ds._setRemoveAnim(el,type==="element"||type==="image"?"anchor":"label")};ds.config.primitiveType=AREA_STR;return _this}var _proto=AreaDataset.prototype;_proto.getType=function getType(){return"dataset"};_proto.getName=function getName(){return"area"};_proto.__setDefaultConfig=function __setDefaultConfig(){_ColumnDataset.prototype.__setDefaultConfig.call(this);var config=this.config;config.valueposition=UNDEF;config.plotborderdashlen=UNDEF;config.plotborderdashgap=UNDEF;config.plotborderdashstyle=UNDEF;config.plotborderthickness=UNDEF;config.linethickness=UNDEF;config.linedashlen=UNDEF;config.linedashgap=UNDEF;config.dashed=UNDEF;config.linedashstyle=UNDEF;config.linecolor=UNDEF;config.linealpha=UNDEF;config.anchorbgcolor=UNDEF;config.anchorbordercolor=UNDEF;config.anchorradius=UNDEF;config.anchoralpha=UNDEF;config.anchorimageurl=UNDEF;config.anchorsides=UNDEF;config.anchorbgalpha=UNDEF;config.anchorborderthickness=UNDEF;config.anchorshadow=UNDEF;config.anchorstartangle=UNDEF;config.anchorimagealpha=UNDEF;config.anchorimagescale=UNDEF;config.anchorimagepadding=UNDEF;config.alpha=UNDEF;config.parentyaxis=UNDEF;config.inheritplotbordercolor=UNDEF};_proto._getHoveredPlot=function _getHoveredPlot(chrtX,chartY){var dataset=this,chartX=chrtX,xAxis=dataset.getFromEnv("xAxis"),components=dataset.components,dataStore=components.data,pointObj,xMin,xMax,len=dataStore.length,returnValue,numBinMin,numBinMax,binStrtIndex,binStopIndex,conf=dataset.config,j,step=dataset.getFromEnv("chartConfig").viewPortConfig.step||1,maxRadius=conf&&conf.radius||0,skippingInfo=dataset.getSkippingInfo&&dataset.getSkippingInfo(),plotsPerBin=skippingInfo.plotsPerBin;chartX+=xAxis.getTranslation();xMin=Math.floor(Math.max(xAxis.getValue(chartX-maxRadius),0));xMax=Math.ceil(Math.min(xAxis.getValue(chartX+maxRadius),len-1));binStopIndex=binStrtIndex+plotsPerBin-1;if(plotsPerBin>1){numBinMin=mathCeil(xMin/plotsPerBin);numBinMax=mathCeil(xMax/plotsPerBin);binStrtIndex=(numBinMin-1)*plotsPerBin+1;binStopIndex=numBinMax*plotsPerBin;xMin=binStrtIndex;xMax=binStopIndex}for(j=xMax;j>=xMin;j--){if((pointObj=dataStore[j])&&!(j%step)){returnValue=dataset.isWithinShape(pointObj,j,chartX,chartY);if(returnValue){break}}}return returnValue};_proto.getClip=function getClip(type){var dataset=this,xAxis=dataset.getFromEnv("xAxis"),yAxis=dataset.getFromEnv("yAxis"),yAxisLimits=yAxis.getLimit(),xAxisLimits=xAxis.getLimit(),xMinPixel=xAxis.getPixel(xAxisLimits.min),yMinPixel=yAxis.getPixel(yAxisLimits.min),yMaxPixel=yAxis.getPixel(yAxisLimits.max),width=Math.abs(xAxis.getPixel(xAxisLimits.max)-xMinPixel),height=yMinPixel-yMaxPixel,resArr=[];resArr.push(xMinPixel);resArr.push(height<0?yMinPixel:yMaxPixel);if(type==="init"){resArr.push(0)}else if(type==="canvas"){resArr.push(width)}resArr.push(Math.abs(height));return resArr};_proto.isWithinShape=function isWithinShape(pointObj,pX,x,y,setValue){var anchorProps,config,setVal=setValue,radius,borderThickness,dataset,viewPortConfig,components,dataStore,dragTolerance,xPos,yPos,dx,dy,diff,hoverEffects,xShift;if(!pointObj||!(setVal=pointObj.config.setValue)&&setVal!==0){return}anchorProps=pointObj.config.anchorProps;config=pointObj.config;borderThickness=anchorProps&&anchorProps.borderThickness;dataset=this;viewPortConfig=dataset.getFromEnv("chart").config.viewPortConfig;components=dataset.components;dataStore=components.data;dragTolerance=pluckNumber(config.dragTolerance,0);xShift=viewPortConfig?viewPortConfig.x*viewPortConfig.scaleX:0;xPos=pointObj._xPos-xShift;yPos=pointObj._yPos;if(yPos!==null){hoverEffects=pointObj.config.hoverEffects;radius=Math.max(anchorProps&&anchorProps.radius,hoverEffects&&hoverEffects.anchorRadius||0,HTP)+borderThickness/2;if(!radius){radius=3}dx=x-xPos;dy=y-yPos;diff=Math.sqrt(Math.pow(dx,2)+Math.pow(dy,2));if(diff<=radius||diff<=dragTolerance){return{pointIndex:pX,hovered:true,pointObj:dataStore[pX]}}return false}};_proto._parseShadowOptions=function _parseShadowOptions(){var dataSet=this,chart=dataSet.getFromEnv("chart"),conf=dataSet.config,chartAttr=chart.getFromEnv("dataSource").chart,colorM=dataSet.getFromEnv("color-manager"),defaultShadow=pluckNumber(chart.defaultPlotShadow,colorM.getColor(SHOWSHADOW));return{opacity:pluckNumber(chartAttr.showshadow,defaultShadow)?conf.alpha/100:0}};_proto._firePlotEvent=function _firePlotEvent(eventType,plotIndex,e){var dataset=this,chart=dataset.getFromEnv("chart"),components=dataset.components,toolTipController=dataset.getFromEnv("toolTipController"),dataStore=components.data,data=dataStore[plotIndex]||{},sharedAnchor=dataset.getGraphicalElement("sharedAnchor"),setElement=data.graphics&&data.graphics.element||(data.config&&data.config.setValue)!==UNDEF&&sharedAnchor,toolTip=this.config.currentToolTip,style=chart.getFromEnv("paper").canvas.style,config,eventArgs,setLink;if(setElement){config=data.config;setLink=config.setLink;eventArgs=config.eventArgs;switch(eventType){case"fc-mouseover":dataset._decideTooltipType(plotIndex,e);dataset._rolloverResponseSetter(chart,data,e);setLink&&(style.cursor=POINTER);break;case"fc-mouseout":toolTipController.hide(toolTip);dataset._rolloutResponseSetter(chart,data,e);style.cursor=DEFAULT_CURSOR;break;case"fc-click":chart.plotEventHandler(setElement,e,DATAPLOTCLICK,eventArgs);break;case"fc-mousemove":dataset._decideTooltipType(plotIndex,e)}}};_proto._rolloverResponseSetter=function _rolloverResponseSetter(chart,data,event,onlyHoverEffect){var dataset=this,dataGraphics=data.graphics,elem=dataGraphics&&(dataGraphics.element||dataset.getAnchor(data)),draged=elem&&elem.data("draged"),hoverEnabled=elem&&elem.data("hoverEnabled");if(draged!==true){dataset._hoverFunc(data,ROLLOVER,hoverEnabled,chart.getFromEnv("dataSource").chart);!onlyHoverEffect&&elem&&chart.plotEventHandler(elem,event,ROLLOVER)}};_proto._rolloutResponseSetter=function _rolloutResponseSetter(chart,data,event,onlyHoverEffect){var dataset=this,dataGraphics=data.graphics,elem=dataGraphics&&(dataGraphics.element||dataset.getAnchor(data)),draged=elem&&elem.data("draged"),hoverEnabled=elem&&elem.data("hoverEnabled"),plotType=dataset.type,dataConf=data.config,anchorProps=dataConf.anchorProps,isVisibleAnchor=anchorProps.radius&&anchorProps.anchorAlpha;if(draged!==true){dataset._hoverFunc(data,ROLLOUT,hoverEnabled,chart.getFromEnv("dataSource").chart);!onlyHoverEffect&&elem&&chart.plotEventHandler(elem,event,ROLLOUT)}dataConf.isAnchorsDrawn&&!isVisibleAnchor&&plotType==="area"&&elem&&elem.hide()};_proto.getAnchor=function getAnchor(data){if(data===void 0){data={}}var dataset=this,animationManager=dataset.getFromEnv("animationManager"),sharedAnchor=dataset.getGraphicalElement("sharedAnchor"),config=data.config,anchorProps,eventArgs,setRolloutAttr,setRolloverAttr,hoverEffects,hoverEnabled,radius,anchorShadow,prevAnchorHovered;if(!sharedAnchor){sharedAnchor=animationManager.setAnimation({el:"path",container:dataset.getContainer("plotGroup"),label:"anchor",doNotRemove:true,component:dataset});dataset.addGraphicalElement("sharedAnchor",sharedAnchor);return sharedAnchor}anchorProps=config.anchorProps;eventArgs=config.eventArgs;hoverEffects=config.hoverEffects;hoverEnabled=hoverEffects.enabled;if(hoverEnabled){setRolloutAttr=hoverEffects.attrs&&hoverEffects.attrs.setRolloutAttr;setRolloverAttr=hoverEffects.attrs&&hoverEffects.attrs.setRolloverAttr}radius=anchorProps.radius;anchorShadow=anchorProps.shadow;prevAnchorHovered=dataset.getFromEnv("chartConfig").prevAnchorHovered;hoverEffects.anchorAnimation=0;if(data._index!==prevAnchorHovered){sharedAnchor.shadow(anchorShadow,dataset.getContainer("shadowGroup")).data("anchorRadius",radius).data("anchorHoverRadius",hoverEffects.anchorRadius).data("hoverEnabled",hoverEnabled).data(EVENTARGS,eventArgs);if(hoverEnabled){sharedAnchor.data(SETROLLOVERATTR,setRolloverAttr).data(SETROLLOUTATTR,setRolloutAttr)}}dataset.getFromEnv("chartConfig").prevAnchorHovered=data._index;return sharedAnchor};_proto.configureAttributes=function configureAttributes(datasetJSON){if(!datasetJSON){return false}this.trimData(datasetJSON);var dataSet=this,chart=dataSet.getFromEnv("chart");dataSet.config.JSONData=datasetJSON;dataSet.parseAttributes();dataSet._setConfigure();dataSet._realTimeConfigure&&dataSet._realTimeConfigure();chart.config.hasLegend!==false&&chart.config.showLegend&&dataSet._addLegend();dataSet.setState("dirty",true)};_proto.parseAttributes=function parseAttributes(){var dataSet=this,chart=dataSet.getFromEnv("chart"),chartConfig=chart.config,conf=dataSet.config,plotType=dataSet.getName(),JSONData=dataSet.config.JSONData,chartAttr=chart.getFromEnv("chart-attrib"),singleSeries=chart.config.singleseries,colorM=dataSet.getFromEnv("color-manager"),index=Math.floor(dataSet.getJSONIndex()),showplotborder=pluckNumber(JSONData.showplotborder,chartAttr.showplotborder||1),plotFillColor=getFirstColor(!singleSeries||getValidValue(chartAttr.palettecolors)?colorM.getPlotColor(index):colorM.getColor("plotFillColor").split(/\s*\,\s*/)[0]),usePlotGradientColor,lineDashStyle,isDual=chartConfig.isdual,hasLineSet=chartConfig.haslineset,paddingValue=0;conf.showTextOutline=pluckNumber(chartAttr.textoutline,0);conf.maxValue=-Infinity;conf.minValue=Infinity;parseConfiguration(JSONData,conf,chart.config,{data:true});conf.inheritplotbordercolor=pluckNumber(JSONData.inheritplotbordercolor,chartAttr.inheritplotbordercolor,0);conf.showValues=pluckNumber(JSONData.showvalues,chartAttr.showvalues,plotType==="radar"?0:1);conf.anchorimageurl=pluck(JSONData.anchorimageurl,chartAttr.anchorimageurl,UNDEF);conf.plotColor=plotFillColor;if(isDual){if(hasLineSet){conf.parentYAxis=1}else{conf.parentYAxis=pluck(JSONData.parentyaxis&&JSONData.parentyaxis.toLowerCase(),"p")==="s"?1:0}}else{conf.parentYAxis=0}conf.valueposition=conf.valueposition.toLowerCase();conf.plotfillcolor=pluck(JSONData.color,chartAttr.plotfillcolor,plotFillColor);conf.seriesname=parseUnsafeString(JSONData.seriesname);usePlotGradientColor=chartConfig.useplotgradientcolor;conf.plotgradientcolor=usePlotGradientColor!==0?getDefinedColor(chartAttr.plotgradientcolor,colorM.getColor(PLOTGRADIENTCOLOR)):"";conf.plotfillalpha=pluck(JSONData.alpha,chartConfig.plotfillalpha);conf.fillColor={color:conf.plotfillcolor+(conf.plotgradientcolor?COMMASTRING+conf.plotgradientcolor:BLANKSTRING),alpha:conf.plotfillalpha,angle:conf.plotfillangle};conf.plotborderalpha=showplotborder?pluck(JSONData.plotborderalpha,chartAttr.plotborderalpha,JSONData.alpha,conf.inheritplotbordercolor?FULL_OPACITY:chartAttr.plotfillalpha,"95"):0;conf.plotbordercolor=pluck(JSONData.plotbordercolor,chartAttr.plotbordercolor,chartAttr.areabordercolor,conf.inheritplotbordercolor?conf.fillColor.color:singleSeries?getValidValue(chartAttr.palettecolors)?colorM.getPlotColor(0):colorM.getColor(PLOTBORDERCOLOR).split(/\s*\,\s*/)[0]:"666666");conf.plotborderColorObject={color:conf.plotbordercolor,alpha:conf.plotborderalpha,angle:conf.plotfillangle};conf.drawLine=pluckNumber(JSONData.drawline,chartAttr.drawlines,1);conf.plotborderdashstyle=conf.dashed?getDashStyle(conf.plotborderdashlen,conf.plotborderdashgap):NONE;conf.linecolor=pluck(JSONData.color,chartAttr.linecolor,conf.plotColor);conf.legendSymbolColor=dataSet.type==="line"?conf.linecolor:conf.plotfillcolor;conf.includeinlegend=pluckNumber(JSONData.includeinlegend,conf.seriesname?1:0);lineDashStyle=getDashStyle(conf.linedashlen,conf.linedashgap);conf.lineDashStyle=conf.dashed?lineDashStyle:NONE;conf.defaultPadding={left:paddingValue,right:paddingValue};conf.shadow=dataSet._parseShadowOptions();conf.drawanchors=pluckNumber(JSONData.drawanchors,JSONData.showanchors,chartAttr.showanchors,chartAttr.drawanchors);conf.anchorbgcolor=getFirstColor(pluck(JSONData.anchorbgcolor,chartConfig.anchorbgcolor,colorM.getColor("anchorBgColor")));conf.anchorbordercolor=getFirstColor(pluck(JSONData.anchorbordercolor,chartConfig.anchorbordercolor,conf.linecolor,conf.plotColor));dataSet.setState("visible",pluckNumber(JSONData.visible,!Number(JSONData.initiallyhidden),1)===1&&conf.drawLine)};_proto._setConfigure=function _setConfigure(newDataset,newIndex){var dataSet=this,chart=dataSet.getFromEnv("chart"),conf=dataSet.config,chartConfig=chart.config,JSONData=dataSet.config.JSONData||[],setData,dataObj,xAxis=dataSet.getFromEnv("xAxis"),isRealTime=chart.isRealTime,numDisplaySets=chartConfig.realTimeConfig&&chartConfig.realTimeConfig.numDisplaySets,categories=dataSet.getFromEnv("dataSource").categories&&dataSet.getFromEnv("dataSource").categories[0]&&dataSet.getFromEnv("dataSource").categories[0].category,catLen=conf.initCatLen=isRealTime?categories&&Array.isArray(categories)&&categories.filter(function(data){return!data.vline}).length||0:xAxis.getTicksLen(),setDataArr=newDataset||JSONData.data,newDataSetLen=newDataset&&newDataset.data.length,len,dataStore,isDrag=chartConfig.isDrag,i,j,plotIndex,tempIndex,shiftIndex,skippingInfo=dataSet.getSkippingInfo&&dataSet.getSkippingInfo(),plotDrawArray=skippingInfo&&skippingInfo.draw||[],plotDrawArrayLength=plotDrawArray.length,skippingApplied=skippingInfo&&skippingInfo.skippingApplied;shiftIndex=newDataSetLen===UNDEF&&catLen>numDisplaySets?catLen-numDisplaySets:0;len=isRealTime?pluckNumber(newDataSetLen,catLen):Math.min(catLen,setDataArr&&setDataArr.length);conf.imageCount=0;dataStore=dataSet.components.data;if(!dataStore){dataStore=dataSet.components.data=[]}conf.maxRadius=-Infinity;chartConfig.dragTolerance=chartConfig.dragTolerance||-Infinity;if(skippingApplied){len=plotDrawArrayLength}for(j=shiftIndex;j<len;j++){i=plotDrawArray[j]||j;if(newDataset){setData=newDataset&&newDataset.data[i]||{};if(newIndex!==UNDEF){tempIndex=newIndex+i;dataObj=dataStore[tempIndex]}else{tempIndex=dataStore.length-len+i;dataObj=dataStore[tempIndex]}plotIndex=tempIndex}else{setData=setDataArr&&setDataArr[i]||{};i=i-shiftIndex;dataObj=dataStore[i];plotIndex=i}if(!dataObj){dataObj=dataStore[plotIndex]={}}if(!dataObj.config){dataObj.config={}}if(!dataObj.graphics){dataObj.graphics={}}dataSet._plotConfigure(plotIndex,setData,newDataSetLen);tempIndex&&tempIndex++}if(skippingApplied){dataSet.addJob("configureRestID",dataSet._configureRestData.bind(dataSet),priorityList.postRender)}chartConfig.dragTolerance=isDrag?(chartConfig.dragTolerance>5?chartConfig.dragTolerance:5.5)+HTP:0;dataSet.ErrorValueConfigure&&dataSet.ErrorValueConfigure()};_proto._configureRestData=function _configureRestData(){var dataSet=this,chart=dataSet.getFromEnv("chart"),conf=dataSet.config,chartConfig=chart.config,JSONData=dataSet.config.JSONData,setDataArr=JSONData.data||[],setData,dataObj,skipInfo=dataSet.getSkippingInfo&&dataSet.getSkippingInfo(),drawOnlyMap=skipInfo.drawOnlyMap,xAxis=dataSet.getFromEnv("xAxis"),catLen=xAxis.getTicksLen(),len=catLen,dataStore,i,plotIndex,tempIndex;conf.imageCount=0;dataStore=dataSet.components.data;if(!dataStore){dataStore=dataSet.components.data=[]}conf.maxRadius=-Infinity;chartConfig.dragTolerance=chartConfig.dragTolerance||-Infinity;conf.maxValue=-Infinity;conf.minValue=Infinity;for(i=0;i<len;i++){if(drawOnlyMap[i]){continue}dataObj=dataStore[i];setData=setDataArr&&setDataArr[i]||{};plotIndex=i;if(!dataObj){dataObj=dataStore[i]={}}if(!dataObj.config){dataStore[i].config={}}if(!dataObj.graphics){dataObj.graphics={}}dataSet._plotConfigure(plotIndex,setData);tempIndex&&tempIndex++}};_proto._plotConfigure=function _plotConfigure(setIndex,setData,newDataSetLen){var dataSet=this,chart=dataSet.getFromEnv("chart"),conf=dataSet.config,chartConfig=chart.config,JSONData=dataSet.config.JSONData,chartAttr=chart.getFromEnv("dataSource").chart,dataStore=dataSet.components.data,dataObj=dataStore[setIndex],xAxis=dataSet.getFromEnv("xAxis"),yAxis=dataSet.getFromEnv("yAxis"),isDrag=chartConfig.isDrag,config=dataObj&&dataObj.config,toolText,toolTipValue,setValue,setDisplayValue,macroIndices,parserConfig,formatedVal,seriesname,catObj,yAxisName=parseUnsafeString(chartConfig.yaxisname),xAxisName=parseUnsafeString(chartConfig.xaxisname),tooltipSepChar=chartConfig.tooltipsepchar,lineDashed=conf.dashed,numDisplaySets=chartConfig.realTimeConfig&&chartConfig.realTimeConfig.numDisplaySets,diffLen=numDisplaySets-conf.initCatLen,additive=numDisplaySets&&diffLen>=0?diffLen:0,radius;catObj=xAxis.getLabel(newDataSetLen?setIndex-newDataSetLen:additive+setIndex);config.label=getValidValue(parseUnsafeString(catObj.tooltext||catObj.label));if(setData.tooltext!==UNDEF){setData.tooltext=parseTooltext(setData.tooltext,[3],{label:catObj.label},setData,chartAttr,JSONData)}config.setValue=setValue=yAxis.getCleanValue(setData.value,conf.stack100percent);config.setLink=pluck(setData.link);config.anchorProps=this._parseAnchorProperties(setIndex);conf.maxRadius=mathMax(config.anchorProps.radius+config.anchorProps.borderThickness/2,conf.maxRadius);radius=config.anchorProps.radius+config.anchorProps.borderThickness/2;config.dragTolerance=isDrag?(radius<6?5.5:radius+.5)+HTP:0;config.label=getValidValue(parseUnsafeString(catObj.tooltext||catObj.label));config.showValue=pluckNumber(setData.showvalue,conf.showValues);config.givenPlotShowValue=pluckNumber(setData.showvalue);config.dashed=pluckNumber(setData.dashed,lineDashed);config.dashStyle=config.dashed?getDashStyle(conf.linedashlen,conf.linedashgap):"none";config.color=pluck(setData.color,conf.linecolor);config.setColor=setData.color;config.setAlpha=setData.alpha;config.setDashed=setData.dashed;config.alpha=pluck(setData.alpha,setData.linealpha,conf.linealpha);config.origLabel=getValidValue(parseUnsafeString(catObj.label));if(setValue!==null){conf.maxValue=mathMax(conf.maxValue,setValue);conf.minValue=mathMin(conf.minValue,setValue)}config.setTooltext=parseUnsafeString(setData.toolText);config.toolTipValue=toolTipValue=yAxis.dataLabels(setValue);config.setDisplayValue=setDisplayValue=parseUnsafeString(setData.displayvalue);config.displayValue=pluck(setDisplayValue,toolTipValue);config.formatedVal=formatedVal=config.toolTipValue;config.setTooltext=getValidValue(parseUnsafeString(pluck(setData.tooltext,JSONData.plottooltext,chartAttr.plottooltext)));config.valuePosition=pluck(setData.valueposition,conf.valueposition);if(config.valuePosition){config.valuePosition=config.valuePosition.toLowerCase()}if(!chartConfig.showtooltip){toolText=false}else{if(formatedVal===null){toolText=false}else if(config.setTooltext!==UNDEF){macroIndices=[1,2,3,4,5,6,7];parserConfig={yaxisName:yAxisName,xaxisName:xAxisName,formattedValue:formatedVal,label:config.label};toolText=parseTooltext(config.setTooltext,macroIndices,parserConfig,setData,chartAttr,JSONData)}else{if(chartConfig.seriesnameintooltip){seriesname=getFirstValue(JSONData&&JSONData.seriesname)}toolText=seriesname?seriesname+tooltipSepChar:"";toolText+=config.label?config.label+tooltipSepChar:"";toolText+=config.setTooltext?"":config.toolTipValue}}config.toolText=toolText;config.setLevelTooltext=config.setTooltext;config._x=setData.index===UNDEF?setIndex:setData.index;config._y=setValue;config.finalTooltext=config.setTooltext=toolText;config.hoverEffects=this._parseHoverEffectOptions(dataObj,setData);config.anchorProps.isAnchorHoverRadius=config.hoverEffects.anchorRadius;chartConfig.dragTolerance=mathMax(chartConfig.dragTolerance,conf.maxRadius,config.hoverEffects.anchorRadius)};_proto.drawCommonElements=function drawCommonElements(){var dataset=this,dataStore=dataset.components.data,chart=dataset.getFromEnv("chart"),dsConfig=dataset.config,chartConfig=chart.config,lineElement,lineElementPrev,finalPath,connectorPath,connectorLabel,manager=dataset.getLinkedParent(),dsIndex=dataset.getJSONIndex(),bottomDsinStack=manager.config.firstDataSetIndex,xAxis=dataset.getFromEnv("xAxis"),yAxis=dataset.getFromEnv("yAxis"),scrollMinVal=dsConfig.scrollMinVal,scrollMaxVal=dsConfig.scrollMaxVal,isOnlyLineBorder=!chartConfig.drawfullareaborder,plotBorderColor=dsConfig.plotborderColorObject,plotBorderDashStyle=dsConfig.plotborderdashstyle,plotBorderThickness=dsConfig.plotborderthickness,colorArr=dsConfig.fillColor,animationManager=dataset.getFromEnv("animationManager"),lineProps,connector,bottomPath,bottomPathEle,dummyBottomPathEle,lim={x:xAxis.getLimit(),y:yAxis.getLimit()},tempStore=[],i,j,shadow=dsConfig.shadow,shadowContainer=dataset.getContainer("shadowGroup"),positionObj,scrolling=xAxis.getState("scrolling"),skippingInfo=dataset.getSkippingInfo&&dataset.getSkippingInfo(),plotDrawArray=skippingInfo&&skippingInfo.draw||[],plotDrawArrayLength=plotDrawArray.length,skippingApplied=skippingInfo&&skippingInfo.skippingApplied;lim.x.minPixel=xAxis.getPixel(lim.x.min);lim.x.maxPixel=xAxis.getPixel(lim.x.max);lim.y.minPixel=yAxis.getPixel(lim.y.min);lim.y.maxPixel=yAxis.getPixel(lim.y.max);lim.y.base=yAxis.getPixel(0);lim.x.base=xAxis.getPixel(0);if(skippingApplied){scrollMinVal=0;scrollMaxVal=plotDrawArrayLength}for(j=scrollMinVal;j<scrollMaxVal;j++){i=plotDrawArray[j]||j;if(!dataStore[i]||!dataStore[i].config){continue}tempStore[i]={config:{_Px:dataStore[i].config._Px,_Pbx:dataStore[i].config._Pbx,_Py:dataStore[i].config._Py,_Pby:dataStore[i].config._Pby,setValue:dataStore[i].config.setValue}}}positionObj={begin:scrollMinVal,end:scrollMaxVal};finalPath=this.getLinePath(dataStore,scrolling?positionObj:null,!dataset.getState("visible")&&"base");lineProps={path:finalPath.getPathArr(),stroke:"none",fill:toRaphaelColor(colorArr)};lineElementPrev=dataset.getGraphicalElement("lineElement");lineElement=animationManager.setAnimation({el:lineElementPrev||"path",container:dataset.getContainer("commonElemsGroup"),attr:dataset.getState("visible")&&lineProps,component:dataset,doNotRemove:true,label:"line",callback:function callback(){!dataset.getState("visible")&&this.hide()}});if(!lineElementPrev&&lineElement){dataset.addGraphicalElement("lineElement",lineElement)}dataset.getState("visible")&&lineElement&&lineElement.show();if(dataset.getState("visible")){!scrolling&&lineElement.shadow(shadow,shadowContainer)}connector=dataset.getGraphicalElement("connector");dummyBottomPathEle=dataset.getGraphicalElement("bottomConnector");dataset.getState("visible")&&connector&&connector.show();if(isOnlyLineBorder){connectorPath=finalPath.getPathArr("top");connectorLabel=TOP_BORDER_PATH}else if(bottomDsinStack===UNDEF||dsIndex===bottomDsinStack){connectorPath=finalPath.getPathArr();connectorLabel=LINE}else{var _finalPath$getPathArr=finalPath.getPathArr("detailed");connectorPath=_finalPath$getPathArr.top;bottomPath=_finalPath$getPathArr.bottom;connectorLabel=TOP_BORDER_PATH;dataset.getState("visible")&&dummyBottomPathEle&&dummyBottomPathEle.show();bottomPathEle=dataset.addGraphicalElement("bottomConnector",animationManager.setAnimation({attr:{path:bottomPath,stroke:toRaphaelColor(plotBorderColor),"stroke-width":plotBorderThickness,"stroke-linecap":"round","stroke-linejoin":plotBorderThickness>MAX_MITER_LINEJOIN?"round":"miter","stroke-dasharray":plotBorderDashStyle},el:dummyBottomPathEle||"path",container:dataset.getContainer("commonElemsGroup"),component:dataset,label:"bottomPath",callback:function callback(){!dataset.getState("visible")&&this.hide()}}))}if(dummyBottomPathEle&&!bottomPathEle){dataset.removeGraphicalElement(dummyBottomPathEle)}connector=dataset.addGraphicalElement("connector",animationManager.setAnimation({attr:{path:connectorPath,stroke:toRaphaelColor(plotBorderColor),"stroke-width":plotBorderThickness,"stroke-linecap":"round","stroke-linejoin":plotBorderThickness>MAX_MITER_LINEJOIN?"round":"miter","stroke-dasharray":plotBorderDashStyle},el:connector||"path",container:dataset.getContainer("commonElemsGroupLine")||dataset.getContainer("commonElemsGroup"),component:dataset,label:connectorLabel,callback:function callback(){!dataset.getState("visible")&&this.hide()}}));dsConfig.prevLim=lim;dsConfig.prevDataStore=tempStore;if(chart.state==="realTimeUpdate"){dataset.realTimeUpdated=true}chartConfig.connectnulldataOld=chartConfig.connectnulldata};_proto.parsePlotAttributes=function parsePlotAttributes(dataObj,index){var dataset=this,datasetIndex=dataset.getJSONIndex(),visible=dataset.getState("visible"),dsConfig=dataset.config,JSONData=dataset.config.JSONData,i=index,anchorProps={},setRolloutAttr={},setRolloverAttr={},xVal,yVal,setValue,setLink,symbol,toolText,hoverEffects,xPos,yPos,displayValue,plotConfig;plotConfig=dataObj.config;xPos=plotConfig._Px;yPos=plotConfig._Py;xVal=plotConfig._x;yVal=plotConfig._y;setLink=plotConfig.setLink;setValue=plotConfig.setValue;anchorProps=plotConfig.anchorProps;displayValue=plotConfig.displayValue;hoverEffects=plotConfig.hoverEffects;toolText=plotConfig.finalTooltext=plotConfig.toolText;plotConfig.eventArgs={index:i,link:setLink,value:setValue,displayValue:displayValue,categoryLabel:plotConfig.origLabel,toolText:toolText,id:dsConfig.userID,datasetIndex:datasetIndex||0,datasetName:JSONData.seriesname,visible:visible};symbol=anchorProps.symbol;dataObj._xPos=xPos;dataObj._yPos=yPos;dataObj._xVal=xVal;dataObj._yVal=yVal;dataObj._index=i;if(yVal!==null&&xVal!==null){plotConfig.eventArgs.x=xVal;plotConfig.eventArgs.y=yVal;if(hoverEffects.enabled){setRolloverAttr={path:polyPathToPath([hoverEffects.anchorSides||2,xPos,yPos,hoverEffects.anchorRadius,hoverEffects.startAngle,hoverEffects.dip]),fill:toRaphaelColor({color:hoverEffects.anchorColor,alpha:hoverEffects.anchorBgAlpha}),stroke:toRaphaelColor({color:hoverEffects.anchorBorderColor,alpha:hoverEffects.anchorBorderAlpha}),"stroke-width":hoverEffects.anchorBorderThickness};setRolloutAttr={path:polyPathToPath([symbol[1]||2,xPos,yPos,anchorProps.radius,anchorProps.startAngle,plotConfig.dip||0]),fill:toRaphaelColor({color:anchorProps.bgColor,alpha:anchorProps.bgAlpha}),stroke:toRaphaelColor({color:anchorProps.borderColor,alpha:anchorProps.borderAlpha}),"stroke-width":anchorProps.borderThickness};hoverEffects.attrs={hoverEnabled:hoverEffects.enabled,anchorRadius:anchorProps.radius,anchorHoverRadius:hoverEffects.anchorRadius};hoverEffects.attrs[SETROLLOVERATTR]=setRolloverAttr;hoverEffects.attrs[SETROLLOUTATTR]=setRolloutAttr;anchorProps.isAnchorHoverRadius=hoverEffects.attrs.anchorRadius}if(anchorProps.imageUrl){plotConfig.anchorImageLoaded=false}plotConfig.props={element:{attr:{path:polyPathToPath([symbol[1]||2,xPos,yPos,anchorProps.radius,anchorProps.startAngle,plotConfig.dip||0]),fill:toRaphaelColor({color:anchorProps.bgColor,alpha:anchorProps.bgAlpha}),stroke:toRaphaelColor({color:anchorProps.borderColor,alpha:anchorProps.borderAlpha}),"stroke-width":anchorProps.borderThickness}}}}else{if(setValue){setValue.isNull=true}}};_proto.parseLabelAttributes=function parseLabelAttributes(dataObj,index){var dataSet=this,chart=dataSet.getFromEnv("chart"),chartConfig=chart.config,SmartLabel=dataSet.getFromEnv("smartLabel"),style=chart.config.dataLabelStyle,dataStore=dataSet.components.data,stack100Percent=chartConfig.stack100percent,displayValue=BLANKSTRING,rotateValues=chartConfig.rotatevalues?270:0,canvasTop=chartConfig.canvasTop,canvasHeight=chartConfig.canvasHeight,isStacked=chart.config.isstacked,GUTTER_4=4,GUTTER_2=2,valuePadding,bBoxObj,textHeight,origTextHeight,textY,textX,yAdjust,anchorProps,valuePosition,placeValuesInside,topSpace,bottomSpace,config,xPos,yPos,prevConfig,prevValue,value,showValue,anchorRadius,i=index,setValue,attr;config=dataObj&&dataObj.config;setValue=config&&config.setValue;if(dataObj===UNDEF||setValue===UNDEF||setValue===null||config.labelSkip===true){config&&delete config.labelSkip;return}anchorProps=config.anchorProps;yPos=dataObj._yPos||dataObj.config._Py;xPos=dataObj._xPos||dataObj.config._Px;anchorRadius=anchorProps.markerRadius||anchorProps.radius-3;valuePadding=chartConfig.valuepadding+GUTTER_2+anchorRadius;valuePosition=config.valuePosition;switch(valuePosition){case"above":placeValuesInside=0;break;case"below":placeValuesInside=1;break;default:prevConfig=dataStore[i-1]&&dataStore[i-1].config||{};if(isStacked&&stack100Percent){prevValue=prevConfig.value;value=config.value}else{prevValue=prevConfig.setValue;value=config.setValue}placeValuesInside=!i?0:prevValue>value?1:0}displayValue=config.displayValue;showValue=config.showValue;if(defined(displayValue)&&displayValue!==""&&value!==null&&showValue){attr={text:displayValue,fill:style.color,"text-bound":[style.backgroundColor,style.borderColor,style.borderThickness,style.borderPadding,style.borderRadius,style.borderDash]};bBoxObj=SmartLabel.getOriSize(displayValue);config._state=config._state||{};if(rotateValues){config._state.labelWidth=bBoxObj.height;config._state.labelHeight=bBoxObj.width;config._rotated=true}else{config._state.labelWidth=bBoxObj.width;config._state.labelHeight=bBoxObj.height;config._rotated=false}textHeight=origTextHeight=config._state.labelHeight;textHeight+=valuePadding;yAdjust=origTextHeight*.5+valuePadding;topSpace=yPos-canvasTop;bottomSpace=canvasTop+canvasHeight-yPos;textY=yPos;textX=xPos;textHeight=textHeight+GUTTER_4;if(placeValuesInside){if(bottomSpace>textHeight){textY+=yAdjust;config._valueBelowPoint=1}else if(topSpace>textHeight){textY-=yAdjust;config._valueBelowPoint=0}}else{if(topSpace>textHeight){textY-=yAdjust;config._valueBelowPoint=0}else if(bottomSpace>textHeight){textY+=yAdjust;config._valueBelowPoint=1}}attr.x=textX;attr.y=textY}config.props=config.props||{};config.props.label={attr:attr}};_proto.allocatePosition=function allocatePosition(){var dataset=this,dsConfig=dataset.config,chart=dataset.getFromEnv("chart"),chartConfig=chart.config,showpercentvalues=chartConfig.showpercentvalues,showPercentInToolTip=chartConfig.showpercentintooltip,dsComponents=dataset.components,dataStore=dsComponents.data,xAxis=dataset.getFromEnv("xAxis"),i=0,j=0,dataObj,animAttrs,isStacked=chartConfig.isstacked,stack100Percent=Number(chartConfig.stack100percent),step=chartConfig.viewPortConfig.step||1,visibleStart,visibleEnd,hasScroll=chart.hasScroll,skippingInfo=dataset.getSkippingInfo&&dataset.getSkippingInfo(),labelDrawArray=skippingInfo&&skippingInfo.labelDraw||[],plotDrawArray=skippingInfo&&skippingInfo.draw||[];animAttrs=dsComponents.animAttrs=[];dataset.calculateScrollRange();if(!xAxis.getState("scrolling")){isStacked&&(stack100Percent||showpercentvalues||showPercentInToolTip)&&dataset.updateYForStack()}dataset.createCoordinates();for(j=dsConfig.scrollMinVal;j<dsConfig.scrollMaxVal;j+=step){i=plotDrawArray[j]||j;if(hasScroll&&!chartConfig.skipAttr&&(i<visibleStart||i>visibleEnd)){continue}dataObj=dataStore[i];if(!dataObj||!dataObj.config){animAttrs[i]=UNDEF;continue}dataset.parsePlotAttributes(dataObj,i)}if(step>1){dsConfig.skipIgnorerIndices.map(function(skipIgnorerIdx){return dataStore[skipIgnorerIdx]}).filter(function(skipIgnorer){return skipIgnorer||skipIgnorer.config}).forEach(function(skipIgnorer){return dataset.parsePlotAttributes(skipIgnorer,i)})}for(j=dsConfig.scrollMinValForLabel;j<dsConfig.scrollMaxValForLabel;j+=step){i=labelDrawArray[j]||j;dataObj=dataStore[i];dataset.parseLabelAttributes(dataObj,i)}};_proto.drawPlot=function drawPlot(dataObj,i){var dataset=this,dsConfig=dataset.config,plotConfig=dataObj.config,graphics=dataObj.graphics,anchorProps=plotConfig.anchorProps,visible=dataset.getState("visible"),radius=anchorProps.radius,anchorShadow=anchorProps.shadow,anchorAlpha=anchorProps.anchorAlpha,isAnchorVisible=radius&&anchorAlpha,anchorGroup=dataset.getContainer("plotGroup"),shadowGroup=dataset.getContainer("shadowGroup"),animationManager=dataset.getFromEnv("animationManager"),setElement,hoverEffects,imageElement;if(plotConfig._y!==null&&plotConfig._x!==null){if(anchorProps.imageUrl){dataset.drawAnchorImage(dataObj)}else{setElement=graphics.element;imageElement=graphics.image;imageElement&&imageElement.remove();delete graphics.image;if((dsConfig.drawanchors||isAnchorVisible)&&visible&&dataObj.config.setValue!==null){setElement=graphics.element=animationManager.setAnimation({el:setElement||"path",container:anchorGroup,attr:plotConfig.props.element.attr,index:i,length:length,callback:function callback(){this.show()},component:dataset,label:"anchor"});setElement.shadow(anchorShadow,shadowGroup)}else if(setElement){dataset.__removeElem(graphics.element,"element");delete graphics.element;setElement=UNDEF}}hoverEffects=plotConfig.hoverEffects;if(setElement){if(hoverEffects.enabled){setElement.data("hoverEnabled",hoverEffects.attrs.hoverEnabled).data("anchorRadius",hoverEffects.attrs.anchorRadius).data("anchorHoverRadius",hoverEffects.attrs.anchorHoverRadius).data(SETROLLOVERATTR,hoverEffects.attrs[SETROLLOVERATTR]).data(SETROLLOUTATTR,hoverEffects.attrs[SETROLLOUTATTR])}else{setElement.data("hoverEnabled",false)}setElement.data(EVENTARGS,plotConfig&&plotConfig.eventArgs)}}else{graphics.element&&(graphics.element=animationManager.setAnimation({el:graphics.element,component:dataset}))}};_proto.drawPlots=function drawPlots(){var dataset=this,chart=dataset.getFromEnv("chart"),chartConfig=chart.config,dsComponents=dataset.components,dsConfig=dataset.config,dataStore=dsComponents.data,i=0,j=0,dataObj,animAttrs=dsComponents.animAttrs,scrollMinVal,scrollMaxVal,_oldStartIndex=dsConfig._oldStartIndex,_oldEndIndex=dsConfig._oldEndIndex,sharedElem=dataset.getGraphicalElement("sharedAnchor"),drwCnt=0,step=chartConfig.viewPortConfig.step||1,skippingInfo=dataset.getSkippingInfo&&dataset.getSkippingInfo(),plotDrawArray=skippingInfo&&skippingInfo.draw||[];animAttrs=dsComponents.animAttrs=[];scrollMinVal=dsConfig.scrollMinVal;scrollMaxVal=dsConfig.scrollMaxVal;if(scrollMinVal>_oldStartIndex){dataset.flushOnScroll(_oldStartIndex,scrollMinVal>_oldEndIndex?_oldEndIndex:scrollMinVal)}if(scrollMaxVal<_oldEndIndex){dataset.flushOnScroll(scrollMaxVal<_oldStartIndex?_oldStartIndex:scrollMaxVal,_oldEndIndex)}dsConfig._oldStartIndex=scrollMinVal;dsConfig._oldEndIndex=scrollMaxVal;dataset.hideAllAnchors&&dataset.hideAllAnchors();for(j=scrollMinVal;j<scrollMaxVal;j+=step){i=plotDrawArray[j]||j;dataObj=dataStore[i];if(!dataObj||!dataObj.config){animAttrs[i]=UNDEF;continue}dataset.drawPlot(dataObj,i)}if(step>1){dsConfig.skipIgnorerIndices.map(function(skipIgnorerIdx){return dataStore[skipIgnorerIdx]}).filter(function(skipIgnorer){return skipIgnorer||skipIgnorer.config}).forEach(function(skipIgnorer){return dataset.drawPlot(skipIgnorer,i)})}if(i===drwCnt||dsConfig.drawanchors){sharedElem&&sharedElem.hide()}else{if(sharedElem){sharedElem.hide()}else{dataset.getAnchor()}}};_proto.drawAnchorImage=function drawAnchorImage(dataObj){var dataset=this,anchorGroup=dataset.getContainer("plotGroup"),graphics=dataObj.graphics,animationManager=dataset.getFromEnv("animationManager"),imageElement,imageElementDummy=isVML?graphics.element:graphics.image,anchorProps=dataObj.config.anchorProps,isAnchorVisible=anchorProps.anchorAlpha&&anchorProps.radius,alpha=anchorProps.imageAlpha,visible=dataset.getState("visible");if(visible&&isAnchorVisible){if(!isVML){graphics.element=animationManager.setAnimation({el:graphics.element||"path",container:anchorGroup,attr:dataObj.config.props.element.attr,label:"anchor",component:dataset}).show()}dataObj.config.props.element.attr.opacity=alpha*.01;imageElement=animationManager.setAnimation({el:imageElementDummy||"image",container:anchorGroup,component:dataset,label:"anchor",attr:{opacity:alpha*.01}});if(isVML){graphics.element=imageElement}else{graphics.image=imageElement}if(!imageElementDummy){imageElement.on("load",dataset._onAnchorImageLoad(dataObj));imageElement.attr("src",anchorProps.imageUrl)}else{if(imageElement.attrs.src!==anchorProps.imageUrl){imageElement.attr("src",anchorProps.imageUrl)}else{imageElement._.RefImg&&_imageDrawHelper(dataset,dataObj)}}imageElement.show()}else{graphics.image&&animationManager.setAnimation({el:graphics.image,state:"disappearing",component:dataset,doNotRemove:true,callback:function callback(){this.hide()}});graphics.element&&animationManager.setAnimation({el:graphics.element,state:"disappearing",component:dataset,doNotRemove:true,callback:function callback(){this.hide()}})}};_proto.getLineSegment=function getLineSegment(path,config,type){var dataset=this,xPos=config._Px,yPos=config._Py,baseXPos=config._Pbx,baseYPos=config._Pby,yAxis=dataset.getFromEnv("yAxis"),baseZero=yAxis.getPixel(0),setValue=config.setValue,pathKey="path-"+path.pathCount,connectNullData=dataset.getFromEnv("chart").config.connectnulldata;if(type==="zero"){yPos=baseZero;baseYPos=baseZero}else if(type==="base"){yPos=config._Pby}if(!path.pathMap[pathKey]){path.pathMap[pathKey]=[]}if(!path.path2Map[pathKey]){path.path2Map[pathKey]=[]}if(setValue===null||setValue.isNull){if(!connectNullData){if(path.pointsJoined>0){if(path.path2Map[pathKey][path.path2Map[pathKey].length-1]!==Z&&baseYPos!==UNDEF){path.path2Map[pathKey].push(Z)}}path.temp=[];path.temp2=[];path.lastValidValue=false}}else{if(path.lastValidValue){if(path.temp.length){path.pathMap[pathKey]=path.pathMap[pathKey].concat(path.temp);if(baseXPos!==UNDEF){path.path2Map[pathKey]=path.temp2;path.temp2=[]}path.temp=[];path.pointsJoined++}path.pathMap[pathKey].push([L,xPos,yPos]);if(baseYPos!==UNDEF){path.path2Map[pathKey].unshift([L,xPos,baseYPos])}}else{path.temp.push([M,xPos,yPos]);if(baseYPos!==UNDEF){path.temp2.push([L,baseXPos,baseYPos])}path.pointsJoined=0;path.lastValidValue=true;path.pathCount++}}return path};_proto.getLinePath=function getLinePath(data,positions,type){var dataset=this,chart=dataset.getFromEnv("chart"),chartConfig=chart.config,i,j,config,baseYPos,length=data.length,dataObj,setValue,startPos=positions&&positions.begin||0,endPos=dataset.getState("visible")?positions&&positions.end||length:0,step=chartConfig.viewPortConfig.step||1,removeDataLen=dataset.removeDataLen||0,dataWithRemovedPaths=[],skippingInfo=dataset.getSkippingInfo&&dataset.getSkippingInfo(),plotDrawArray=skippingInfo&&skippingInfo.draw||[],plotDrawArrayLength=plotDrawArray.length,skippingApplied=skippingInfo&&skippingInfo.skippingApplied,skipIgnorerIndices=dataset.config.skipIgnorerIndices,dataConfigs=[],pathObj={},latestSkipIgnorerIdx=0,prevJ,interimData,interimConfig,lastPathKey,interimSetValue;removeDataLen=0;dataWithRemovedPaths=dataWithRemovedPaths.concat(data);if(skippingApplied){startPos=0;endPos=plotDrawArrayLength}for(j=startPos+removeDataLen;j<endPos+removeDataLen;j+=step){i=plotDrawArray[j]||j;dataObj=dataWithRemovedPaths[i];if(!dataObj){continue}config=dataObj.config;setValue=config.setValue;if(setValue===UNDEF||config&&config.isSkipped===true){config&&delete config.isSkipped;continue}if(step>1){while(skipIgnorerIndices[latestSkipIgnorerIdx]<j){interimData=dataWithRemovedPaths[skipIgnorerIndices[latestSkipIgnorerIdx]];if(!interimData){continue}interimConfig=interimData.config;interimSetValue=interimConfig.setValue;if(interimSetValue===UNDEF||interimConfig&&interimConfig.isSkipped===true){interimConfig&&delete interimConfig.isSkipped;continue}dataConfigs=dataConfigs.concat(interimConfig);latestSkipIgnorerIdx++}}dataConfigs=dataConfigs.concat(config);baseYPos=config._Pby;prevJ=j}if(step>1){for(i=prevJ+1;i<=j;i++){dataObj=dataWithRemovedPaths[plotDrawArray[i]||i];if(!dataObj){continue}config=dataObj.config;setValue=config.setValue;if(setValue===UNDEF||config&&config.isSkipped===true){config&&delete config.isSkipped;continue}if(skipIgnorerIndices.includes(i)){dataConfigs=dataConfigs.concat(config);baseYPos=config._Pby}}}pathObj=dataConfigs.reduce(function(path,dataConfig){return dataset.getLineSegment(path,dataConfig,type)},{temp:[],temp2:[],pathMap:{},path2Map:{},pointsJoined:0,lastValidValue:false,getPathArr:getPathArr,pathCount:0});lastPathKey="path-"+pathObj.pathCount;if(pathObj.path2Map[lastPathKey]&&pathObj.path2Map[lastPathKey][pathObj.path2Map[lastPathKey].length-1]!==Z&&pathObj.pointsJoined>0&&baseYPos!==UNDEF){pathObj.path2Map[lastPathKey].push(Z)}return pathObj};_proto._removeDataVisuals=function _removeDataVisuals(dataObj){var dataSet=this,pool=dataSet.components.pool||(dataSet.components.pool={}),elementPool,ele,graphics,graphicsObj;if(!dataObj){return}graphics=dataObj.graphics;for(ele in graphics){elementPool=pool[ele]||(pool[ele]=[]);graphicsObj=graphics[ele];if(graphicsObj.hide&&typeof graphicsObj.hide==="function"){graphicsObj.attr({"text-bound":[]});graphicsObj.hide();graphicsObj.shadow&&graphicsObj.shadow(false)}elementPool.push(graphics[ele])}};_proto._parseAnchorProperties=function _parseAnchorProperties(i,dataArr){var dataSet=this,conf=dataSet.config,plotType=dataSet.getName(),chart=dataSet.getFromEnv("chart"),anchorAlpha=chart.config.anchoralpha,defaultAnchorVisibility=!chart.config.anchoralpha&&/area/gi.test(plotType)?0:1,JSONData=conf.JSONData,chartAttr=chart.getFromEnv("dataSource").chart,setDataArr=dataArr||JSONData.data||[],setData=setDataArr[i]||{},anchorProps={},showAnchorShadow,anchorAttrsDefined,drawAnchors;anchorAttrsDefined=pluck(setData.anchorstartangle,JSONData.anchorstartangle,chartAttr.anchorstartangle,setData.anchorimagealpha,JSONData.anchorimagealpha,chartAttr.anchorimagealpha,setData.anchorimagescale,JSONData.anchorimagescale,chartAttr.anchorimagescale,setData.anchorimagepadding,JSONData.anchorimagepadding,chartAttr.anchorimagepadding,setData.anchorimageurl,JSONData.anchorimageurl,chartAttr.anchorimageurl,setData.anchorradius,JSONData.anchorradius,chartAttr.anchorradius,setData.anchorbgcolor,JSONData.anchorbgcolor,chartAttr.anchorbgcolor,setData.anchorbordercolor,JSONData.anchorbordercolor,chartAttr.anchorbordercolor,setData.anchoralpha,JSONData.anchoralpha,chartAttr.anchoralpha,setData.anchorsides,JSONData.anchorsides,chartAttr.anchorsides,setData.anchorborderthickness,JSONData.anchorborderthickness,chartAttr.anchorborderthickness,UNDEF)!==UNDEF;drawAnchors=pluckNumber(setData.drawanchors,conf.drawanchors);if(anchorAttrsDefined){anchorProps.enabled=pluckNumber(drawAnchors,anchorAttrsDefined)}else{anchorProps.enabled=pluckNumber(drawAnchors,defaultAnchorVisibility)}anchorProps.startAngle=pluckNumber(setData.anchorstartangle,conf.anchorstartangle);anchorProps.imageAlpha=pluckNumber(setData.anchorimagealpha,conf.anchorimagealpha);anchorProps.imageScale=pluckNumber(setData.anchorimagescale,conf.anchorimagescale);anchorProps.imagePadding=pluckNumber(setData.anchorimagepadding,conf.anchorimagepadding);if(anchorProps.imagePadding<0){anchorProps.imagePadding=0}anchorProps.imageUrl=pluck(setData.anchorimageurl,conf.anchorimageurl);if(anchorProps.imageUrl){conf.imageCount++}anchorProps.radius=anchorProps.enabled?pluckNumber(setData.anchorradius,conf.anchorradius):0;anchorProps.isAnchorRadius=pluck(setData.anchorradius,JSONData.anchorradius,chartAttr.anchorradius);anchorProps.bgColor=pluck(setData.anchorbgcolor,conf.anchorbgcolor);if(!anchorProps.enabled){anchorAlpha=0}else{anchorAlpha=getFirstAlpha(pluck(setData.anchoralpha,conf.anchoralpha,anchorProps.enabled?HUNDREDSTRING:"0"))}anchorProps.anchorAlpha=anchorAlpha;anchorProps.bgAlpha=getFirstAlpha(pluck(setData.anchorbgalpha,conf.anchorbgalpha,anchorAlpha))*anchorAlpha/100;anchorProps.imageAlpha=anchorProps.imageAlpha*anchorAlpha/100;anchorProps.borderColor=pluck(setData.anchorbordercolor,conf.anchorbordercolor);anchorProps.borderAlpha=anchorAlpha;anchorProps.sides=pluck(setData.anchorsides,conf.anchorsides);anchorProps.borderThickness=pluck(setData.anchorborderthickness,conf.anchorborderthickness);anchorProps.symbol=mapSymbolName(anchorProps.sides).split("_");showAnchorShadow=pluckNumber(setData.anchorshadow,conf.anchorshadow)&&anchorProps.radius>=1;anchorProps.shadow={opacity:showAnchorShadow?anchorAlpha/100:0};return anchorProps};_proto._hideGraphics=function _hideGraphics(graphics){var dataset=this,graphicObj,prop;for(prop in graphics){if(graphics.hasOwnProperty(prop)){graphicObj=graphics[prop];if(!graphicObj){continue}if(graphicObj.hide){graphicObj.hide()}else{dataset._hideGraphics(graphicObj)}}}};_proto._parseHoverEffectOptions=function _parseHoverEffectOptions(dataObj,setDt){var dataset=this,setData=setDt,JSONData=dataset.config.JSONData,chart=dataset.getFromEnv("chart"),chartAttr=chart.getFromEnv("dataSource").chart,chartConfig=chart.config,config=dataObj.config,conf=dataset.config,anchorProps=config.anchorProps||{},showHoverEffect=chartConfig.plothovereffect,drawAnchors=conf.drawanchors,hoverEffects={enabled:false};setData=setData||{};if(showHoverEffect!==0&&drawAnchors!==0){hoverEffects.enabled=pluck(setData.hovercolor,setData.anchorhovercolor,setData.hovercolor,JSONData.hovercolor,setData.anchorbghovercolor,JSONData.anchorbghovercolor,chartAttr.anchorbghovercolor,JSONData.anchorhovercolor,chartAttr.anchorhovercolor,setData.hoveralpha,setData.anchorhoveralpha,JSONData.anchorhoveralpha,chartAttr.anchorhoveralpha,setData.bghoveralpha,setData.anchorbghoveralpha,JSONData.anchorbghoveralpha,chartAttr.anchorbghoveralpha,setData.anchorborderhovercolor,setData.borderhovercolor,JSONData.anchorborderhovercolor,chartAttr.anchorborderhovercolor,setData.anchorborderhoverthickness,setData.borderhoverthickness,JSONData.anchorborderhoverthickness,chartAttr.anchorborderhoverthickness,setData.anchorborderhoveralpha,setData.borderhoveralpha,JSONData.anchorborderhoveralpha,chartAttr.anchorborderhoveralpha,setData.hoverdip,setData.anchorhoverdip,JSONData.anchorhoverdip,chartAttr.anchorhoverdip,setData.anchorhoverstartangle,JSONData.anchorhoverstartangle,chartAttr.anchorhoverstartangle,setData.hoversides,setData.anchorhoversides,JSONData.anchorhoversides,chartAttr.anchorhoversides,setData.hoverradius,setData.anchorhoverradius,JSONData.anchorhoverradius,chartAttr.anchorhoverradius,JSONData.plotfillhovercolor,chartAttr.plotfillhovercolor,chartConfig.plothovereffect,UNDEF)!==UNDEF;hoverEffects.startAngle=pluckNumber(setData.anchorhoverstartangle,JSONData.anchorhoverstartangle,chartAttr.anchorhoverstartangle,anchorProps.startAngle);hoverEffects.anchorSides=pluckNumber(setData.hoversides,setData.anchorhoversides,JSONData.anchorhoversides,chartAttr.anchorhoversides,anchorProps.sides);hoverEffects.anchorRadius=pluckNumber(setData.anchorhoverradius,JSONData.anchorhoverradius,chartAttr.anchorhoverradius);hoverEffects.isAnchorHoverRadius=hoverEffects.anchorRadius;hoverEffects.anchorRadius=pluckNumber(hoverEffects.anchorRadius,anchorProps.radius+(showHoverEffect?2:0));hoverEffects.anchorScale=pluck(setData.hoverscale,JSONData.anchorscale,chartAttr.anchorscale);hoverEffects.imageHoverScale=pluckNumber(setData.anchorimagehoverScale,JSONData.anchorimagehoverscale,chartAttr.anchorimagehoverscale,110);hoverEffects.imageHoverAlpha=pluckNumber(setData.anchorimagehoveralpha,JSONData.anchorimaghoverealpha,chartAttr.anchorimagehoveralpha);hoverEffects.anchorAlpha=pluck(setData.anchorhoveralpha,setData.hoveralpha,JSONData.anchorhoveralpha,chartAttr.anchorhoveralpha,anchorProps.anchorAlpha);hoverEffects.anchorColor=getFirstColor(pluck(setData.hovercolor,setData.anchorhovercolor,setData.hoverColor,setData.anchorbghovercolor,JSONData.anchorbghovercolor,JSONData.anchorhovercolor,JSONData.hovercolor,chartAttr.anchorbghovercolor,chartAttr.anchorhovercolor,chartAttr.plotfillhovercolor,anchorProps.bgColor));hoverEffects.anchorBgAlpha=pluck(setData.bghoveralpha,setData.anchorbghoveralpha,JSONData.anchorbghoveralpha,chartAttr.anchorbghoveralpha,chartAttr.plotfillhoveralpha,anchorProps.bgAlpha);hoverEffects.anchorBgAlpha=hoverEffects.anchorBgAlpha*hoverEffects.anchorAlpha/100;hoverEffects.anchorBorderColor=pluck(setData.borderhovercolor,setData.anchorborderhovercolor,JSONData.anchorborderhovercolor,chartAttr.anchorborderhovercolor,anchorProps.borderColor);hoverEffects.anchorBorderAlpha=pluck(setData.borderhoveralpha,setData.anchorborderhoveralpha,JSONData.anchorborderhoveralpha,chartAttr.anchorborderhoveralpha,hoverEffects.anchorAlpha,anchorProps.borderAlpha);hoverEffects.anchorBorderThickness=pluckNumber(setData.borderhoverthickness,setData.anchorborderhoverthickness,JSONData.anchorborderhoverthickness,chartAttr.anchorborderhoverthickness,chartAttr.anchorBorderThickness,anchorProps.borderThickness);hoverEffects.dip=pluck(setData.hoverdip,setData.anchorhoverdip,JSONData.anchorhoverdip,chartAttr.anchorhoverdip,anchorProps.dip);hoverEffects.anchorAnimation=pluckNumber(setData.anchorhoveranimation,JSONData.anchorhoveranimation,chartAttr.anchorhoveranimation,1)}return hoverEffects};_proto._hoverPlotAnchor=function _hoverPlotAnchor(plotItem,eventType){var dataset=this,smartLabel=dataset.getFromEnv("smartLabel"),canvas=dataset.getFromEnv("chart").getChildren("canvas")[0],canvasDimension=canvas.getEffectiveDimensions(),canvasTop=canvasDimension.top,canvasBottom=canvasTop+canvasDimension.height,plotY=plotItem.config._Py,labelHeight,labelDim,animationManager=dataset.getFromEnv("animationManager"),sharedAnchor=dataset.getGraphicalElement("sharedAnchor"),plotElem=plotItem.graphics.element||sharedAnchor,valElem=plotItem.graphics.label,config=plotItem.config||{},anchorAlpha=config.anchorProps.anchorAlpha,anchorImageUrl=config&&config.anchorProps.imageUrl,plotElemImage=isVML&&anchorImageUrl?plotItem.graphics.element:plotItem.graphics.image,isImg=plotElem.type==="image",anchorRadius=plotElem.data("anchorRadius"),anchorHoverRadius=plotElem.data("anchorHoverRadius"),elemHoverAttr=plotElem.data(SETROLLOVERATTR),elemUnHoverAttr=plotElem.data(SETROLLOUTATTR),radiusDiff=valElem&&(valElem.data("isBelow")?1:-1)*(isImg?(elemHoverAttr.height-elemUnHoverAttr.height)*.5:anchorHoverRadius-anchorRadius),selectedAttr=eventType===ROLLOVER?elemHoverAttr:elemUnHoverAttr,animationImageAttr,elemImageHoverAttr,elemImageUnHoverAttr,isVisible=true,animationAttr={path:selectedAttr.path},shiftValues=1,staticAttr={fill:selectedAttr.fill,"stroke-width":selectedAttr["stroke-width"],stroke:selectedAttr.stroke},rotation=valElem&&valElem.data("rotation")||"",valAnimation;labelDim=smartLabel.getOriSize(config.displayValue);labelHeight=labelDim.height;if(plotY-3*labelHeight/2+radiusDiff<canvasTop){radiusDiff=canvasTop-plotY+3*labelHeight/2}else if(plotY+3*labelHeight/2+radiusDiff>canvasBottom){radiusDiff=canvasBottom-plotY-3*labelHeight/2}valAnimation={transform:"T0,"+(eventType===ROLLOVER?radiusDiff:0)+rotation};animationManager.setAnimationState(eventType===ROLLOVER?MOUSEOVER:MOUSEOUT);if(plotElemImage){elemImageHoverAttr=plotElemImage.data(SETROLLOVERATTR);elemImageUnHoverAttr=plotElemImage.data(SETROLLOUTATTR);animationImageAttr=eventType===ROLLOVER?elemImageHoverAttr:elemImageUnHoverAttr;animationImageAttr.alpha*=.01}if(isImg){animationAttr.alpha*=.01}else{Object.assign(animationAttr,staticAttr)}if(eventType===ROLLOVER&&!anchorHoverRadius||eventType===ROLLOUT&&!anchorRadius){isVisible=false}animationManager.setAnimation({el:plotElem,label:"anchor",component:dataset,doNotRemove:true,callback:function callback(){!isVisible&&plotElem.hide()},attr:isVisible&&animationAttr});isVisible&&plotElem.show();if(plotElemImage){animationManager.setAnimation({el:plotElemImage,label:"anchor",component:dataset,attr:isVisible&&animationImageAttr});isVisible&&plotElemImage.show()}if(plotItem.graphics&&plotItem.graphics.element||sharedAnchor&&sharedAnchor.element){anchorAlpha&&shiftValues&&valElem&&animationManager.setAnimation({el:valElem,label:"label",component:dataset,doNotRemove:true,attr:valAnimation})}};_proto.drawLabel=function drawLabel(start,end){var dataSet=this,conf=dataSet.config,chart=dataSet.getFromEnv("chart"),chartConfig=chart.config,SmartLabel=dataSet.getFromEnv("smartLabel"),style=chart.config.dataLabelStyle,dataStore=dataSet.components.data,paper=dataSet.getFromEnv("paper"),animationManager=dataSet.getFromEnv("animationManager"),displayValue=BLANKSTRING,rotateValues=chartConfig.rotatevalues?270:0,dataLabelContainer=dataSet.getContainer("labelGroup"),graphic,textY,textX,config,showValue,labelElement,labelStyle,dataObj,i,j,setValue,attr,tempGraphics,visible=dataSet.getState("visible"),len=dataStore.length,showLabel,skipInfo=dataSet.getSkippingInfo&&dataSet.getSkippingInfo(),skippingApplied=skipInfo&&skipInfo.skippingApplied,plotDrawArray=skipInfo&&skipInfo.labelDraw||[],plotDrawArrayLength=plotDrawArray.length,startIndex=pluckNumber(start,0),endIndex=pluckNumber(end,skippingApplied?plotDrawArrayLength:len),notParticularLabeDraw=plotDrawArrayLength===Math.abs(endIndex-(startIndex+1));labelStyle={"font-weight":style.fontWeight,"font-style":style.fontStyle,"font-family":style.fontFamily,"font-size":style.fontSize,"line-height":style.lineHeight};SmartLabel.setStyle(labelStyle);for(j=startIndex;j<endIndex;j++){i=skippingApplied&&notParticularLabeDraw?plotDrawArray[j]:j;dataObj=dataStore[i];config=dataObj&&dataObj.config;setValue=config&&config.setValue;if(dataObj===UNDEF||setValue===UNDEF||setValue===null||config.labelSkip===true){config&&delete config.labelSkip;tempGraphics=dataObj&&dataObj.graphics;if(tempGraphics&&tempGraphics.label){tempGraphics.label=animationManager.setAnimation({el:tempGraphics.label,component:dataSet})}continue}graphic=dataObj.graphics;displayValue=config.displayValue;showValue=config.showValue;labelElement=graphic.label;attr=config.props.label.attr;showLabel=defined(displayValue)&&showValue&&visible;if(showLabel){textX=config.props.label.attr.x;textY=config.props.label.attr.y;attr.transform=paper.getSuggestiveRotation(rotateValues,textX,textY);graphic.label=labelElement=animationManager.setAnimation({el:labelElement||"text",container:dataLabelContainer,component:dataSet,attr:attr,label:"label"});labelElement.data("isBelow",config._valueBelowPoint);labelElement.data("rotation",attr.transform);labelElement&&labelElement.outlineText(conf.showTextOutline,attr.fill)}else if(labelElement){graphic.label=animationManager.setAnimation({el:labelElement,component:dataSet,label:"label"})}}};_proto.getAxisValuePadding=function getAxisValuePadding(){return this.config.defaultPadding};_proto._hoverFunc=function _hoverFunc(dataObj,state,hoverEnabled,chartAttr){if(hoverEnabled){return this._hoverPlotAnchor(dataObj,state,chartAttr)}};_proto._onAnchorImageLoad=function _onAnchorImageLoad(dataObject){var dataset=this;return function(){var i=dataObject._index;_imageDrawHelper(dataset,dataObject);dataset.config.drawn?dataset.drawLabel(i,i+1):dataset.addJob(LABELUPDATEONIMAGELOADID+i,function(){dataset.drawLabel(i,i+1)},priorityList.label)}};return AreaDataset}(ColumnDataset);export default AreaDataset;