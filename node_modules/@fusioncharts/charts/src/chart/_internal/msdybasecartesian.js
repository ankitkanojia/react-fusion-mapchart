import _inheritsLoose from"@babel/runtime/helpers/inheritsLoose";import MSCartesian from"./mscartesian";import axisFactory from"../../factories/cartesian-axis-dual-y";import{pluck,pluckFontSize,pluckNumber,UNDEF,chartPaletteStr,extend2}from"@fusioncharts/core/src/lib";import datasetFactory from"../../factories/combi-dual-y-dataset";var _feedAxesRawData,getSpecificxAxisConf,getSpecificyAxisConf,setAxisDimention,mathMax=Math.max;var MSDyBaseCartesian=function(_MSCartesian){_inheritsLoose(MSDyBaseCartesian,_MSCartesian);function MSDyBaseCartesian(){var _this;_this=_MSCartesian.call(this)||this;_this.registerFactory("axis",axisFactory,["canvas"]);_this.registerFactory("dataset",datasetFactory,["vCanvas"]);return _this}MSDyBaseCartesian.getName=function getName(){return"MSDyBaseCartesian"};var _proto=MSDyBaseCartesian.prototype;_proto.__setDefaultConfig=function __setDefaultConfig(){_MSCartesian.prototype.__setDefaultConfig.call(this);this.config.syncaxislimits=0};_proto._feedAxesRawData=function _feedAxesRawData(){var iapi=this,config=iapi.config,colorM=iapi.getFromEnv("color-manager"),dataObj=iapi.getFromEnv("dataSource"),chartAttrs=iapi.getFromEnv("chart-attrib"),xAxisConf,yAxisConf,sYAxisConf,is3D=iapi.config.is3D,palleteString=is3D?chartPaletteStr.chart3D:chartPaletteStr.chart2D,primaryAxisOnleft=config.primaryAxisOnleft=pluckNumber(chartAttrs.primaryaxisonleft,1),syncAxisLimits=pluckNumber(chartAttrs.syncaxislimits,0),sYAxisTrendlines=[{line:[]}],pYAxisTrendlines=[{line:[]}],trendlinesArr,trendlineObj,arrLen,len,i,j,trendlines=dataObj.trendlines||[],showZeroPlane=pluckNumber(chartAttrs.showzeroplane,1),showZeroPlaneValue=pluckNumber(chartAttrs.showzeroplanevalue);if(!showZeroPlane&&showZeroPlaneValue===UNDEF){showZeroPlaneValue=0}xAxisConf=iapi.getSpecificxAxisConf();yAxisConf=iapi.getSpecificyAxisConf();sYAxisConf={isActive:false,isPercent:iapi.isPercentage,axisIndex:1,uniqueClassName:1,outCanfontFamily:pluck(chartAttrs.outcnvbasefont,chartAttrs.basefont,"Verdana,sans"),outCanfontSize:pluckFontSize(chartAttrs.outcnvbasefontsize,chartAttrs.basefontsize,10),outCancolor:pluck(chartAttrs.outcnvbasefontcolor,chartAttrs.basefontcolor,colorM.getColor(palleteString.baseFontColor)).replace(/^#? ([a-f0-9]+)/gi,"#$1"),axisNamePadding:chartAttrs.yaxisnamepadding,axisValuePadding:chartAttrs.yaxisvaluespadding,axisNameFont:chartAttrs.syaxisnamefont,axisNameFontSize:chartAttrs.syaxisnamefontsize,axisNameFontColor:chartAttrs.syaxisnamefontcolor,axisNameFontBold:chartAttrs.syaxisnamefontbold,axisNameFontItalic:chartAttrs.syaxisnamefontitalic,axisNameBgColor:chartAttrs.syaxisnamebgcolor,axisNameBorderColor:chartAttrs.syaxisnamebordercolor,axisNameAlpha:chartAttrs.syaxisnamealpha,axisNameFontAlpha:chartAttrs.syaxisnamefontalpha,axisNameBgAlpha:chartAttrs.syaxisnamebgalpha,axisNameBorderAlpha:chartAttrs.syaxisnameborderalpha,axisNameBorderPadding:chartAttrs.syaxisnameborderpadding,axisNameBorderRadius:chartAttrs.syaxisnameborderradius,axisNameBorderThickness:chartAttrs.syaxisnameborderthickness,axisNameBorderDashed:chartAttrs.syaxisnameborderdashed,axisNameBorderDashLen:chartAttrs.syaxisnameborderdashlen,axisNameBorderDashGap:chartAttrs.syaxisnameborderdashgap,axisNameWidth:chartAttrs.syaxisnamewidth,useEllipsesWhenOverflow:chartAttrs.useellipseswhenoverflow,rotateAxisName:pluckNumber(chartAttrs.rotateyaxisname,1),axisName:chartAttrs.syaxisname,divLineColor:pluck(chartAttrs.divlinecolor,colorM.getColor(palleteString.divLineColor)),divLineAlpha:pluck(chartAttrs.divlinealpha,colorM.getColor("divLineAlpha")),divLineThickness:pluckNumber(chartAttrs.divlinethickness,1),divLineIsDashed:Boolean(pluckNumber(chartAttrs.divlinedashed,chartAttrs.divlineisdashed,0)),divLineDashLen:pluckNumber(chartAttrs.divlinedashlen,4),divLineDashGap:pluckNumber(chartAttrs.divlinedashgap,2),showAlternateGridColor:pluckNumber(chartAttrs.showalternatehgridcolor,1),alternateGridColor:pluck(chartAttrs.alternatehgridcolor,colorM.getColor("altHGridColor")),alternateGridAlpha:pluck(chartAttrs.alternatehgridalpha,colorM.getColor("altHGridAlpha")),numDivLines:chartAttrs.numdivlines,axisMinValue:syncAxisLimits?pluckNumber(chartAttrs.syaxisminvalue,chartAttrs.pyaxisminvalue,chartAttrs.yaxisminvalue):chartAttrs.syaxisminvalue,axisMaxValue:syncAxisLimits?pluckNumber(chartAttrs.syaxismaxvalue,chartAttrs.pyaxismaxvalue,chartAttrs.yaxismaxvalue):chartAttrs.syaxismaxvalue,setAdaptiveMin:chartAttrs.setadaptivesymin||chartAttrs.setadaptiveymin,adjustDiv:chartAttrs.adjustdiv,labelStep:chartAttrs.yaxisvaluesstep,showAxisValues:pluckNumber(chartAttrs.showsyaxisvalues,chartAttrs.showsyaxisvalue,chartAttrs.showyaxisvalues,chartAttrs.showyaxisvalue),showLimits:pluckNumber(chartAttrs.showsecondarylimits,chartAttrs.showyaxislimits,chartAttrs.showlimits),showDivLineValues:pluckNumber(chartAttrs.showdivlinesecondaryvalue,chartAttrs.showyaxisvalues,chartAttrs.showyaxisvalue,1),showZeroPlane:showZeroPlane,zeroPlaneColor:chartAttrs.zeroplanecolor,zeroPlaneThickness:pluckNumber(chartAttrs.zeroplanethickness,chartAttrs.divlinethickness,2),zeroPlaneAlpha:chartAttrs.zeroplanealpha,showZeroPlaneValue:showZeroPlaneValue,trendlineColor:chartAttrs.trendlinecolor,trendlineToolText:chartAttrs.trendlinetooltext,trendlineThickness:chartAttrs.trendlinethickness,trendlineAlpha:chartAttrs.trendlinealpha,showTrendlinesOnTop:chartAttrs.showtrendlinesontop,showAxisLine:is3D?0:pluckNumber(chartAttrs.showsyaxisline,chartAttrs.showaxislines,chartAttrs.drawAxisLines,0),axisLineThickness:pluckNumber(chartAttrs.syaxislinethickness,chartAttrs.axislinethickness,1),axisLineAlpha:pluckNumber(chartAttrs.syaxislinealpha,chartAttrs.axislinealpha,100),axisLineColor:pluck(chartAttrs.syaxislinecolor,chartAttrs.axislinecolor,"#000000"),labelFont:chartAttrs.yaxisvaluefont,labelFontSize:chartAttrs.yaxisvaluefontsize,labelFontColor:chartAttrs.yaxisvaluefontcolor,labelAlpha:chartAttrs.yaxisvaluealpha,labelFontBold:chartAttrs.yaxisvaluefontbold,labelFontItalic:chartAttrs.yaxisvaluefontitalic,labelBdrColor:chartAttrs.yaxisvaluebordercolor,labelBdrAlpha:chartAttrs.yaxisvalueborderalpha,labelBgAlpha:chartAttrs.yaxisvaluebgalpha,labelLink:chartAttrs.yaxisvaluelink,labelBgColor:chartAttrs.yaxisvaluebgcolor,labelBdrThickness:chartAttrs.yaxisvalueborderthickness,labelBdrPadding:chartAttrs.yaxisvalueborderpadding,labelBdrRadius:chartAttrs.yaxisvalueborderradius,labelBdrDashed:chartAttrs.yaxisvalueborderdashed,labelBdrDashLen:chartAttrs.yaxisvalueborderdashlen,labelBdrDashGap:chartAttrs.yaxisvalueborderdashgap};xAxisConf.vtrendlines=extend2([],dataObj.vtrendlines);for(i=0,len=trendlines.length;i<len;i++){trendlinesArr=trendlines[i]&&trendlines[i].line||[];arrLen=trendlinesArr.length;for(j=0;j<arrLen;j++){trendlineObj=trendlinesArr[j]||{};if(trendlineObj.parentyaxis==="s"){sYAxisTrendlines[0].line.push(trendlineObj)}else{pYAxisTrendlines[0].line.push(trendlineObj)}}}yAxisConf.trendlines=extend2([],pYAxisTrendlines);sYAxisConf.trendlines=extend2([],sYAxisTrendlines);if(primaryAxisOnleft===1){yAxisConf.isVertical=true;yAxisConf.isReverse=true;yAxisConf.isOpposit=false;sYAxisConf.isVertical=true;sYAxisConf.isReverse=true;sYAxisConf.isOpposit=true}else{yAxisConf.isVertical=true;yAxisConf.isReverse=true;yAxisConf.isOpposit=true;sYAxisConf.isVertical=true;sYAxisConf.isReverse=true;sYAxisConf.isOpposit=false}return{yAxisConf:[yAxisConf,sYAxisConf],xAxisConf:[xAxisConf]}};_proto.getSpecificxAxisConf=function getSpecificxAxisConf(){var iapi=this,chartAttrs=iapi.getFromEnv("chart-attrib"),is3D=iapi.config.is3D,xAxisConf=iapi.getBasexAxisConf(),config=iapi.config;xAxisConf.zeroPlaneThickness=pluckNumber(chartAttrs.vzeroplanethickness,chartAttrs.vdivlinethickness,2);xAxisConf.zeroPlaneAlpha=pluckNumber(chartAttrs.vzeroplanealpha,chartAttrs.vdivlinealpha,config.zeroplanealpha);xAxisConf.showZeroPlaneValue=chartAttrs.showvzeroplanevalue;xAxisConf.showAxisLine=is3D?0:pluckNumber(chartAttrs.showxaxisline,chartAttrs.showaxislines,chartAttrs.drawAxisLines,0);xAxisConf.axisLineColor=pluck(chartAttrs.xaxislinecolor,chartAttrs.axislinecolor,"#000000");xAxisConf.isReverse=false;xAxisConf.showAlternateGridColor=pluckNumber(chartAttrs.showalternatevgridcolor,0);xAxisConf.numDivLines=chartAttrs.numvdivlines;xAxisConf.maxLabelHeight=chartAttrs.maxlabelheight;xAxisConf.axisName=chartAttrs.xaxisname;xAxisConf.setAdaptiveMin=chartAttrs.setadaptivexmin;xAxisConf.showLimits=chartAttrs.showvlimits;xAxisConf.showDivLineValues=pluckNumber(chartAttrs.showvdivlinevalues,chartAttrs.showvdivlinevalues);return xAxisConf};_proto.getSpecificyAxisConf=function getSpecificyAxisConf(){var iapi=this,chartAttrs=iapi.getFromEnv("chart-attrib"),is3D=iapi.config.is3D,palleteString=is3D?chartPaletteStr.chart3D:chartPaletteStr.chart2D,config=iapi.config,colorM=iapi.getFromEnv("color-manager"),syncAxisLimits=pluckNumber(chartAttrs.syncaxislimits,0),showZeroPlane=pluckNumber(chartAttrs.showzeroplane,1),showZeroPlaneValue=pluckNumber(chartAttrs.showzeroplanevalue);if(!showZeroPlane&&showZeroPlaneValue===UNDEF){showZeroPlaneValue=0}return{outCanfontFamily:pluck(chartAttrs.outcnvbasefont,chartAttrs.basefont,"Verdana,sans"),outCanfontSize:pluckFontSize(chartAttrs.outcnvbasefontsize,chartAttrs.basefontsize,10),outCancolor:pluck(chartAttrs.outcnvbasefontcolor,chartAttrs.basefontcolor,colorM.getColor(palleteString.baseFontColor)).replace(/^#? ([a-f0-9]+)/gi,"#$1"),axisNamePadding:pluckNumber(chartAttrs.pyaxisnamepadding,chartAttrs.yaxisnamepadding),axisValuePadding:pluckNumber(chartAttrs.pyaxisvaluespadding,chartAttrs.yaxisvaluespadding),axisNameFont:pluck(chartAttrs.pyaxisnamefont,chartAttrs.yaxisnamefont),axisNameFontSize:pluckNumber(chartAttrs.pyaxisnamefontsize,chartAttrs.yaxisnamefontsize),axisNameFontColor:pluck(chartAttrs.pyaxisnamefontcolor,chartAttrs.yaxisnamefontcolor),axisNameFontBold:pluckNumber(chartAttrs.pyaxisnamefontbold,chartAttrs.yaxisnamefontbold),axisNameFontItalic:pluckNumber(chartAttrs.pyaxisnamefontitalic,chartAttrs.yaxisnamefontitalic),axisNameBgColor:pluck(chartAttrs.pyaxisnamebgcolor,chartAttrs.yaxisnamebgcolor),axisNameBorderColor:pluck(chartAttrs.pyaxisnamebordercolor,chartAttrs.yaxisnamebordercolor),axisNameAlpha:pluckNumber(chartAttrs.pyaxisnamealpha,chartAttrs.yaxisnamealpha),axisNameFontAlpha:pluckNumber(chartAttrs.pyaxisnamefontalpha,chartAttrs.yaxisnamefontalpha),axisNameBgAlpha:pluckNumber(chartAttrs.pyaxisnamebgalpha,chartAttrs.yaxisnamebgalpha),axisNameBorderAlpha:pluckNumber(chartAttrs.pyaxisnameborderalpha,chartAttrs.yaxisnameborderalpha),axisNameBorderPadding:pluckNumber(chartAttrs.pyaxisnameborderpadding,chartAttrs.yaxisnameborderpadding),axisNameBorderRadius:pluckNumber(chartAttrs.pyaxisnameborderradius,chartAttrs.yaxisnameborderradius),axisNameBorderThickness:pluckNumber(chartAttrs.pyaxisnameborderthickness,chartAttrs.yaxisnameborderthickness),axisNameBorderDashed:pluckNumber(chartAttrs.pyaxisnameborderdashed,chartAttrs.yaxisnameborderdashed),axisNameBorderDashLen:pluckNumber(chartAttrs.pyaxisnameborderdashlen,chartAttrs.yaxisnameborderdashlen),axisNameBorderDashGap:pluckNumber(chartAttrs.pyaxisnameborderdashgap,chartAttrs.yaxisnameborderdashgap),axisNameWidth:pluckNumber(chartAttrs.pyaxisnamewidth,chartAttrs.yaxisnamewidth),useEllipsesWhenOverflow:chartAttrs.useellipseswhenoverflow,rotateAxisName:pluckNumber(chartAttrs.rotateyaxisname,1),axisName:pluck(chartAttrs.pyaxisname,chartAttrs.yaxisname),divLineColor:pluck(chartAttrs.divlinecolor,colorM.getColor(palleteString.divLineColor)),divLineAlpha:pluck(chartAttrs.divlinealpha,colorM.getColor("divLineAlpha")),divLineThickness:pluckNumber(chartAttrs.divlinethickness,1),divLineIsDashed:Boolean(pluckNumber(chartAttrs.divlinedashed,chartAttrs.divlineisdashed,0)),divLineDashLen:pluckNumber(chartAttrs.divlinedashlen,4),divLineDashGap:pluckNumber(chartAttrs.divlinedashgap,2),showAlternateGridColor:pluckNumber(chartAttrs.showalternatehgridcolor,1),alternateGridColor:pluck(chartAttrs.alternatehgridcolor,colorM.getColor("altHGridColor")),alternateGridAlpha:pluck(chartAttrs.alternatehgridalpha,colorM.getColor("altHGridAlpha")),numDivLines:chartAttrs.numdivlines,axisMinValue:syncAxisLimits?pluckNumber(chartAttrs.syaxisminvalue,chartAttrs.pyaxisminvalue,chartAttrs.yaxisminvalue):pluckNumber(chartAttrs.pyaxisminvalue,chartAttrs.yaxisminvalue),axisMaxValue:syncAxisLimits?pluckNumber(chartAttrs.syaxismaxvalue,chartAttrs.pyaxismaxvalue,chartAttrs.yaxismaxvalue):pluckNumber(chartAttrs.pyaxismaxvalue,chartAttrs.yaxismaxvalue),setAdaptiveMin:chartAttrs.setadaptiveymin,adjustDiv:chartAttrs.adjustdiv,labelStep:chartAttrs.yaxisvaluesstep,showAxisValues:pluckNumber(chartAttrs.showyaxisvalues,chartAttrs.showyaxisvalue),showLimits:pluckNumber(chartAttrs.showyaxislimits,chartAttrs.showlimits,iapi.showLimits),showDivLineValues:pluckNumber(chartAttrs.showdivlinevalues,chartAttrs.showdivlinevalue),showZeroPlane:showZeroPlane,zeroPlaneColor:chartAttrs.zeroplanecolor,zeroPlaneThickness:pluckNumber(chartAttrs.zeroplanethickness,chartAttrs.divlinethickness,config.zeroplanethickness,2),zeroPlaneAlpha:pluckNumber(chartAttrs.zeroplanealpha,chartAttrs.divlinealpha,config.zeroplanealpha),showZeroPlaneValue:showZeroPlaneValue,showZeroPlaneOnTop:config.showzeroplaneontop,trendlineColor:chartAttrs.trendlinecolor,trendlineToolText:chartAttrs.trendlinetooltext,trendlineThickness:chartAttrs.trendlinethickness,trendlineAlpha:chartAttrs.trendlinealpha,showTrendlinesOnTop:chartAttrs.showtrendlinesontop,showAxisLine:is3D?0:pluckNumber(chartAttrs.showyaxisline,chartAttrs.showaxislines,chartAttrs.drawAxisLines,0),axisLineThickness:pluckNumber(chartAttrs.yaxislinethickness,chartAttrs.axislinethickness,1),axisLineAlpha:pluckNumber(chartAttrs.yaxislinealpha,chartAttrs.axislinealpha,100),axisLineColor:pluck(chartAttrs.yaxislinecolor,chartAttrs.axislinecolor,"#000000"),forceTrendBelow:!!config.is3D,labelFont:chartAttrs.yaxisvaluefont,labelFontSize:chartAttrs.yaxisvaluefontsize,labelFontColor:chartAttrs.yaxisvaluefontcolor,labelAlpha:chartAttrs.yaxisvaluealpha,labelFontBold:chartAttrs.yaxisvaluefontbold,labelFontItalic:chartAttrs.yaxisvaluefontitalic,labelBdrColor:chartAttrs.yaxisvaluebordercolor,labelBgAlpha:chartAttrs.yaxisvaluebgalpha,labelBdrAlpha:chartAttrs.yaxisvalueborderalpha,labelLink:chartAttrs.yaxisvaluelink,labelBgColor:chartAttrs.yaxisvaluebgcolor,labelBdrThickness:chartAttrs.yaxisvalueborderthickness,labelBdrPadding:chartAttrs.yaxisvalueborderpadding,labelBdrRadius:chartAttrs.yaxisvalueborderradius,labelBdrDashed:chartAttrs.yaxisvalueborderdashed,labelBdrDashLen:chartAttrs.yaxisvalueborderdashlen,labelBdrDashGap:chartAttrs.yaxisvalueborderdashgap}};_proto.setAxisDimention=function setAxisDimention(){var iapi=this,config=iapi.config,children=iapi.getChildren(),yAxisArr=children.yAxis,xAxis=children.xAxis&&children.xAxis[0],yAxis=yAxisArr[0],sYAxis=yAxisArr[1],xDepth=config.xDepth||0,canvas=children.canvas[0],canvasConfig=canvas.config,canvasBorderWidth=canvasConfig.canvasBorderWidth,canvasPadding=canvasConfig.canvasPadding,canvasPaddingLeft=canvasConfig.canvasPaddingLeft,canvasPaddingRight=canvasConfig.canvasPaddingRight,canvasPaddingTop=canvasConfig.canvasPaddingTop,yAxisStartXPos,sYAxisStartXPos,shift=config.shift||0,sumValueSpaceTop=config.sumValueSpace&&config.sumValueSpace.top||0,primaryAxisOnleft=config.primaryAxisOnleft,canvasPaddingBottom=canvasConfig.canvasPaddingBottom,maxLeftPadding=mathMax(canvasPaddingLeft,canvasPadding);xAxis&&xAxis.setAxisDimention({x:config.canvasLeft+xDepth+maxLeftPadding,y:xAxis.config.isOpposit?config.canvasTop-canvasBorderWidth-(config.is3D?0:shift)-sumValueSpaceTop:config.canvasBottom+shift+canvasBorderWidth,opposite:xAxis.config.isOpposit?config.canvasBottom+shift+canvasBorderWidth:config.canvasTop-canvasBorderWidth,axisLength:config.canvasWidth-xDepth-maxLeftPadding-mathMax(canvasPaddingRight,canvasPadding)});if(primaryAxisOnleft){config.yAxisStartXPos=config.canvasLeft-canvasBorderWidth;config.sYAxisStartXPos=config.canvasRight+canvasBorderWidth}else{config.yAxisStartXPos=config.canvasRight+canvasBorderWidth;config.sYAxisStartXPos=config.canvasLeft-canvasBorderWidth}yAxisStartXPos=config.yAxisStartXPos;sYAxisStartXPos=config.sYAxisStartXPos;yAxis&&yAxis.setAxisDimention({x:yAxisStartXPos,y:config.canvasTop+canvasPaddingTop,opposite:sYAxisStartXPos,axisLength:config.canvasHeight-canvasPaddingTop-canvasPaddingBottom});sYAxis&&sYAxis.setAxisDimention({x:sYAxisStartXPos,y:config.canvasTop+canvasPaddingTop,opposite:yAxisStartXPos,axisLength:config.canvasHeight-canvasPaddingTop-canvasPaddingBottom})};return MSDyBaseCartesian}(MSCartesian);_feedAxesRawData=MSDyBaseCartesian.prototype._feedAxesRawData;getSpecificxAxisConf=MSDyBaseCartesian.prototype.getSpecificxAxisConf;getSpecificyAxisConf=MSDyBaseCartesian.prototype.getSpecificyAxisConf;setAxisDimention=MSDyBaseCartesian.prototype.setAxisDimention;export{_feedAxesRawData,getSpecificxAxisConf,getSpecificyAxisConf,setAxisDimention};export default MSDyBaseCartesian;