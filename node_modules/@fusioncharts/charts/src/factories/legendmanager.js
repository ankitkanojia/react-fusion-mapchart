import{componentFactory}from"@fusioncharts/core/src/lib";import GLegend from"../../src/_internal/components/legend/gradient";import Legend from"../../src/_internal/components/legend/discrete";var NONE="none",GRADIENT="gradient",ICON="icon";function _decideLegendCreation(chart){var colorrange=chart.getFromEnv("dataSource").colorrange,mapbycategory=chart.getFromEnv("dataSource").chart.mapbycategory,isMap=chart.defaultDatasetType==="maps",isTreeMap=chart.getName()==="TreeMap",legendType,legend=chart.getFromEnv("legend"),gLegend=chart.getFromEnv("gLegend");if(!colorrange||!chart.config.showLegend){legendType=NONE}else if(isMap){if(colorrange.gradient&&Number(colorrange.gradient)){legendType=GRADIENT}else if(colorrange.color){legendType=ICON}else{legendType=NONE}}else if(isTreeMap){if(colorrange.gradient&&colorrange.gradient!=="0"){legendType=GRADIENT}else{legendType=NONE}}else{if(colorrange.gradient&&colorrange.gradient!=="0"&&!Number(mapbycategory)){legendType=GRADIENT}else{legendType=ICON}}switch(legendType){case"gradient":chart.deleteFromEnv("legend");legend&&legend.remove();componentFactory(chart,GLegend,"gLegend",1);gLegend=chart.getChildren("gLegend")[0];gLegend.configure();chart.addToEnv("gLegend",gLegend);break;case"icon":chart.deleteFromEnv("gLegend");gLegend&&gLegend.remove();componentFactory(chart,Legend,"legend",1,{showLegend:true});legend=chart.getChildren("legend")[0];legend.configure();chart.addToEnv("legend",legend);break;case"none":chart.deleteFromEnv("gLegend");chart.deleteFromEnv("legend");gLegend&&gLegend.remove();legend&&legend.remove()}}export default function(chart){_decideLegendCreation(chart)}