import{datasetFactory,pluckNumber,pluck}from"@fusioncharts/core/src/lib";var PIPE="|";export default function(chart){var jsonData=chart.getFromEnv("dataSource"),chartDef=jsonData.chart||{},cdm,cdmchar,chartConfig=chart.config,datasetsJSON=jsonData.dataset,dataSet,children=chart.getChildren(),canvas=children.canvas[0],i,data,j,tempArr,len,datasetParent=canvas.getChildren("vCanvas")[0];chartConfig.cdm=cdm=pluckNumber(chartDef.compactdatamode,0);chartConfig.cdmchar=cdmchar=pluck(chartDef.dataseparator,PIPE);if(!datasetsJSON){chart.setChartMessage()}for(i=0;i<datasetsJSON.length;i++){dataSet=datasetsJSON[i];if(cdm){if(dataSet.data&&dataSet.data.split){tempArr=dataSet.data.split(cdmchar);data=[];for(j=0,len=tempArr.length;j<len;j++){data.push({value:tempArr[j]})}dataSet.data=data}}}datasetFactory(datasetParent,chart.getDSdef(),"dataset",datasetsJSON.length,datasetsJSON);chart.iterateComponents(function(child){if(child.getType&&child.getType()==="dataset"){child.createPinElem&&child.addEventListener("createpinelements",child.createPinElem)}})}