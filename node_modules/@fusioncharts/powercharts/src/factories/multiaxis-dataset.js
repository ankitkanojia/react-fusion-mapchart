import{datasetFactory}from"@fusioncharts/core/src/lib";import MultiAxisDataset from"../dataset/multiaxisline";export default function(chart){var datasetsJSON,length,indices,vC,children=chart.getChildren(),yAxisSelectorUI=children.yAxisSelectorUI,canvas=children.canvas[0],numLen=(length+"").length,vCanvas=canvas.getChildren("vCanvas"),visibilityChangedHandler=function visibilityChangedHandler(e){yAxisSelectorUI.forEach(function(comp){comp.manipulateCheckBox(e)})},addDatasetVisibilityChangedEventListener=function addDatasetVisibilityChangedEventListener(dataset){dataset.addEventListener("datasetVisibilityChanged",visibilityChangedHandler)};for(var i=0,len=vCanvas.length;i<len;i++){vC=vCanvas[i];if(vC.getState("removed")){continue}datasetsJSON=vC.getFromEnv("axisData").dataset;if(datasetsJSON){length=datasetsJSON.length;indices=Array(length).fill(vC.getFromEnv("yAxis").config.axisIndex).map(function(n,j){return n+(j+1)*(1/Math.pow(10,numLen))});datasetFactory(vC,MultiAxisDataset,"dataset",length,datasetsJSON,indices);children=vC.getChildren("dataset");children.forEach(addDatasetVisibilityChangedEventListener)}}}