import FusionCharts from"../../../../fusioncharts/core";import chartType from"./index";import ignoreCaseExt from"../../../../fc-features/src/ignore-case-ext";import{setup,CONTAINER_ID}from"../../../../../smoke-test/test-sanity/utility";FusionCharts.addDep(chartType);FusionCharts.addDep(ignoreCaseExt);var chartName=chartType.getName(),chartID=chartName.toLowerCase();describe("Text outline testing "+chartName,function(){var chart,chartObj,itResize,renderData={chart:{plotborderfillcolor:"fff",plotborderthickness:"0",animation:"0",labelGlow:"1",horizontalPadding:"1",textoutline:"1",verticalPadding:"1",caption:"Harry SuperMart: Product-wise Revenue",subcaption:"FY2014-15"},data:[{label:"Harry SuperMart",value:"1000",fontcolor:"fff",fillcolor:"#303030",data:[{label:"Food Products",value:"400",fontcolor:"fff",fillcolor:"#404040",data:[{label:"Dairy",value:"80",fillcolor:"#99ffcc"},{label:"Cereals",value:"70",fillcolor:"#e5fff2"},{label:"Poultry",value:"150",fillcolor:"#00cc66"},{label:"Vegetables",value:"100",fillcolor:"#33ff99"}]},{label:"Non-food Products",value:"600",fontcolor:"fff",fillcolor:"#404040",data:[{label:"Apparel",value:"400",fontcolor:"fff",fillcolor:"#666",data:[{label:"Mens Wear",value:"150",fillcolor:"ff8080"},{label:"Womens Wear",value:"200",fillcolor:"#ff6666"},{label:"Childrens Wear",value:"50",fillcolor:"#ffcccc"}]},{label:"Kitchenware",value:"150",fillcolor:"#e6b3ff"},{label:"Electronics",value:"50",fillcolor:"#eeccff"}]}]}]},updateDataWithNoOutline={chart:{plotborderfillcolor:"fff",plotborderthickness:"0",animation:"0",labelGlow:"0",horizontalPadding:"1",verticalPadding:"1",caption:"Harry SuperMart: Product-wise Revenue",subcaption:"FY2014-15"},data:[{label:"Harry SuperMart",value:"1000",fontcolor:"fff",fillcolor:"#303030",data:[{label:"Food Products",value:"400",fontcolor:"fff",fillcolor:"#404040",data:[{label:"Dairy",value:"80",fillcolor:"#99ffcc"},{label:"Cereals",value:"70",fillcolor:"#e5fff2"},{label:"Poultry",value:"150",fillcolor:"#00cc66"},{label:"Vegetables",value:"100",fillcolor:"#33ff99"}]},{label:"Non-food Products",value:"600",fontcolor:"fff",fillcolor:"#404040",data:[{label:"Apparel",value:"400",fontcolor:"fff",fillcolor:"#666",data:[{label:"Mens Wear",value:"150",fillcolor:"ff8080"},{label:"Womens Wear",value:"200",fillcolor:"#ff6666"},{label:"Childrens Wear",value:"50",fillcolor:"#ffcccc"}]},{label:"Kitchenware",value:"150",fillcolor:"#e6b3ff"},{label:"Electronics",value:"50",fillcolor:"#eeccff"}]}]}]};chart={type:chartID,renderAt:CONTAINER_ID,dataSource:renderData};beforeEach(function(){chartObj=setup(FusionCharts,chart)});afterEach(function(){if(chartObj&&!chartObj.disposed)chartObj.dispose()});it("Text outline should get applied",function(done){var renderComplete=function renderComplete(){var labelElement=document.querySelector('[class$="labelfloat').getElementsByTagName("text")[0];expect(labelElement.getAttribute("filter")).not.toBe(null);done()};chartObj.addEventListener("renderComplete",renderComplete);chartObj.render()});it("Text outline should be removed",function(done){var updateFlag=0,renderComplete=function renderComplete(){if(!updateFlag){updateFlag=1;chartObj.setJSONData(updateDataWithNoOutline)}else{var labelElement=document.querySelector('[class$="labelfloat').getElementsByTagName("text")[0];expect(labelElement.getAttribute("filter")).toBe(null);done()}};chartObj.addEventListener("renderComplete",renderComplete);chartObj.render()});it("Label glow should not be applied when text outline is enabled",function(done){var renderComplete=function renderComplete(){debugger;var labelElement=document.querySelector('[class$="labelhighlight').getElementsByTagName("text")[0];expect(labelElement.innerHTML).toBe("");done()};chartObj.addEventListener("renderComplete",renderComplete);chartObj.render()})});