import FusionCharts from"../../../fusioncharts/core";import chartType from"../../../fusioncharts/viz/msline";import{setup,CONTAINER_ID}from"../../../../smoke-test/test-sanity/utility";FusionCharts.addDep(chartType);var chartName=chartType.getName(),chartID=chartName.toLowerCase();describe("labels will get drawn with size",function(){var chartData={type:chartID,renderAt:CONTAINER_ID,width:600,height:200,dataFormat:"json",dataSource:{chart:{yaxisname:null,drawcrossline:true,theme:"candy",showanchors:true,rotatelabels:false,plothighlighteffect:"fadeout",showvalues:true,legendposition:"right",legendallowdrag:false,legendcaption:null,showlegend:true,connectnulldata:true},categories:[{category:[{label:"1"},{label:"2"},{label:"3"},{label:"4"},{label:"5"},{label:"6"},{label:"7"},{label:"8"},{label:"9"},{label:"10"},{label:"11"},{label:"12"},{label:"13"},{label:"14"},{label:"15"},{label:"16"},{label:"17"},{label:"18"},{label:"19"},{label:"20"},{label:"21"},{label:"22"},{label:"23"},{label:"24"},{label:"25"},{label:"26"},{label:"27"},{label:"28"},{label:"29"},{label:"30"},{label:"31"}]}],dataset:[{seriesname:"Total",initiallyhidden:false,showvalues:false,plottooltext:"$value",data:[{value:529.6610169491526},{value:856.8980291345331},{value:0,dashed:true,color:"#808080"},{},{value:380.37276531000384},{value:504.79555779909134},{value:0},{value:0},{value:1512.8593040847202,dashed:true,color:"#808080"},{dashed:true,color:"#808080"},{},{value:756.4296520423601},{value:0},{value:0},{value:509.94390617032127},{value:0,dashed:true,color:"#808080"},{dashed:true,color:"#808080"},{},{value:757.862826828344},{value:0},{value:503.77833753148616},{value:524.6589716684156},{value:1511.7157974300833,dashed:true,color:"#808080"},{dashed:true,color:"#808080"},{},{value:100,dashed:true,color:"#808080"},{},{},{}]}]}},chart;afterEach(function(){return chart&&chart.dispose()});it("580 and labels some labels will be wrapped",function(done){chartData.width=580;chart=setup(FusionCharts,chartData);chart.addEventListener("renderComplete",function(e){e.detachHandler();var xAxisLabelsGroup=document.querySelectorAll('[class*="dataset-Label-group"] > [class*="-dataset-axis"]')[1],textChilds=xAxisLabelsGroup.getElementsByTagName("text"),textChildLength=textChilds.length;expect(textChildLength).toBe(31);expect(textChilds[textChildLength-1].childElementCount).toBe(2);done()});chart.render()});it("560 and alternate label will be skipped",function(done){chartData.width=560;chart=setup(FusionCharts,chartData);chart.addEventListener("renderComplete",function(e){e.detachHandler();var xAxisLabelsGroup=document.querySelectorAll('[class*="dataset-Label-group"] > [class*="-dataset-axis"]')[1],textChilds=xAxisLabelsGroup.getElementsByTagName("text"),textChildLength=textChilds.length;expect(textChildLength).toBe(16);expect(textChilds[textChildLength-1].childElementCount).toBe(0);done()});chart.render()});it("550 and alternate label will be skipped",function(done){chartData.width=550;chart=setup(FusionCharts,chartData);chart.addEventListener("renderComplete",function(e){e.detachHandler();var xAxisLabelsGroup=document.querySelectorAll('[class*="dataset-Label-group"] > [class*="-dataset-axis"]')[1],textChilds=xAxisLabelsGroup.getElementsByTagName("text"),textChildLength=textChilds.length;expect(textChildLength).toBe(16);expect(textChilds[textChildLength-1].childElementCount).toBe(0);done()});chart.render()});it("546 and alternate label will be skipped",function(done){chartData.width=546;chart=setup(FusionCharts,chartData);chart.addEventListener("renderComplete",function(e){e.detachHandler();var xAxisLabelsGroup=document.querySelectorAll('[class*="dataset-Label-group"] > [class*="-dataset-axis"]')[1],textChilds=xAxisLabelsGroup.getElementsByTagName("text"),textChildLength=textChilds.length;expect(textChildLength).toBe(16);expect(textChilds[textChildLength-1].childElementCount).toBe(0);done()});chart.render()})});