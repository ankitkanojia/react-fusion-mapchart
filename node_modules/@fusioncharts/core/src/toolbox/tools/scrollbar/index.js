import _inheritsLoose from"@babel/runtime/helpers/inheritsLoose";import{stubFN,pluckNumber,convertColor}from"../../../lib";import Tool from"../tool";import ScrollTrack from"./scroll-track";import ScrollAnchor from"./scroll-anchor";import ScrollButton from"./scroll-button";import{mergeConf}from"../helper";var UNDEF;var ScrollBar=function(_Tool){_inheritsLoose(ScrollBar,_Tool);function ScrollBar(){return _Tool.apply(this,arguments)||this}var _proto=ScrollBar.prototype;_proto.configureAttributes=function configureAttributes(options){if(options===void 0){options={}}_Tool.prototype.configureAttributes.call(this,options);var selfConfig=this.config,chartAttrs=this.getFromEnv("chart-attrib");selfConfig.conf={};selfConfig.color=chartAttrs.scrollcolor&&convertColor(chartAttrs.scrollcolor);selfConfig.padding=pluckNumber(chartAttrs.scrollpadding,0);selfConfig.height=pluckNumber(chartAttrs.scrollheight,12);selfConfig.width=pluckNumber(chartAttrs.scrollwidth,12);selfConfig.displayFlat=pluckNumber(chartAttrs.flatscrollbars,0);selfConfig.scrollBar3DLighting=pluckNumber(chartAttrs.scrollbar3dlighting,1);selfConfig.startPercent=Math.min(1,Math.max(0,parseFloat(chartAttrs.scrolltoend)||0));selfConfig.showButtons=!!pluckNumber(chartAttrs.scrollshowbuttons,1);selfConfig.buttonPadding=pluckNumber(chartAttrs.scrollbtnpadding,0);selfConfig.style=options.style;selfConfig.drawStripes=options.drawStripes;selfConfig.restrictScrollAnchor=pluckNumber(options.restrictScrollAnchor,1);this.setConfiguaration(options);selfConfig.evt={tooltext:UNDEF,click:stubFN,hover:[stubFN,stubFN]};this.createScrollItems()};_proto.createScrollItems=function createScrollItems(){var scrollbar=this,selfConfig=this.config,style=selfConfig.style||{},scrollTrack=scrollbar.getChildren("scrollTrack")&&scrollbar.getChildren("scrollTrack")[0],scrollAnchor=scrollbar.getChildren("scrollAnchor")&&scrollbar.getChildren("scrollAnchor")[0],scrollButtonStart=scrollbar.getChildren("scrollButtons")&&scrollbar.getChildren("scrollButtons")[0],scrollButtonEnd=scrollbar.getChildren("scrollButtons")&&scrollbar.getChildren("scrollButtons")[0];if(!scrollTrack){scrollTrack=scrollbar.attachChild(ScrollTrack,"scrollTrack");scrollTrack.configure({style:{track:style.track},color:selfConfig.color,displayFlat:selfConfig.displayFlat,isHorizontal:selfConfig.isHorizontal});scrollTrack.attachEventHandlers()}if(!scrollAnchor){scrollAnchor=scrollbar.attachChild(ScrollAnchor,"scrollAnchor");scrollAnchor.configure({style:{scroller:style.scroller,grip:style.grip},drawStripes:selfConfig.drawStripes,color:selfConfig.color,displayFlat:selfConfig.displayFlat,isHorizontal:selfConfig.isHorizontal});scrollAnchor.attachEventHandlers()}if(!scrollButtonStart&&selfConfig.showButtons){scrollButtonStart=scrollbar.attachChild(ScrollButton,"scrollStartButton");scrollButtonStart.configure({type:"start",color:selfConfig.color,style:{button:style.button,arrow:style.arrow}});scrollButtonStart.attachEventHandlers()}if(!scrollButtonEnd&&selfConfig.showButtons){scrollButtonEnd=scrollbar.attachChild(ScrollButton,"scrollEndButton");scrollButtonEnd.configure({type:"end",color:selfConfig.color,style:{button:style.button,arrow:style.arrow}});scrollButtonEnd.attachEventHandlers()}};_proto.getName=function getName(){return"scrollbar"};_proto.getType=function getType(){return"scrollbar"};_proto.setConfiguaration=function setConfiguaration(conf){var selfConfig=this.config;if(!selfConfig.color){selfConfig.color="#"+this.getFromEnv("chart").getFromEnv("color-manager").getColor("altHGridColor")}mergeConf(conf,selfConfig)};_proto.getLogicalSpace=function getLogicalSpace(){var selfConfig=this.config,conf=selfConfig.conf,preperaedScrollbarSpecAttr={};mergeConf(selfConfig,preperaedScrollbarSpecAttr);mergeConf(preperaedScrollbarSpecAttr,conf);return _Tool.prototype.getLogicalSpace.call(this)};_proto.setDimension=function setDimension(dim){_Tool.prototype.setDimension.call(this,dim);var scrollbar=this,scrollbarParent=scrollbar.getLinkedParent(),parentPosition=scrollbarParent.getPosition&&scrollbarParent.getPosition()||{},scrolleTrackConfig=scrollbar.getChildren("scrollTrack")[0].config;scrolleTrackConfig.transLateX=parentPosition.x||0;scrolleTrackConfig.transLateY=parentPosition.y||0};_proto.draw=function draw(){var scrollbar=this,selfConfig=scrollbar.config,conf=selfConfig.conf,preperaedScrollbarSpecAttr={};if(conf.isHorizontal){delete preperaedScrollbarSpecAttr.width}else{delete preperaedScrollbarSpecAttr.height}mergeConf(preperaedScrollbarSpecAttr,selfConfig,true);scrollbar.addGraphicalElement({el:"group",attr:{name:"scrollContainer"},component:scrollbar,container:{id:"scrollbarContainer",label:"scrollbar",isParent:true},label:"scrollbarGroup",id:"scrollbarGroup"})};_proto.attachEventHandlers=function attachEventHandlers(eventMap){var scrollbar=this,selfConfig=this.config,evt=selfConfig.evt;if(eventMap){eventMap.scroll&&typeof eventMap.scroll==="function"&&(evt.scroll=eventMap.scroll);eventMap.scrollStart&&typeof eventMap.scrollStart==="function"&&(evt.scrollStart=eventMap.scrollStart);eventMap.scrollEnd&&typeof eventMap.scrollEnd==="function"&&(evt.scrollEnd=eventMap.scrollEnd)}return scrollbar};return ScrollBar}(Tool);ScrollBar.registerSymbol=UNDEF;ScrollBar._setConfiguaration=stubFN;export default ScrollBar;