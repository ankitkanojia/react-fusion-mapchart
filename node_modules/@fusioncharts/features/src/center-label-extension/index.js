import CenterLabelExtension from"./center-label-extension";import{componentFactory}from"@fusioncharts/core/src/lib";import{priorityList}from"@fusioncharts/core/src/schedular";var isValidChart=function isValidChart(component){var componentName=component.getName().toLowerCase();return(componentName==="doughnut2d"||componentName==="multilevelpie")&&component.getType()==="dataset"},count=0,UNDEF;function centerLabel(labelText,_options){var chart=this.apiInstance,options=_options,dataset=chart.getChildren("dataset")[0],children=dataset.getChildren(),centerLabelComp=children.centerLabel&&children.centerLabel[0],chartConfig=chart.config,_helperFn=function _helperFn(){var seriesData=chart.getDatasets()[0],innerSize=seriesData.config.piePlotOptions.innerSize,centerLabelConfig,key;centerLabelConfig=centerLabelComp.config;if(typeof options!=="object"){options=centerLabelConfig}else{for(key in centerLabelConfig){options[key]===UNDEF&&(options[key]=centerLabelConfig[key])}centerLabelConfig=Object.assign(centerLabelConfig,options)}options.label=labelText;centerLabelConfig.label=labelText;seriesData.centerLabelConfig=centerLabelConfig;innerSize&&centerLabelComp&&centerLabelComp.draw(labelText||"")};if(centerLabelComp===UNDEF){componentFactory(dataset,CenterLabelExtension,"centerLabel",1,[chartConfig]);centerLabelComp=children.centerLabel&&children.centerLabel[0]}chart.addJob("eiMethods-center-lebel"+count++,_helperFn,priorityList.postRender)}export default{extension:function extension(FusionCharts){FusionCharts.addEventListener("instantiated",function onFcInstantiated(event){var component=event.sender;if(isValidChart(component)){component.registerFactory("centerLabel",function(){var chartConfig=component.getFromEnv("chartConfig"),hasCenterLabel=!!(chartConfig.centerlabel||chartConfig.defaultcenterlabel);component.getFromEnv("chartInstance").centerLabel=centerLabel;componentFactory(component,CenterLabelExtension,"centerLabel",hasCenterLabel?1:0,[chartConfig])})}})},name:"CenterLabelExtension",type:"extension",requiresFusionCharts:true};