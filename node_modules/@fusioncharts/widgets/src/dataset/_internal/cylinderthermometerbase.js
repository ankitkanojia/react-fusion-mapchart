import _inheritsLoose from"@babel/runtime/helpers/inheritsLoose";import{pluckNumber,pluck,COMMASTRING,BLANK,getValidValue,parseTooltext,parseUnsafeString,HUNDREDSTRING,preDefStr,convertColor,getLightColor}from"@fusioncharts/core/src/lib";import{ComponentInterface}from"@fusioncharts/core/src/component-interface";var UNDEF,BLANKSTRING=BLANK,AXISPOSITION_TOP=1,AXISPOSITION_BOTTOM=3,gaugeFillColorStr=preDefStr.gaugeFillColorStr,gaugeBorderColorStr=preDefStr.gaugeBorderColorStr,dummyStr="dummy",FILLMIXDARK10="{dark-10}";var CylinderThermometerBase=function(_ComponentInterface){_inheritsLoose(CylinderThermometerBase,_ComponentInterface);function CylinderThermometerBase(){return _ComponentInterface.apply(this,arguments)||this}var _proto=CylinderThermometerBase.prototype;_proto.getType=function getType(){return"dataset"};_proto.getName=function getName(){return"cylinderThermometerBase"};_proto.setValue=function setValue(setData,draw){if(!setData){return}var dataSet=this,datasetConfig=dataSet.config,chart=dataSet.getFromEnv("chart"),jsonChartObj=chart.getFromEnv("dataSource").chart,numberFormatter=dataSet.getFromEnv("number-formatter"),value=setData.value,tooltext=setData.tooltext||jsonChartObj.plottooltext,formattedValue;datasetConfig.value=value=numberFormatter.getCleanValue(value);if(value!==null){formattedValue=datasetConfig.formattedValue=numberFormatter.dataLabels(datasetConfig.value);if(!datasetConfig.showValue){datasetConfig.displayValue=BLANKSTRING}else{datasetConfig.displayValue=setData.label||getValidValue(formattedValue,BLANK)}if(!datasetConfig.showTooltip){datasetConfig.toolText=BLANKSTRING}else if(tooltext!==UNDEF){datasetConfig.toolText=parseUnsafeString(parseTooltext(pluck(setData.tooltext,tooltext),[1,2],{formattedValue:formattedValue,value:value},setData,jsonChartObj))}else{datasetConfig.toolText=parseUnsafeString(parseTooltext(pluck(setData.tooltext,formattedValue===null?BLANKSTRING:formattedValue)))}}else{datasetConfig.displayValue=BLANKSTRING;datasetConfig.toolText=BLANKSTRING;datasetConfig.formattedValue=null}if(draw){dataSet.draw()}};_proto.configure=function configure(dataSetJson){if(!dataSetJson){return false}this.setValue(dataSetJson&&dataSetJson.data&&dataSetJson.data[0]);var dataSet=this,chart=dataSet.getFromEnv("chart"),jsonData=chart.getFromEnv("dataSource"),chartAttrs=jsonData.chart,datasetConfig=dataSet.config||(dataSet.config={}),colorM=dataSet.getFromEnv("color-manager"),chartConfig=chart.config,gaugeBorderAlpha,showHoverEffect=pluckNumber(chartAttrs.showhovereffect),plotFillHoverColor,gaugeFillAlpha,gaugeFillColor;datasetConfig.showValue=pluckNumber(chartAttrs.showvalue,chartAttrs.showvalues,1);datasetConfig.showTooltip=pluckNumber(chartAttrs.showtooltip,1);datasetConfig.valuePadding=pluckNumber(chartAttrs.valuepadding,2);datasetConfig.tooltipSepChar=pluck(chartAttrs.tooltipsepchar,COMMASTRING);datasetConfig.pointerOnOpp=pluckNumber(chartAttrs.pointerontop,0);datasetConfig.axisPosition=pluckNumber(chartAttrs.ticksbelowgauge,chartAttrs.ticksbelowgraph,this.ticksbelowgauge,1)?AXISPOSITION_BOTTOM:AXISPOSITION_TOP;datasetConfig.valueAbovePointer=pluckNumber(chartAttrs.valueabovepointer,1);datasetConfig.labelStyle=chartConfig.dataLabelStyle;gaugeFillColor=datasetConfig.gaugeFillColor=pluck(chartAttrs.gaugefillcolor,chartAttrs.thmfillcolor,chartAttrs.cylfillcolor,colorM.getColor(gaugeFillColorStr));gaugeFillAlpha=datasetConfig.gaugeFillAlpha=pluckNumber(chartAttrs.gaugefillalpha,chartAttrs.cylfillalpha,chartAttrs.thmfillalpha,HUNDREDSTRING);datasetConfig.showGaugeBorder=pluckNumber(chartAttrs.showgaugeborder,1);gaugeBorderAlpha=datasetConfig.showGaugeBorder?pluckNumber(chartAttrs.gaugeborderalpha,40):0;datasetConfig.gaugeBorderColor=convertColor(pluck(chartAttrs.gaugebordercolor,colorM.getColor(gaugeBorderColorStr)),gaugeBorderAlpha);datasetConfig.gaugeBorderThickness=pluckNumber(chartAttrs.gaugeborderthickness,1);datasetConfig.gaugeContainerColor=pluck(chartAttrs.thmglasscolor,chartAttrs.cylglasscolor,chart.glasscolor,getLightColor(gaugeFillColor,30));if(showHoverEffect!==0&&(showHoverEffect||chartAttrs.plotfillhovercolor||chartAttrs.plotfillhoveralpha||chartAttrs.plotfillhoveralpha===0)){datasetConfig.showHoverEffect=true;plotFillHoverColor=pluck(chartAttrs.plotfillhovercolor,chartAttrs.cylfillhovercolor,chartAttrs.thmfillhovercolor,FILLMIXDARK10);datasetConfig.plotFillHoverAlpha=pluckNumber(chartAttrs.plotfillhoveralpha,chartAttrs.cylfillhoveralpha,chartAttrs.thmfillhoveralpha,gaugeFillAlpha);datasetConfig.plotFillHoverColor=/\{/.test(plotFillHoverColor)?colorM.parseColorMix(gaugeFillColor,plotFillHoverColor)[0]:plotFillHoverColor}dataSet.setValue(jsonData);chart._parseSpecialConfig&&chart._parseSpecialConfig()};_proto._getLabelSpace=function _getLabelSpace(){var dataSet=this,datasetConfig=dataSet.config,chart=dataSet.getFromEnv("chart"),smartLabel=dataSet.getFromEnv("smartLabel"),labelObj;smartLabel.useEllipsesOnOverflow(chart.config.useEllipsesWhenOverflow);smartLabel.setStyle(datasetConfig.labelStyle);labelObj=smartLabel.getOriSize(datasetConfig.displayValue!==BLANK?datasetConfig.displayValue:dummyStr);return labelObj.height?labelObj.height+datasetConfig.valuePadding:0};_proto.getDataLimits=function getDataLimits(){var dataSet=this,datasetConfig=dataSet.config,min,max;max=min=datasetConfig.value;datasetConfig.maxValue=max;datasetConfig.minValue=min;return{forceMin:true,forceMax:true,max:max,min:min}};_proto.updateData=function updateData(){var dataSet=this,dataObj=arguments[0],draw=arguments[2],conf=dataSet.config,prevMax=conf.maxValue,prevMin=conf.prevMin,value=conf.value,chart=dataSet.getFromEnv("chart"),drawManager=dataSet.groupManager||dataSet,scale=dataSet.getFromEnv("scale");dataSet.setValue(dataObj.data[0]);conf.maxValue=value;conf.minValue=value;if(conf.maxValue!==prevMax||conf.minValue!==prevMin){dataSet.config.maxminFlag=true}if(draw){chart._setAxisLimits();scale.draw();drawManager.draw()}};_proto.setJSONIndex=function setJSONIndex(index){this.config.index=index};_proto.getJSONIndex=function getJSONIndex(){return this.config.index||0};return CylinderThermometerBase}(ComponentInterface);export default CylinderThermometerBase;