import _inheritsLoose from"@babel/runtime/helpers/inheritsLoose";import ScaleContinuous,{copyScale,deInterpolateLinear as deinterpolate}from"./continuous";import reinterpolate from"../scale-utils/interpolators/number";import timeTicks,{tickInterval}from"../time-intervals/ticks";import enUS from"../time-converter/locales/en-US";import{TimeConverter}from"../time-converter";var durationSecond=1e3,durationMinute=durationSecond*60,durationHour=durationMinute*60,durationDay=durationHour*24,durationWeek=durationDay*7,durationMonth=durationDay*30,durationYear=durationDay*365,date=function date(d){return new Date(d)},number=function number(n){return n instanceof Date?+n:+new Date(+n)},_nice=function nice(domain,interval){var d=domain.slice();var firstDomainIdx=0,lastDomainIdx=d.length-1,firstDomainElem=d[firstDomainIdx],lastDomainElem=d[lastDomainIdx],temp;if(lastDomainElem<firstDomainElem){temp=firstDomainIdx;firstDomainIdx=lastDomainIdx;lastDomainIdx=temp;temp=firstDomainElem;firstDomainElem=lastDomainElem;lastDomainElem=temp}d[firstDomainIdx]=interval.floor(firstDomainElem);d[lastDomainIdx]=interval.ceil(lastDomainElem);return d};var ScaleCalendar=function(_ScaleContinuous){_inheritsLoose(ScaleCalendar,_ScaleContinuous);function ScaleCalendar(year,month,week,day,hour,minute,second,millisecond){var _this;_this=_ScaleContinuous.call(this,deinterpolate,reinterpolate)||this;_this.timeIntervals={year:year,month:month,week:week,day:day,hour:hour,minute:minute,second:second,millisecond:millisecond};_this.tickIntervals=[[_this.timeIntervals.second,1,durationSecond],[_this.timeIntervals.second,5,5*durationSecond],[_this.timeIntervals.second,15,15*durationSecond],[_this.timeIntervals.second,30,30*durationSecond],[_this.timeIntervals.minute,1,durationMinute],[_this.timeIntervals.minute,5,5*durationMinute],[_this.timeIntervals.minute,15,15*durationMinute],[_this.timeIntervals.minute,30,30*durationMinute],[_this.timeIntervals.hour,1,durationHour],[_this.timeIntervals.hour,3,3*durationHour],[_this.timeIntervals.hour,6,6*durationHour],[_this.timeIntervals.hour,12,12*durationHour],[_this.timeIntervals.day,1,durationDay],[_this.timeIntervals.day,2,2*durationDay],[_this.timeIntervals.week,1,durationWeek],[_this.timeIntervals.month,1,durationMonth],[_this.timeIntervals.month,3,3*durationMonth],[_this.timeIntervals.year,1,durationYear]];_this.locale=enUS;_this._localeConverter=new TimeConverter(enUS);return _this}var _proto=ScaleCalendar.prototype;_proto.setDomain=function setDomain(domain){return _ScaleContinuous.prototype.setDomain.call(this,domain.map(number))};_proto.getDomain=function getDomain(){return _ScaleContinuous.prototype.getDomain.call(this).map(date)};_proto.ticks=function ticks(interval,count){var domain=_ScaleContinuous.prototype.getDomain.call(this);return timeTicks(domain[0],domain[domain.length-1],interval,count,this.tickIntervals,this.timeIntervals)};_proto.nice=function nice(interval,count){var d=_ScaleContinuous.prototype.getDomain.call(this),i=tickInterval(d[0],d[d.length-1],interval,count,this.tickIntervals,this.timeIntervals);return i?_ScaleContinuous.prototype.setDomain.call(this,_nice(d,i)):this};_proto.getDomainValue=function getDomainValue(range){return new Date(_ScaleContinuous.prototype.getDomainValue.call(this,range))};_proto.setLocale=function setLocale(locale){if(locale===void 0){locale=enUS}this.locale=locale;this._localeConverter=new TimeConverter(this.locale);return this};_proto.copy=function copy(){var _this$timeIntervals=this.timeIntervals,year=_this$timeIntervals.year,month=_this$timeIntervals.month,week=_this$timeIntervals.week,day=_this$timeIntervals.day,hour=_this$timeIntervals.hour,minute=_this$timeIntervals.minute,second=_this$timeIntervals.second,millisecond=_this$timeIntervals.millisecond;return copyScale(this,new ScaleCalendar(year,month,week,day,hour,minute,second,millisecond))};return ScaleCalendar}(ScaleContinuous);export default ScaleCalendar;