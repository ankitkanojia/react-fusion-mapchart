import isArray from"../type/is-array";import constant from"../scale-utils/constant";import orderDefault from"./orders/default";import offsetDefault from"./offsets/default";var stackValue=function stackValue(d,key){return d[key]};var StackGenerator=function(){function StackGenerator(){this.keysAccessor=constant([]);this.order=orderDefault;this.offset=offsetDefault;this.valueAccessor=stackValue}var _proto=StackGenerator.prototype;_proto.generate=function generate(data){var keys=this.keysAccessor(data),i,jj=data.length,ii=keys.length,series=new Array(ii),orders;for(i=0;i<ii;++i){var ki=keys[i],si=new Array(jj),sij=void 0,j=void 0;series[i]=si;for(j=0;j<jj;++j){sij=[0,+this.valueAccessor(data[j],ki,j,data)];sij.data=data[j];si[j]=sij}si.key=ki}orders=this.order(series);for(i=0;i<ii;++i){series[orders[i]].index=i}this.offset(series,orders);return series};_proto.setKeysAccessor=function setKeysAccessor(accessor){if(accessor===void 0){accessor=constant([])}this.keysAccessor=typeof accessor==="function"?accessor:constant(isArray(accessor)?accessor.slice():[]);return this};_proto.getKeysAccessor=function getKeysAccessor(){return this.keysAccessor};_proto.setValueAccessor=function setValueAccessor(accessor){if(accessor===void 0){accessor=stackValue}this.valueAccessor=typeof accessor==="function"?accessor:constant(+accessor);return this};_proto.getValueAccessor=function getValueAccessor(){return this.valueAccessor};_proto.setOrder=function setOrder(order){if(order===void 0){order=orderDefault}this.order=typeof order==="function"?order:constant(isArray(order)?order.slice():[]);return this};_proto.getOrder=function getOrder(){return this.order};_proto.setOffset=function setOffset(offset){if(offset===void 0){offset=offsetDefault}this.offset=offset;return this};_proto.getOffset=function getOffset(){return this.offset};return StackGenerator}();export default StackGenerator;