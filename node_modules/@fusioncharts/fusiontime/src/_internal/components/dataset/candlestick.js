import _inheritsLoose from"@babel/runtime/helpers/inheritsLoose";import{UNDEF,pluck,defined,extend2,VISIBLE,pluckNumber,convertColor,DEFAULT_FT_FONT,BLANKSTRING}from"@fusioncharts/core/src/lib";import safeMax from"@fusioncharts/utils/src/array/safe-max";import safeMin from"@fusioncharts/utils/src/array/safe-min";import{addDep}from"@fusioncharts/core/src/dependency-manager";import isValidNumber from"@fusioncharts/utils/src/type/is-valid-number";import Column from"./column";import candlestickAnimation from"./candlestick.animation";var STROKE_COLOR="#464E56",BEAR="bear",BULL="bull",_reducerFn=function _reducerFn(s,t){return Object.assign(s,t)};addDep({name:"timeseriesCandlestickAnimation",type:"animationRule",extension:candlestickAnimation});var CandleStick=function(_Column){_inheritsLoose(CandleStick,_Column);function CandleStick(){return _Column.apply(this,arguments)||this}var _proto=CandleStick.prototype;_proto.getHoverInConfig=function getHoverInConfig(hoverIndices){var dsConfig=this.config;return{bullStyle:dsConfig.bullHoverInStyle,bearStyle:dsConfig.bearHoverInStyle,hoverIndices:hoverIndices,hovered:true}};_proto.getHighlightConfig=function getHighlightConfig(hoverIndices){var dsConfig=this.config;return{bullStyle:dsConfig.bullHighlightStyle,bearStyle:dsConfig.bearHighlightStyle,hoverIndices:hoverIndices,hovered:true}};_proto.getHoverOutConfig=function getHoverOutConfig(hoverIndices){var dsConfig=this.config,bullStyle=Object.assign({},dsConfig.bullHoverOutStyle),bearStyle=Object.assign({},dsConfig.bearHoverOutStyle),key;for(key in bullStyle){bullStyle[key]=null}for(key in bearStyle){bearStyle[key]=null}return{bullStyle:bullStyle,bearStyle:bearStyle,hoverIndices:hoverIndices,hovered:false}};_proto.__setDefaultConfig=function __setDefaultConfig(){var dataset=this,config=dataset.config;config.bullStyle={};config.bullHoverInStyle={};config.bullHighlightStyle={};config.bullHoverOutStyle={};config.bearStyle={};config.bearHoverInStyle={};config.bearHighlightStyle={};config.bearHoverOutStyle={};config.plotSpacePercent=40;config.dataMarkerPadding=0;config.visibility=VISIBLE;config.prevBoundaryInfo={};config.prevDataInfo=[];config.defaultBullStyle={"stroke-width":1,opacity:1,stroke:"000000",fill:"ffffff"};config.defaultBearStyle={"stroke-width":1,opacity:1,stroke:"000000",fill:"868AC8"};config.defaultBullHighlightStyle={"stroke-width":2};config.defaultBearHighlightStyle={"stroke-width":2};config.defaultBearHoverInStyle={"stroke-width":2};config.defaultBullHoverInStyle={"stroke-width":2};config.legendDefaultTextStyle={"font-family":DEFAULT_FT_FONT,"font-weight":"normal","font-style":"normal","font-size":"12px",fill:"#5F5F5F"};config.defaultBearPredictiveStyle={fill:"#62B58F"};config.defaultBullPredictiveStyle={fill:"#F76363"};config.strokeColor=STROKE_COLOR;config.hoverInfo=[]};_proto.configureAttributes=function configureAttributes(dataObj){var dataset=this,prop,dataSource=dataset.getFromEnv("dataSource"),getStyleDef=dataset.getFromEnv("getStyleDef"),legendConf=dataSource.legend,legendStyle=getStyleDef(legendConf&&legendConf.item&&legendConf.item.style&&legendConf.item.style.text),config=dataset.config;config.mergedLegendStyle=extend2(extend2({},config.legendDefaultTextStyle),legendStyle);if(dataObj.hasOwnProperty("hoverIndices")){config.hoverInfo.push(dataObj);config.hoverMode=true}else{for(prop in dataObj){if(prop==="primaryColor"){var plotConfig=dataObj.plotCosmetics,genericConfig=dataObj.genericCosmetics,bullStyle=config.bullStyle,bearStyle=config.bearStyle,bullHoverInStyle=config.bullHoverInStyle,bearHoverInStyle=config.bearHoverInStyle,bullHighlightStyle=config.bullHighlightStyle,bearHighlightStyle=config.bearHighlightStyle,bullHoverOutStyle=config.bullHoverOutStyle,bearHoverOutStyle=config.bearHoverOutStyle,styles=void 0,applicableClassBearStyle=getStyleDef(plotConfig.style&&plotConfig.style.bear),applicableClassBullStyle=getStyleDef(plotConfig.style&&plotConfig.style.bull),applicableClassStyleGeneric=getStyleDef(genericConfig.style&&genericConfig.style.plot),applicableClassStyleGenericHover=getStyleDef(genericConfig.style&&genericConfig.style["plot:hover"]),applicableClassStyleGenericHighlight=getStyleDef(genericConfig.style&&genericConfig.style["plot:highlight"]),applicableClassBullStyleGeneric=getStyleDef(genericConfig.style&&genericConfig.style.bull),applicableClassBullStyleGenericHover=getStyleDef(genericConfig.style&&genericConfig.style["bull:hover"]),applicableClassBullStyleGenericHighlight=getStyleDef(genericConfig.style&&genericConfig.style["bull:highlight"]),applicableClassBearStyleGeneric=getStyleDef(genericConfig.style&&genericConfig.style.bear),applicableClassBearStyleGenericHover=getStyleDef(genericConfig.style&&genericConfig.style["bear:hover"]),applicableClassBearStyleGenericHighlight=getStyleDef(genericConfig.style&&genericConfig.style["bear:highlight"]),applicableClassBearHoverStyle=getStyleDef(plotConfig.style&&plotConfig.style["bear:hover"]),applicableClassBearHighlightStyle=getStyleDef(plotConfig.style&&plotConfig.style["bear:highlight"]),applicableClassBullHoverStyle=getStyleDef(plotConfig.style&&plotConfig.style["bull:hover"]),applicableClassBullHighlightStyle=getStyleDef(plotConfig.style&&plotConfig.style["bull:highlight"]),applicableInlineBearStyle=getStyleDef(dataObj.styleConfig&&dataObj.styleConfig.bear),applicableInlineBullStyle=getStyleDef(dataObj.styleConfig&&dataObj.styleConfig.bull),applicableInlineBearHoverStyle=getStyleDef(dataObj.styleConfig&&dataObj.styleConfig["bear:hover"]),applicableInlineBearHighlightStyle=getStyleDef(dataObj.styleConfig&&dataObj.styleConfig["bear:highlight"]),applicableInlineBullHoverStyle=getStyleDef(dataObj.styleConfig&&dataObj.styleConfig["bull:hover"]),applicableInlineBullHighlightStyle=getStyleDef(dataObj.styleConfig&&dataObj.styleConfig["bull:highlight"]),applicableClassStylePlot=getStyleDef(plotConfig.style&&plotConfig.style.plot),applicableInlineStylePlot=getStyleDef(dataObj.styleConfig&&dataObj.styleConfig.plot),applicableClassStyleHoverPlot=getStyleDef(plotConfig.style&&plotConfig.style["generic:hover"]),applicableClassStyleHighlightPlot=getStyleDef(plotConfig.style&&plotConfig.style["generic:highlight"]),applicableInlineStyleHoverPlot=getStyleDef(dataObj.styleConfig&&dataObj.styleConfig["plot:hover"]),applicableInlineStyleHighlightPlot=getStyleDef(dataObj.styleConfig&&dataObj.styleConfig["plot:highlight"]);delete applicableClassStyleGeneric.fill;delete applicableClassStylePlot.fill;delete applicableInlineStylePlot.fill;if(dataset.getName()==="timeseries-ohlc"){delete applicableInlineStylePlot.stroke;delete applicableClassStyleGeneric.stroke;delete applicableClassStylePlot.stroke}[bullStyle,config.defaultBullStyle,applicableClassStyleGeneric,applicableClassStylePlot,applicableInlineStylePlot,applicableClassBullStyleGeneric,applicableClassBullStyle,applicableInlineBullStyle].reduce(_reducerFn);[bearStyle,config.defaultBearStyle,applicableClassStyleGeneric,applicableClassStylePlot,applicableInlineStylePlot,applicableClassBearStyleGeneric,applicableClassBearStyle,applicableInlineBearStyle].reduce(_reducerFn);[bullHoverInStyle,config.defaultBullHoverInStyle,applicableClassStyleGenericHover,applicableClassStyleHoverPlot,applicableInlineStyleHoverPlot,applicableClassBullStyleGenericHover,applicableClassBullHoverStyle,applicableInlineBullHoverStyle].reduce(_reducerFn);[bullHighlightStyle,config.defaultBullHighlightStyle,applicableClassStyleGenericHighlight,applicableClassStyleHighlightPlot,applicableInlineStyleHighlightPlot,applicableClassBullStyleGenericHighlight,applicableClassBullHighlightStyle,applicableInlineBullHighlightStyle].reduce(_reducerFn);[bearHoverInStyle,config.defaultBearHoverInStyle,applicableClassStyleGenericHover,applicableClassStyleHoverPlot,applicableInlineStyleHoverPlot,applicableClassBearStyleGenericHover,applicableClassBearHoverStyle,applicableInlineBearHoverStyle].reduce(_reducerFn);[bearHighlightStyle,config.defaultBearHighlightStyle,applicableClassStyleGenericHighlight,applicableClassStyleHighlightPlot,applicableInlineStyleHighlightPlot,applicableClassBearStyleGenericHighlight,applicableClassBearHighlightStyle,applicableInlineBearHighlightStyle].reduce(_reducerFn);bullStyle.stroke=convertColor(bullStyle.stroke,pluckNumber(bullStyle["stroke-opacity"],1)*100);bullStyle.fill=convertColor(bullStyle.fill,pluckNumber(bullStyle["fill-opacity"],1)*100);bearStyle.stroke=convertColor(bearStyle.stroke,pluckNumber(bearStyle["fill-opacity"],1)*100);bearStyle.fill=convertColor(bearStyle.fill,pluckNumber(bearStyle["fill-opacity"],1)*100);bullHoverInStyle.fill&&(bullHoverInStyle.fill=convertColor(bullHoverInStyle.fill,pluckNumber(bullHoverInStyle["fill-opacity"],bullStyle["fill-opacity"])*100));bullHoverInStyle.stroke&&(bullHoverInStyle.stroke=convertColor(bullHoverInStyle.stroke,pluckNumber(bullHoverInStyle["stroke-opacity"],bullStyle["stroke-opacity"])*100));bearHoverInStyle.fill&&(bearHoverInStyle.fill=convertColor(bearHoverInStyle.fill,pluckNumber(bearHoverInStyle["fill-opacity"],bearStyle["fill-opacity"])*100));bearHoverInStyle.stroke&&(bearHoverInStyle.stroke=convertColor(bearHoverInStyle.stroke,pluckNumber(bearHoverInStyle["stroke-opacity"],bearStyle["stroke-opacity"])*100));bullHighlightStyle.fill&&(bullHighlightStyle.fill=convertColor(bullHighlightStyle.fill,pluckNumber(bullHighlightStyle["fill-opacity"],bullStyle["fill-opacity"])*100));bullHighlightStyle.stroke&&(bullHighlightStyle.stroke=convertColor(bullHighlightStyle.stroke,pluckNumber(bullHighlightStyle["stroke-opacity"],bullStyle["stroke-opacity"])*100));bearHoverInStyle.fill&&(bearHoverInStyle.fill=convertColor(bearHoverInStyle.fill,pluckNumber(bearHoverInStyle["fill-opacity"],bearStyle["fill-opacity"])*100));bearHoverInStyle.stroke&&(bearHoverInStyle.stroke=convertColor(bearHoverInStyle.stroke,pluckNumber(bearHoverInStyle["stroke-opacity"],bearStyle["stroke-opacity"])*100));config.plotBorderThickness=bearStyle["stroke-width"]=bullStyle["stroke-width"]=pluckNumber(safeMin([bearStyle["stroke-width"],bullStyle["stroke-width"]],Number.parseFloat));for(styles in Object.assign(Object.assign({},bullHoverInStyle),bullHighlightStyle)){bullHoverOutStyle[styles]=pluck(bullStyle[styles],"")}defined(bullHoverOutStyle["stroke-dasharray"])&&(bullHoverOutStyle["stroke-dasharray"]="");for(styles in Object.assign(Object.assign({},bearHoverInStyle),bearHighlightStyle)){bearHoverOutStyle[styles]=bearStyle[styles]||""}defined(bearHoverOutStyle["stroke-dasharray"])&&(bullHoverOutStyle["stroke-dasharray"]="");config.bullOpacity=bullStyle.opacity;config["bull-fill-opacity"]=bullStyle["fill-opacity"];config["bull-stroke-opacity"]=bullStyle["stroke-opacity"];config.bearOpacity=bearStyle.opacity;config["bear-fill-opacity"]=bearStyle["fill-opacity"];config["bear-stroke-opacity"]=bearStyle["stroke-opacity"];delete bullStyle.opacity;delete bullStyle["fill-opacity"];delete bullStyle["stroke-opacity"];delete bearStyle.opacity;delete bearStyle["fill-opacity"];delete bearStyle["stroke-opacity"]}else{config[prop]=dataObj[prop]}}if(!config.skipLimitCalc){config.limit=dataset._calculateLimits();var chart=dataset.getFromEnv("chart");chart.setYScaleLimit(config.scaleY.getId(),dataset.getId(),config.limit.y,config.limit.baseRequired);chart.setXScaleLimit(config.scaleX.getId(),dataset.getId(),config.limit.x)}}this.parsePrediction(dataObj)};_proto.parsePrediction=function parsePrediction(dataObject){this.config.prediction=dataObject.prediction||this.config.prediction;this.parsePredictiveStyleAttributes()};_proto.parsePredictiveStyleAttributes=function parsePredictiveStyleAttributes(){var predictiveStyleAttributes={},config=this.config;config.predictiveStyleAttributesBear={};config.predictiveStyleAttributesBull={};if(config.prediction.enabled){Object.assign(predictiveStyleAttributes,config.prediction.style.plot);Object.assign(config.predictiveStyleAttributesBear,config.defaultBearPredictiveStyle,config.prediction.style.plot,config.prediction.style.bear);Object.assign(config.predictiveStyleAttributesBull,config.defaultBullPredictiveStyle,config.prediction.style.plot,config.prediction.style.bull)}config.predictiveStyleAttributes=predictiveStyleAttributes||{}};_proto._calculateLimits=function _calculateLimits(){var _this$config=this.config,indices=_this$config.indices,data=_this$config.data,scaleY=_this$config.scaleY,scaleX=_this$config.scaleX,calculateFromContext=_this$config.calculateFromContext,firstData=data[0],lastData=data[data.length-1],showPlotOverTick=scaleX.showPlotOverTick(),isVisible=this.config.visibility==="visible",isLog=scaleY.getType()==="log",chart=this.getFromEnv("chart"),_ref=calculateFromContext?chart.getContextLimit():chart.getFocusLimit(),focusLimitStart=_ref[0],focusLimitEnd=_ref[1],returnObj={},padding,sanitiseFn=function sanitiseFn(num){if(isLog&&num<=0){return null}return num},minFn=function minFn(datum){if(!(datum[0].end<focusLimitStart)&&!(datum[0].start>focusLimitEnd)){return safeMin([datum[indices[1]],datum[indices[2]],datum[indices[3]],datum[indices[4]]],sanitiseFn)}},maxFn=function maxFn(datum){if(!(datum[0].end<focusLimitStart)&&!(datum[0].start>focusLimitEnd)){return safeMax([datum[indices[1]],datum[indices[2]],datum[indices[3]],datum[indices[4]]],sanitiseFn)}};padding=this.getPadding();if(showPlotOverTick){returnObj.x=[firstData&&firstData[indices[0]].start-padding,lastData&&lastData[indices[0]].start+padding]}else{returnObj.x=[firstData&&firstData[indices[0]].start-padding,lastData&&lastData[indices[0]].end-padding]}returnObj.y=isVisible?[safeMin(data,minFn),safeMax(data,maxFn)]:UNDEF;returnObj.baseRequired=false;return returnObj};_proto._createContainer=function _createContainer(){var dataset=this,config=dataset.config,bullStyle=config.bullStyle,bearStyle=config.bearStyle;dataset.addGraphicalElement({el:"group",container:{id:"meso",label:"group",isParent:true},component:dataset,label:"group",id:"meso",attr:{name:"candlestick-dataset-meso"}});dataset.addGraphicalElement({el:"group",container:{id:"meso",label:"group"},component:dataset,label:"group",id:"meso-bull",attr:Object.assign({name:"bullGroup-meso",visibility:config.visibility},bullStyle)});dataset.addGraphicalElement({el:"group",container:{id:"meso",label:"group"},component:dataset,label:"group",id:"meso-bear",attr:Object.assign({name:"bearGroup-meso",visibility:config.visibility},bearStyle)});dataset.addGraphicalElement({el:"group",container:{id:"meso",label:"group"},component:dataset,label:"group",id:"meso-bull-predictive",attr:Object.assign({name:"predictive-bullGroup-meso",visibility:config.visibility},bullStyle,config.predictiveStyleAttributesBull)});dataset.addGraphicalElement({el:"group",container:{id:"meso",label:"group"},component:dataset,label:"group",id:"meso-bear-predictive",attr:Object.assign({name:"predictive-bearGroup-meso",visibility:config.visibility},bearStyle,config.predictiveStyleAttributesBear)})};_proto.getName=function getName(){return"timeseriesCandlestick"};_proto.getHighlightedIndices=function getHighlightedIndices(range){var dataset=this,config=dataset.config,dataInfo=config.dataInfo,hightlightedPoints=[];dataInfo.forEach(function(data,index){if(data.closeValuePx<=range.minValue&&data.closeValuePx>=range.maxValue){hightlightedPoints.push(index)}});return hightlightedPoints};_proto.allocatePosition=function allocatePosition(){var dataset=this,binDecider=dataset.getFromEnv("binDecider"),xScale=dataset.getFromEnv("xScale"),yScale=dataset.getFromEnv("yScale"),config=dataset.config,_config$indices=config.indices,xIdx=_config$indices[0],openIdx=_config$indices[1],highIdx=_config$indices[2],lowIdx=_config$indices[3],closeIdx=_config$indices[4],height,width,date,x,y,midX,yPos,yBase,groupId,open,close,high,low,dataObj,firstTimeStamp,pX,lowStickYEntend,highStickYExtend,dataInfo=config.dataInfo,availableWidth,hoverInfo,openPx,closePx,rangeThreshold=binDecider.getRangeThreshold()[2],_xScale$getDomain=xScale.getDomain(),startDomain=_xScale$getDomain[0],endDomain=_xScale$getDomain[1],paddingInTimestamp,data=config.data;if(config.repositioningDone=dataset._isRepositioningNeeded()){config.timeStampGap=rangeThreshold;availableWidth=xScale.getRangeValue(rangeThreshold)-xScale.getRangeValue(0);width=Math.max(availableWidth*(1-config.plotSpacePercent/100)-config.plotBorderThickness,1);paddingInTimestamp=+xScale.getDomainValue(availableWidth*(config.plotSpacePercent/200))-+xScale.getDomainValue(0);config.actualStartDomain=+startDomain+paddingInTimestamp;config.actualEndDomain=+endDomain-paddingInTimestamp;dataInfo=config.dataInfo=[];data.forEach(function(datum,index){date=datum[xIdx];open=datum[openIdx];close=datum[closeIdx];high=datum[highIdx];low=datum[lowIdx];if(!index){firstTimeStamp=config.firstTimeStamp=date.start}closePx=yScale.getRangeValue(close);openPx=yScale.getRangeValue(open);highStickYExtend=yScale.getRangeValue(high);lowStickYEntend=yScale.getRangeValue(low);if(isValidNumber(openPx)&&isValidNumber(closePx)){if(open>close){yBase=closePx;yPos=openPx;groupId=BEAR}else{yPos=closePx;yBase=openPx;groupId=BULL}height=Math.max(Math.abs(yBase-yPos),1);y=yPos>yBase?yBase:yPos}midX=xScale.getRangeValue(new Date(date.start),new Date(date.end));x=midX-width/2;dataObj={startDate:date.start,endDate:date.end};dataObj.x=x;dataObj.endXPosition=x+width;dataObj.midX=midX;dataObj.colHeight=height||0;dataObj.colY=y||openPx||closePx;dataObj.y=dataObj.highStickYExtend=highStickYExtend;dataObj.closeValuePx=yScale.getRangeValue(close);dataObj.width=width;dataObj.openValue=open;dataObj.closeValue=close;dataObj.highValue=high;dataObj.lowValue=low;dataObj.value=close;dataObj.lowStickYEntend=lowStickYEntend;dataObj.height=lowStickYEntend-highStickYExtend||0;dataObj.groupId=groupId||"bull";dataObj.groupConfig=groupId==="bull"?"bullConfig":"bearConfig";pX=xScale.getBinIndex(date.start,firstTimeStamp);dataInfo[pX]=dataObj})}if(hoverInfo=config.hoverInfo){hoverInfo.forEach(function(hoveredData){hoveredData.hoverIndices.forEach(function(index){if(typeof dataInfo[index]==="object"){dataInfo[index].style=extend2(dataInfo[index].style,hoveredData[dataInfo[index].groupId+"Style"])}})})}};_proto._drawPlot=function _drawPlot(){var dataset=this,config=dataset.config,attr,dataInfo=config.dataInfo,definedBullOpacity=defined(config.bullOpacity),definedBullFillOpacity=defined(config["bull-fill-opacity"]),definedBullStrokeOpacity=defined(config["bull-stroke-opacity"]),predictiveStyleAttributesBull=config.predictiveStyleAttributesBull,definedPredictiveBullOpacity=defined(predictiveStyleAttributesBull.opacity),definedPredictiveBullFillOpacity=defined(predictiveStyleAttributesBull["fill-opacity"]),definedPredictiveBullStrokeOpacity=defined(predictiveStyleAttributesBull["stroke-opacity"]),definedBearOpacity=defined(config.bearOpacity),definedBearFillOpacity=defined(config["bear-fill-opacity"]),definedBearStrokeOpacity=defined(config["bear-stroke-opacity"]),predictiveStyleAttributesBear=config.predictiveStyleAttributesBear,definedPredictiveBearOpacity=defined(predictiveStyleAttributesBear.opacity),definedPredictiveBearFillOpacity=defined(predictiveStyleAttributesBear["fill-opacity"]),definedPredictiveBearStrokeOpacity=defined(predictiveStyleAttributesBear["stroke-opacity"]),attrBaseBull={},attrBaseBear={},attrBase,derivedGroupId=BLANKSTRING,isDatumPredictive=false,mergePredictiveStylesInDatumGraphics=function mergePredictiveStylesInDatumGraphics(attrBear,attrBull){definedPredictiveBearOpacity&&(attrBear.opacity=predictiveStyleAttributesBear.opacity);definedPredictiveBearFillOpacity&&(attrBear.opacity=predictiveStyleAttributesBear["fill-opacity"]);definedPredictiveBearStrokeOpacity&&(attrBear.opacity=predictiveStyleAttributesBear["stroke-opacity"]);definedPredictiveBullOpacity&&(attrBull.opacity=predictiveStyleAttributesBull.opacity);definedPredictiveBullFillOpacity&&(attrBull.opacity=predictiveStyleAttributesBull["fill-opacity"]);definedPredictiveBullStrokeOpacity&&(attrBull.opacity=predictiveStyleAttributesBull["stroke-opacity"])};definedBullOpacity&&(attrBaseBull.opacity=config.bullOpacity);definedBullFillOpacity&&(attrBaseBull.opacity=config["bull-fill-opacity"]);definedBullStrokeOpacity&&(attrBaseBull.opacity=config["bull-stroke-opacity"]);definedBearOpacity&&(attrBaseBear.opacity=config.bearOpacity);definedBearFillOpacity&&(attrBaseBear.opacity=config["bear-fill-opacity"]);definedBearStrokeOpacity&&(attrBaseBear.opacity=config["bear-stroke-opacity"]);dataInfo.forEach(function(datum,index){if(datum.groupConfig){attrBase=datum.groupId==="bull"?attrBaseBull:attrBaseBear;isDatumPredictive=dataset.isPlotPredictive(datum);derivedGroupId=isDatumPredictive?datum.groupId+"-predictive":datum.groupId;if(datum.colHeight>0){attr=Object.assign({x:datum.x,y:datum.colY,height:datum.colHeight,width:datum.width},attrBase);datum.style&&Object.assign(attr,datum.style);if(isDatumPredictive){mergePredictiveStylesInDatumGraphics(attrBaseBear,attrBaseBull)}dataset.addGraphicalElement({el:"rect",component:dataset,props:{index:index,dataLength:dataInfo.length},container:{label:"group",id:"meso-"+derivedGroupId},label:"rect",attr:attr},true)}else if(datum.openValue||datum.closeValue){attr=Object.assign({path:"M"+datum.x+","+datum.colY+",H"+(datum.x+datum.width)},attrBase);datum.style&&Object.assign(attr,datum.style);if(isDatumPredictive){mergePredictiveStylesInDatumGraphics(attrBaseBear,attrBaseBull)}dataset.addGraphicalElement({el:"path",component:dataset,props:{index:index,dataLength:dataInfo.length},container:{label:"group",id:"meso-"+derivedGroupId},label:"line",attr:attr},true)}if(datum.highStickYExtend){attr=Object.assign({path:"M"+datum.midX+","+datum.highStickYExtend+",V"+(datum.colY||datum.highStickYExtend+datum.height),"stroke-linecap":"round"},attrBase);datum.style&&Object.assign(attr,datum.style);dataset.addGraphicalElement({el:"path",component:dataset,props:{index:index,dataLength:dataInfo.length},container:{label:"group",id:"meso-"+datum.groupId},label:"high",attr:attr},true)}if(datum.lowStickYEntend){attr=Object.assign({path:"M"+datum.midX+","+datum.lowStickYEntend+",V"+(datum.colY+datum.colHeight||datum.lowStickYEntend-datum.height),"stroke-linecap":"round"},attrBase);datum.style&&Object.assign(attr,datum.style);dataset.addGraphicalElement({el:"path",component:dataset,props:{index:index,dataLength:dataInfo.length},container:{label:"group",id:"meso-"+datum.groupId},label:"low",attr:attr},true)}}});config.hoverInfo=[]};_proto._getTooltext=function _getTooltext(pointFound,datasetHovered,dataIndex){var dataset=this,config=dataset.config,dataInfo=config.dataInfo,currData=dataInfo[dataIndex],isDataDefined,opacity=pointFound?datasetHovered?1:.5:1,line1;if(dataset._isInvalidTooltext(currData)){return""}isDataDefined=defined(currData.groupConfig);line1="<div style='margin-bottom: 5px; opacity:"+opacity+"'>\n      <div>"+config.series+"</div>\n      </div>";if(isDataDefined){return(config.series?line1:"")+["open","high","low","close"].reduce(function(accumulator,currentValue){var value=currData[currentValue+"TooltipValue"]||(currData[currentValue+"TooltipValue"]=currData[currentValue+"Value"]&&config.formatterFn({value:currData[currentValue+"Value"],type:"tooltip",prefix:config.prefix,suffix:config.suffix}));return accumulator+(value!==UNDEF?"<div style = 'overflow: hidden;margin-top:4px;'>\n        <div style = 'float: left;'>"+currentValue+"</div>\n        <div style = 'float: right;'>"+value+"</div>\n       </div>":"")},"")}return line1};return CandleStick}(Column);export default CandleStick;