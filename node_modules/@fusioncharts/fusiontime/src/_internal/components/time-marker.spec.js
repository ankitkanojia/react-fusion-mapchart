import TimeMarker from"./time-span-min-marker";import SmartLabel from"../../../../fc-core/src/_internal/vendors/fusioncharts-smartlabel/src/SmartlabelManager";describe("FTTM_TS_1: To verify that time marker is placed at correct postion",function(){var UNIT=[0,1];var TM=new TimeMarker,graphicalElements={},getStyleDef=function getStyleDef(styleDef){return styleDef},xScale={getRange:function getRange(v){return v*1.5},copy:function copy(){return this},setRange:function setRange(inputArr){if(inputArr===void 0){inputArr=UNIT}this.range=inputArr.slice()},getRangeValue:function getRangeValue(v){return Number(v)},getDomain:function getDomain(){return[new Date("Sat Feb 01 2014 05:30:00 GMT+0530"),new Date("Sun Feb 02 2014 20:30:00 GMT+0530")]}};TM.addGraphicalElement=function(obj){graphicalElements[obj.id]=obj};TM.getGraphicalElement=function(id){return graphicalElements[id]};TM.getLinkedParent=function(){return{config:{canvasHeight:250,canvasLeft:0,canvasTop:0,canvasWidth:500}}};TM.addToEnv("getStyleDef",getStyleDef);TM.addToEnv("xScale",xScale);TM.addToEnv("smartLabel",new SmartLabel(document.body||document.getElementsByTagName("body")[0]));it("FTTM_TC_1: To verify that time marker is drawn at correct position wrt to axis for given value.",function(){var count=0;TM.__setDefaultConfig();TM.configureAttributes({timeMarker:[{label:"Time Marker",start:"Feb 03 2014 09",timeformat:"%b %d %Y %H",style:{label:{color:"#ff0000"},marker:{fill:"#0000ff"}}}]});TM.draw();for(var id in graphicalElements){if(graphicalElements[id].label==="line"){count++}}expect(count).toBe(0)});it("FTTM_TC_2: To verify that time marker is drawn at correct position wrt to axis for given value.",function(){TM.__setDefaultConfig();TM.configureAttributes({timeMarker:[{label:"Time Marker",start:"Feb 01 2014 09",timeformat:"%b %d %Y %H",style:{label:{color:"#ff0000"},marker:{fill:"#0000ff"}}}]});TM.draw();for(var id in graphicalElements){if(graphicalElements[id].label==="line"){expect(graphicalElements[id].attr.path.join()).toBe("M,1391225400000,0,V,250,h,0,V,-250,Z")}}});it("FTTM_TC_3: Time marker shoud not overflow canvas height.",function(){TM.__setDefaultConfig();TM.configureAttributes({timeMarker:[{label:"Time Marker",start:"Feb 01 2014 09",timeformat:"%b %d %Y %H",style:{label:{color:"#ff0000"},marker:{fill:"#0000ff"}}}]});TM.draw();for(var id in graphicalElements){if(graphicalElements[id].label==="line"){expect(graphicalElements[id].attr.path[4]).toBe(250)}}})});describe("FTTM_TS_2: To verify the position of time markers labels",function(){var UNIT=[0,1];var TM=new TimeMarker,graphicalElements={},getStyleDef=function getStyleDef(styleDef){return styleDef},xScale={getRange:function getRange(v){return v*1.5},copy:function copy(){return this},setRange:function setRange(inputArr){if(inputArr===void 0){inputArr=UNIT}this.range=inputArr.slice()},getRangeValue:function getRangeValue(v){return Number(v)},getDomain:function getDomain(){return[new Date("Sat Feb 01 2014 05:30:00 GMT+0530"),new Date("Sun Feb 02 2014 20:30:00 GMT+0530")]}};TM.addGraphicalElement=function(obj){graphicalElements[obj.id]=obj};TM.getGraphicalElement=function(id){return graphicalElements[id]};TM.getLinkedParent=function(){return{config:{canvasHeight:250,canvasLeft:0,canvasTop:0,canvasWidth:500}}};TM.addToEnv("getStyleDef",getStyleDef);TM.addToEnv("xScale",xScale);TM.addToEnv("smartLabel",new SmartLabel(document.body||document.getElementsByTagName("body")[0]));it("FTTM_TC_5: Labels should not be drawn if its not given or empty",function(){var labelCount=0;TM.__setDefaultConfig();TM.configureAttributes({timeMarker:[{label:"",start:"Feb 01 2014 09",timeformat:"%b %d %Y %H",style:{label:{color:"#ff0000"},marker:{fill:"#0000ff"}}}]});TM.draw();for(var id in graphicalElements){if(graphicalElements[id].label==="label"){labelCount++}}expect(labelCount).toBe(1)});it("FTTM_TC_4: Labels should be drawn at proper position wrt to marker.",function(){TM.__setDefaultConfig();TM.configureAttributes({timeMarker:[{label:"Time Marker",start:"Feb 01 2014 09",timeformat:"%b %d %Y %H",style:{label:{color:"#ff0000"},marker:{fill:"#0000ff"}}}]});TM.draw();for(var id in graphicalElements){if(graphicalElements[id].label==="label"){var Diff=Math.abs(graphicalElements[id].attr.x-+new Date("09:00 Feb 01 2014"));expect(Diff).toBeLessThan(2)}}})});describe("FTTM_TS_3: To verify repeat property of time markers",function(){var UNIT=[0,1];var TM=new TimeMarker,graphicalElements={},getStyleDef=function getStyleDef(styleDef){return styleDef},xScale={getRange:function getRange(v){return v*1.5},copy:function copy(){return this},setRange:function setRange(inputArr){if(inputArr===void 0){inputArr=UNIT}this.range=inputArr.slice()},getRangeValue:function getRangeValue(v){return Number(v)},getDomain:function getDomain(){return[new Date("Sat Feb 01 2014 05:30:00 GMT+0530"),new Date("Sun Feb 02 2014 20:30:00 GMT+0530")]}};TM.addGraphicalElement=function(obj){graphicalElements[obj.id]=obj};TM.getGraphicalElement=function(id){return graphicalElements[id]};TM.getLinkedParent=function(){return{config:{canvasHeight:250,canvasLeft:0,canvasTop:0,canvasWidth:500}}};TM.addToEnv("getStyleDef",getStyleDef);TM.addToEnv("xScale",xScale);TM.addToEnv("smartLabel",new SmartLabel(document.body||document.getElementsByTagName("body")[0]));it("FTTM_TC_7: Time marker should be repeatedely drawn according to given value",function(){TM.__setDefaultConfig();TM.configureAttributes({timeMarker:[{label:"Time Marker",start:"Feb 01 2014 09",timeformat:"%b %d %Y %H",style:{label:{color:"#ffffff"},marker:{fill:"#0000ff"}},repeat:{unit:"Hour",multiplier:"5"}}]});TM.draw();for(var id in graphicalElements){if(graphicalElements[id].label==="line"){expect(graphicalElements[id].attr.path.join()).toBe("M,1391225400000,0,V,250,h,0,V,-250,Z,M,1391243400000,0,V,250,h,0,V,-250,Z,M,1391261400000,0,V,250,h,0,V,-250,Z,M,1391279400000,0,V,250,h,0,V,-250,Z,M,1391297400000,0,V,250,h,0,V,-250,Z,M,1391315400000,0,V,250,h,0,V,-250,Z,M,1391333400000,0,V,250,h,0,V,-250,Z,M,1391351400000,0,V,250,h,0,V,-250,Z")}}});it("FTTM_TC_8: One Time marker value should be drawn when mulitiplier value is set to 0.",function(){var count=0;TM.__setDefaultConfig();TM.configureAttributes({timeMarker:[{label:"Time Marker",start:"Feb 01 2014 09",timeformat:"%b %d %Y %H",style:{label:{color:"#ffffff"},marker:{fill:"#0000ff"}},repeat:{unit:"Hour",multiplier:"0"}}]});TM.draw();for(var id in graphicalElements){if(graphicalElements[id].label==="line"){count++}}expect(count).toBe(1)})});describe("FTTM_TS_4: To verify the cosmetics of time marker lines/spans",function(){var UNIT=[0,1];var TM=new TimeMarker,graphicalElements={},getStyleDef=function getStyleDef(styleDef){return styleDef},xScale={getRange:function getRange(v){return v*1.5},copy:function copy(){return this},setRange:function setRange(inputArr){if(inputArr===void 0){inputArr=UNIT}this.range=inputArr.slice()},getRangeValue:function getRangeValue(v){return Number(v)},getDomain:function getDomain(){return[new Date("Sat Feb 01 2014 05:30:00 GMT+0530"),new Date("Sun Feb 02 2014 20:30:00 GMT+0530")]}};TM.addGraphicalElement=function(obj){graphicalElements[obj.id]=obj};TM.getGraphicalElement=function(id){return graphicalElements[id]};TM.getLinkedParent=function(){return{config:{canvasHeight:250,canvasLeft:0,canvasTop:0,canvasWidth:500}}};TM.addToEnv("getStyleDef",getStyleDef);TM.addToEnv("xScale",xScale);TM.addToEnv("smartLabel",new SmartLabel(document.body||document.getElementsByTagName("body")[0]));it("FTTM_TC_9: Cosmetics should be applied as per given value.",function(){TM.__setDefaultConfig();TM.configureAttributes({timeMarker:[{label:"Time Marker",start:"Feb 01 2014 09",timeformat:"%b %d %Y %H",style:{label:{color:"#ffffff"},marker:{fill:"#0000ff","stroke-width":3,opacity:"0.5"}}}]});TM.draw();for(var id in graphicalElements){if(graphicalElements[id].label==="line"){expect(graphicalElements[id].attr.fill).toBe("#0000ff");expect(graphicalElements[id].attr["stroke-width"]).toBe(3);expect(graphicalElements[id].attr.opacity).toBe("0.5")}}});it("FTTM_TC_10: Cosmetics should be applied as per default value if its not given or for garbage value",function(){TM.__setDefaultConfig();TM.configureAttributes({timeMarker:[{label:"Time Marker",start:"Feb 01 2014 09",timeformat:"%b %d %Y %H"}]});TM.draw();for(var id in graphicalElements){if(graphicalElements[id].label==="line"){expect(graphicalElements[id].attr.fill).toBe("#5f5f5f");expect(graphicalElements[id].attr["stroke-width"]).toBe("1");expect(graphicalElements[id].attr.opacity).toBe(1)}}})});describe("FTTM_TS_5: To verify cosmetics of time marker labels.",function(){var UNIT=[0,1];var TM=new TimeMarker,graphicalElements={},getStyleDef=function getStyleDef(styleDef){return styleDef},xScale={getRange:function getRange(v){return v*1.5},copy:function copy(){return this},setRange:function setRange(inputArr){if(inputArr===void 0){inputArr=UNIT}this.range=inputArr.slice()},getRangeValue:function getRangeValue(v){return Number(v)},getDomain:function getDomain(){return[new Date("Sat Feb 01 2014 05:30:00 GMT+0530"),new Date("Sun Feb 02 2014 20:30:00 GMT+0530")]}};TM.addGraphicalElement=function(obj){graphicalElements[obj.id]=obj};TM.getGraphicalElement=function(id){return graphicalElements[id]};TM.getLinkedParent=function(){return{config:{canvasHeight:250,canvasLeft:0,canvasTop:0,canvasWidth:500}}};TM.addToEnv("getStyleDef",getStyleDef);TM.addToEnv("xScale",xScale);TM.addToEnv("smartLabel",new SmartLabel(document.body||document.getElementsByTagName("body")[0]));it("FTTM_TC_11: Cosmetics should be applied as per given value.",function(){TM.__setDefaultConfig();TM.configureAttributes({timeMarker:[{label:"Time Marker",start:"Feb 01 2014 09",timeformat:"%b %d %Y %H",style:{label:{color:"#0000ff","font-size":"15"}}}]});TM.draw();for(var id in graphicalElements){if(graphicalElements[id].label==="label"){expect(graphicalElements[id].attr.fill).toBe("#0000ff");expect(graphicalElements[id].attr["font-size"]).toBe("15")}}});it("FTTM_TC_12: Cosmetics should be applied as per default value if its not given or for garbage value.",function(){TM.__setDefaultConfig();TM.configureAttributes({timeMarker:[{label:"Time Marker",start:"Feb 01 2014 09",timeformat:"%b %d %Y %H",_style:{label:{color:"","font-size":""}}}]});TM.draw();for(var id in graphicalElements){if(graphicalElements[id].label==="label"){expect(graphicalElements[id].attr.fill).toBe("#ffffff");expect(graphicalElements[id].attr["font-size"]).toBe(undefined)}}})});