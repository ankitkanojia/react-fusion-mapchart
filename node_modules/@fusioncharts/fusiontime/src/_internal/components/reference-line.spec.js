import ReferenceLine from"./reference-line";import Canvas from"./canvas";var PATH_STRING="M,0,800000,H,500";describe("FTRL_TS_1: To verify that reference line is placed at correct position",function(){var UNIT=[0,1];var refLine,canvas,graphicalElements={},getStyleDef=function getStyleDef(styleDef){return styleDef},yScale={getRange:function getRange(v){return v*1.2},copy:function copy(){return this},setRange:function setRange(inputArr){if(inputArr===void 0){inputArr=UNIT}this.range=inputArr.slice()},getRangeValue:function getRangeValue(v){return Number(v)},getDomain:function getDomain(){return[0,1202794]}},configObj={referenceLine:[{label:"Reference Line One",value:8e5,style:{marker:{color:"#00FF00"},label:{verticalalign:"top"}}}],direction:"right"};beforeEach(function(){canvas=new Canvas;canvas.config={borderConfig:{leftBorder:0,topBorder:0,rightBorder:0,bottomBorder:0},canvasBGColor:"rgba(255,255,255,1)",canvasBGHeight:90,canvasBGLeft:0,canvasBGTop:12,canvasBGWidth:500,canvasBorderColor:"rgba(214,214,214,1)",canvasHeight:80,canvasLeft:0,canvasTop:12,canvasWidth:500};refLine=canvas.attachChild(ReferenceLine,"referenceLine");graphicalElements={};refLine.addGraphicalElement=function(obj){graphicalElements[obj.label]=obj};refLine.getGraphicalElement=function(label){return graphicalElements[label]};refLine.addToEnv("getStyleDef",getStyleDef);refLine.addToEnv("yScale",yScale)});afterEach(function(){refLine=undefined;graphicalElements={}});it("FTRL_TC_1: To verify that reference line is at correct position wrt to axis for given value.",function(){refLine.__setDefaultConfig();refLine.configureAttributes(configObj);refLine.draw();var path=graphicalElements[Object.keys(graphicalElements)[0]].attr.path.join(),pathString=PATH_STRING;expect(path).toBe(pathString)});it("FTRL_TC_2: To verify that reference line is at correct position wrt to axis for given value for out of domain value",function(){refLine.__setDefaultConfig();refLine.configureAttributes({referenceLine:[{label:"Reference Line One",value:-8e5,style:{marker:{color:"#00FF00"},label:{verticalalign:"top"}}}],direction:"right"});refLine.draw();var path=Object.keys(graphicalElements)[0]?graphicalElements[Object.keys(graphicalElements)[0]].attr.path.join():"";expect(path).toBe("")})});describe("FTRL_TS_2: To verify the position of label of reference line.",function(){var UNIT=[0,1];var refLine,canvas,yScale={getRange:function getRange(v){return v*1.5},copy:function copy(){return this},setRange:function setRange(inputArr){if(inputArr===void 0){inputArr=UNIT}this.range=inputArr.slice()},getRangeValue:function getRangeValue(v){return Number(v)},getDomain:function getDomain(){return[new Date("Sat Feb 01 2014 05:30:00 GMT+0530"),new Date("Sun Feb 02 2014 20:30:00 GMT+0530")]}},graphicalElements={},getStyleDef=function getStyleDef(styleDef){return styleDef},configObj={referenceLine:[{label:"Reference Line One",value:8e5,style:{marker:{color:"#00FF00"},label:{verticalalign:"top"}}}],direction:"right"};beforeEach(function(){canvas=new Canvas;canvas.config={borderConfig:{leftBorder:0,topBorder:0,rightBorder:0,bottomBorder:0},canvasBGColor:"rgba(255,255,255,1)",canvasBGHeight:90,canvasBGLeft:0,canvasBGTop:12,canvasBGWidth:500,canvasBorderColor:"rgba(214,214,214,1)",canvasHeight:80,canvasLeft:0,canvasTop:12,canvasWidth:500};refLine=canvas.attachChild(ReferenceLine,"referenceLine");graphicalElements={};refLine.addGraphicalElement=function(obj){graphicalElements[obj.label]=obj};refLine.getGraphicalElement=function(label){return graphicalElements[label]};refLine.addToEnv("getStyleDef",getStyleDef);refLine.addToEnv("yScale",yScale)});afterEach(function(){refLine=undefined;graphicalElements={}});it("FTRL_TC_3: Label should be drawn according to the direction of reference lines",function(){refLine.__setDefaultConfig();refLine.configureAttributes(configObj);refLine.draw();for(var key in graphicalElements){if(key==="label"){var x=graphicalElements[key].attr.x,y=graphicalElements[key].attr.y;expect(x).toBe(500);expect(y).toBe(8e5)}}});it("FTRL_TC_4: Label should not be drawn if its not given or empty",function(){refLine.__setDefaultConfig();refLine.configureAttributes({referenceLine:[{label:"",value:8e5,style:{marker:{color:"#00FF00"},label:{verticalalign:"top"}}}],direction:"right"});refLine.draw();var count=0;for(var key in graphicalElements){if(key==="label"){count++}}expect(count).toBe(0)})});describe("FTRL_TS_3: To verify the cosmetics of reference line and label",function(){var UNIT=[0,1];var refLine,canvas,yScale={getRange:function getRange(v){return v*1.5},copy:function copy(){return this},setRange:function setRange(inputArr){if(inputArr===void 0){inputArr=UNIT}this.range=inputArr.slice()},getRangeValue:function getRangeValue(v){return Number(v)},getDomain:function getDomain(){return[new Date("Sat Feb 01 2014 05:30:00 GMT+0530"),new Date("Sun Feb 02 2014 20:30:00 GMT+0530")]}},graphicalElements={},getStyleDef=function getStyleDef(styleDef){return styleDef},configObj={referenceLine:[{label:"Reference Line One",value:8e5,style:{marker:{color:"#00ff00"},label:{verticalalign:"top",fontcolor:"#0000ff"}}}],direction:"right"};beforeEach(function(){canvas=new Canvas;canvas.config={borderConfig:{leftBorder:0,topBorder:0,rightBorder:0,bottomBorder:0},canvasBGColor:"rgba(255,255,255,1)",canvasBGHeight:90,canvasBGLeft:0,canvasBGTop:12,canvasBGWidth:500,canvasBorderColor:"rgba(214,214,214,1)",canvasHeight:80,canvasLeft:0,canvasTop:12,canvasWidth:500};refLine=canvas.attachChild(ReferenceLine,"referenceLine");graphicalElements={};refLine.addGraphicalElement=function(obj){graphicalElements[obj.label]=obj};refLine.getGraphicalElement=function(label){return graphicalElements[label]};refLine.addToEnv("getStyleDef",getStyleDef);refLine.addToEnv("yScale",yScale)});afterEach(function(){refLine=undefined;graphicalElements={}});it("FTRL_TC_6: color of reference line and text background should be set according to style. ",function(){refLine.__setDefaultConfig();refLine.configureAttributes(configObj);refLine.draw();for(var key in graphicalElements){if(key==="label"){var textColor=graphicalElements[key].attr.fill;expect(textColor).toBe("#0000ff")}if(key==="line"){var lineColor=graphicalElements[key].attr.stroke;expect(lineColor).toBe("#00ff00")}}});it("FTRL_TC_7: color of reference line and text background should be set according to style. ",function(){refLine.__setDefaultConfig();refLine.configureAttributes({referenceLine:[{label:"Reference Line One",value:8e5,style:{marker:{color:""},label:{verticalalign:"top",fontcolor:""}}}],direction:"right"});refLine.draw();for(var key in graphicalElements){if(key==="label"){var textColor=graphicalElements[key].attr.fill;expect(textColor).toBe("")}if(key==="line"){var lineColor=graphicalElements[key].attr.stroke;expect(lineColor).toBe("")}}})});describe("FTRL_TS_4: To verify the font property of labels",function(){var UNIT=[0,1];var refLine,canvas,yScale={getRange:function getRange(v){return v*1.5},copy:function copy(){return this},setRange:function setRange(inputArr){if(inputArr===void 0){inputArr=UNIT}this.range=inputArr.slice()},getRangeValue:function getRangeValue(v){return Number(v)},getDomain:function getDomain(){return[new Date("Sat Feb 01 2014 05:30:00 GMT+0530"),new Date("Sun Feb 02 2014 20:30:00 GMT+0530")]}},graphicalElements={},getStyleDef=function getStyleDef(styleDef){return styleDef},configObj={referenceLine:[{label:"Reference Line One",value:8e5,style:{marker:{color:"#00ff00"},label:{verticalalign:"top",fontcolor:"#0000ff",fontsize:20}}}],direction:"right"};beforeEach(function(){canvas=new Canvas;canvas.config={borderConfig:{leftBorder:0,topBorder:0,rightBorder:0,bottomBorder:0},canvasBGColor:"rgba(255,255,255,1)",canvasBGHeight:90,canvasBGLeft:0,canvasBGTop:12,canvasBGWidth:500,canvasBorderColor:"rgba(214,214,214,1)",canvasHeight:80,canvasLeft:0,canvasTop:12,canvasWidth:500};refLine=canvas.attachChild(ReferenceLine,"referenceLine");graphicalElements={};refLine.addGraphicalElement=function(obj){graphicalElements[obj.label]=obj};refLine.getGraphicalElement=function(label){return graphicalElements[label]};refLine.addToEnv("getStyleDef",getStyleDef);refLine.addToEnv("yScale",yScale)});afterEach(function(){refLine=undefined;graphicalElements={}});it("FTRL_TC_8: Font styles should be set according to provided style",function(){refLine.__setDefaultConfig();refLine.configureAttributes(configObj);canvas.addToEnv("textStyle",{fontfamily:"sans-serif",fontsize:10,fontcolor:"#000000"});refLine.draw();for(var key in graphicalElements){if(key==="label"){var fontSize=graphicalElements[key].attr["font-size"],fontFamily=graphicalElements[key].attr["font-family"];expect(fontSize).toBe(20);expect(fontFamily).toBe("sans-serif")}}});it("FTRL_TC_9: Font styles should be set to a default value if style is undefined or invalid",function(){refLine.__setDefaultConfig();refLine.configureAttributes({referenceLine:[{label:"Reference Line One",value:8e5,style:{marker:{color:"#00ff00"},label:{verticalalign:"top",fontcolor:"#0000ff"}}}],direction:"right"});canvas.addToEnv("textStyle",{fontfamily:"sans-serif",fontsize:10,fontcolor:"#000000"});refLine.draw();for(var key in graphicalElements){if(key==="label"){var fontSize=graphicalElements[key].attr["font-size"],fontFamily=graphicalElements[key].attr["font-family"];expect(fontSize).toBe(10);expect(fontFamily).toBe("sans-serif")}}})});