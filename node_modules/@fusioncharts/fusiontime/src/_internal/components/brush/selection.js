import _inheritsLoose from"@babel/runtime/helpers/inheritsLoose";import{SmartRenderer}from"@fusioncharts/core/src/component-interface";import{getTouchEvent,toRaphaelColor}from"@fusioncharts/core/src/lib";var COLOR_FDFDFD="#fdfdfd",COLOR_F7FFFE="#f7fffe",COLOR_E3E3E3="#e3e3e3",M="M",v="v",h="h",NONE="none",STROKE_ATTR_LIST=["stroke","stroke-width","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-color"];var Selection=function(_SmartRenderer){_inheritsLoose(Selection,_SmartRenderer);function Selection(){var _this;_this=_SmartRenderer.call(this)||this;_this._dimensions={};return _this}var _proto=Selection.prototype;_proto.__setDefaultConfig=function __setDefaultConfig(){_SmartRenderer.prototype.__setDefaultConfig.call(this);this.config.defaultStyle={fill:toRaphaelColor({FCcolor:{color:COLOR_FDFDFD+","+COLOR_F7FFFE,ratio:"0,100",angle:90,alpha:"50,50"}}),stroke:COLOR_E3E3E3,"stroke-width":1,opacity:1,"fill-opacity":.5,cursor:"move"}};_proto.configureAttributes=function configureAttributes(obj){if(obj===void 0){obj={}}_SmartRenderer.prototype.configureAttributes.call(this,obj);var selection=this,selectionConfig=selection.config,defaultStyle=selectionConfig.defaultStyle;selectionConfig.style=Object.assign({},defaultStyle,obj.style.mask);selectionConfig.orientation=obj.orientation};_proto.setDimension=function setDimension(dim){this._dimensions=dim};_proto.getDimension=function getDimension(){return this._dimensions};_proto.attachHandlers=function attachHandlers(){var selection=this,animationManager=selection.getFromEnv("animationManager"),brush=selection.getLinkedParent(),timeNav=brush.getFromEnv("timeNavigator"),brushDim,startX,offsetX,startPx,endPx;selection.addEventListener("fc-dragstart",selection.dragstartHandler||(selection.dragstartHandler=function(e){startX=getTouchEvent(e).clientX;brushDim=brush.getCurrentBrushDimensions()}));selection.addEventListener("fc-dragmove",selection.dragmoveHandler||(selection.dragmoveHandler=function(e){animationManager.setAnimationState("timenavScroll");offsetX=getTouchEvent(e).clientX-startX;startPx=brushDim.x+offsetX;endPx=brushDim.x+offsetX+brushDim.width;timeNav.validateDomain([startPx,endPx])}))};_proto.draw=function draw(){var selection=this,selfConfig=selection.config,selectionStyle=Object.assign({},selfConfig.style),selectionBorderStyle=Object.assign({},selfConfig.style),i,len=STROKE_ATTR_LIST.length,selectionDimensions=selection.getDimension();for(i=0;i<len;i++){delete selectionStyle[STROKE_ATTR_LIST[i]]}selection.addGraphicalElement({el:"rect",attr:{x:selectionDimensions.x,y:selectionDimensions.y,width:Math.max(selectionDimensions.width,0),height:Math.max(selectionDimensions.height,0),opacity:selectionStyle.opacity},css:selectionStyle,id:"selectionBox",label:"selectionBox",component:selection,container:{id:"brushGroup",label:"brushGroup",isParent:true}});selectionBorderStyle.fill=NONE;selection.addGraphicalElement({el:"path",attr:{path:[M,selectionDimensions.x,selectionDimensions.y,v,selectionDimensions.height,h,selectionDimensions.width,v,-selectionDimensions.height],opacity:selectionBorderStyle.opacity},id:"selectionBoxBorder",label:"selectionBoxBorder",css:selectionBorderStyle,component:selection,container:{id:"brushGroup",label:"brushGroup",isParent:true}})};return Selection}(SmartRenderer);export default Selection;