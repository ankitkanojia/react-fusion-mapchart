import _inheritsLoose from"@babel/runtime/helpers/inheritsLoose";import{SmartRenderer}from"@fusioncharts/core/src/component-interface";import Handle from"./handle";import Label from"./label";import Selection from"./selection";var Brush=function(_SmartRenderer){_inheritsLoose(Brush,_SmartRenderer);function Brush(){var _this;_this=_SmartRenderer.call(this)||this;_this._maxDimensions={};_this._currDimensions={};return _this}var _proto=Brush.prototype;_proto.__setDefaultConfig=function __setDefaultConfig(obj){if(obj===void 0){obj={}}_SmartRenderer.prototype.__setDefaultConfig.call(this,obj);var config=this.config;config.handleWidth=12;config.handleHeight=20};_proto.configureAttributes=function configureAttributes(obj){if(obj===void 0){obj={}}_SmartRenderer.prototype.configureAttributes.call(this,obj);var brush=this,brushConfig=brush.config;brushConfig.values=obj.values;brushConfig.style=obj.style;brush.createChildComponents()};_proto.setChildDimension=function setChildDimension(){var brush=this,selfConfig=brush.config,selection=brush.getChildren("selection")[0],leftHandle=brush.getChildren("leftHandle")[0],rightHandle=brush.getChildren("rightHandle")[0],leftLabel=brush.getChildren("leftLabel")[0],rightLabel=brush.getChildren("rightLabel")[0],scale=brush.getFromEnv("timeNavigatorConfig").contextScale,values=brush.getFromEnv("timeNavigatorConfig").values||[],startPx=scale.getRangeValue(values[0]),endPx=scale.getRangeValue(values[1]);selection.setDimension({x:startPx,y:brush._maxDimensions.y,width:endPx-startPx,height:brush._maxDimensions.height});leftHandle.setDimension({x:startPx-selfConfig.handleWidth,y:brush._maxDimensions.y+brush._maxDimensions.height/2-selfConfig.handleHeight/2,width:selfConfig.handleWidth,height:selfConfig.handleHeight});rightHandle.setDimension({x:endPx,y:brush._maxDimensions.y+brush._maxDimensions.height/2-selfConfig.handleHeight/2,width:selfConfig.handleWidth,height:selfConfig.handleHeight});leftLabel.setDimension({x:startPx,y:brush._maxDimensions.y});rightLabel.setDimension({x:endPx,y:brush._maxDimensions.y});brush.setCurrentBrushDimensions({x:startPx,y:brush._maxDimensions.y,width:endPx-startPx,height:brush._maxDimensions.height-brush._maxDimensions.y})};_proto.getLabelSpace=function getLabelSpace(){var brush=this,leftLabel=brush.getChildren("leftLabel")[0],rightLabel=brush.getChildren("rightLabel")[0];return Math.max(leftLabel.getLabelDimension().height,rightLabel.getLabelDimension().height)};_proto.draw=function draw(){var brush=this;brush.addGraphicalElement({el:"group",attr:{name:"brush-group"},id:"brushGroup",label:"brushGroup",component:brush,container:{id:"exo",label:"group",isParent:true}})};_proto.hideAllLabels=function hideAllLabels(){var brush=this,leftLabel=brush.getChildren("leftLabel")[0],rightLabel=brush.getChildren("rightLabel")[0];if(!brush.config.pointerReleasedOnParent){leftLabel.config.showLabel=rightLabel.config.showLabel=false;leftLabel.asyncDraw();rightLabel.asyncDraw()}};_proto.createChildComponents=function createChildComponents(){var brush=this,brushConfig=brush.config,getStyleDef=brush.getFromEnv("getStyleDef"),leftHandle,rightHandle,leftLabel,rightLabel,selection;selection=brush.attachChild(Selection,"selection");selection.attachHandlers();selection.configure({orientation:"horizontal",style:{mask:getStyleDef(brushConfig.style.mask)}});leftHandle=brush.attachChild(Handle,"leftHandle");leftHandle.attachHandlers();leftHandle.configure({orientation:"horizontal",type:"leftHandle",style:{handle:getStyleDef(brushConfig.style.handle),"handle-grip":getStyleDef(brushConfig.style["handle-grip"])}});rightHandle=brush.attachChild(Handle,"rightHandle");rightHandle.attachHandlers();rightHandle.configure({orientation:"horizontal",type:"rightHandle",style:{handle:getStyleDef(brushConfig.style.handle),"handle-grip":getStyleDef(brushConfig.style["handle-grip"])}});leftLabel=brush.attachChild(Label,"leftLabel");leftLabel.attachHandlers();leftLabel.configure({orientation:"horizontal",type:"leftLabel",value:brushConfig.values[0],style:{label:getStyleDef(brushConfig.style.label),labelBg:getStyleDef(brushConfig.style["label-background"])}});rightLabel=brush.attachChild(Label,"rightLabel");rightLabel.attachHandlers();rightLabel.configure({orientation:"horizontal",type:"rightLabel",value:brushConfig.values[1],style:{label:getStyleDef(brushConfig.style.label),labelBg:getStyleDef(brushConfig.style["label-background"])}})};_proto.setMaxBrushDimensions=function setMaxBrushDimensions(dim){this._maxDimensions=dim;this.setChildDimension()};_proto.getMaxBrushDimensions=function getMaxBrushDimensions(){return this._maxDimensions};_proto.setCurrentBrushDimensions=function setCurrentBrushDimensions(dim){this._currDimensions=dim};_proto.getCurrentBrushDimensions=function getCurrentBrushDimensions(){return this._currDimensions};return Brush}(SmartRenderer);export default Brush;