import FusionCharts from"../../../../fusioncharts/core";import RedRaphael from"../../../../fc-core/src/_internal/redraphael/redraphael";import{ToolBar}from"../../../../fc-core/src/toolbox";import SmartLabel from"../../../../fc-core/src/_internal/vendors/fusioncharts-smartlabel/src/SmartlabelManager";FusionCharts.addDep(RedRaphael);import SRS from"./standard-range-selector";function domainValidator(currentDomain,totalDomain,prevDomain){if(prevDomain===void 0){prevDomain=[]}var chart2=this,mode,currentDomainStartValue=currentDomain[0],currentDomainEndValue=currentDomain[1],totalDomainStartValue=totalDomain[0],totalDomainEndValue=totalDomain[1],currentDomainStartValuems=+currentDomain[0],currentDomainEndValuems=+currentDomain[1],totalDomainStartValuems=+totalDomain[0],totalDomainEndValuems=+totalDomain[1];if(prevDomain.length){mode=Math.abs(currentDomainEndValuems-currentDomainStartValuems-(+prevDomain[1]-+prevDomain[0]))>1?"squeeze":"drag"}if(currentDomainStartValuems<totalDomainStartValuems){currentDomainStartValue=totalDomainStartValue;currentDomainEndValue=mode==="drag"?new Date(currentDomainEndValuems+(totalDomainStartValuems-currentDomainStartValuems)):currentDomainEndValue}if(currentDomainEndValuems>totalDomainEndValuems){currentDomainEndValue=totalDomainEndValue;currentDomainStartValue=mode==="drag"?new Date(currentDomainStartValuems-(currentDomainEndValuems-totalDomainEndValuems)):currentDomainStartValue}if(currentDomainEndValuems<totalDomainStartValuems){currentDomainEndValue=totalDomainStartValue}if(currentDomainStartValuems>totalDomainEndValuems){currentDomainStartValue=totalDomainEndValue}if(currentDomainStartValuems>currentDomainEndValuems){var _ref=[currentDomainEndValue,currentDomainStartValue];currentDomainStartValue=_ref[0];currentDomainEndValue=_ref[1]}chart2.zoomTo([currentDomainStartValue,currentDomainEndValue])}xdescribe("FTSRS_TS_2: To verify the dimension of SRS",function(){var srs,toolBar,smartLabel,buttonStore=[],chart={id:"chart_1",getId:function getId(){return this.id}};beforeEach(function(){srs=new SRS;srs.addToEnv("chart",chart);toolBar=new ToolBar;srs.addToEnv("selectorToolbar",toolBar);smartLabel=new SmartLabel(document.body||document.getElementsByTagName("body")[0]);SmartLabel.prototype.getSmartText=function(text){return text};srs.addToEnv("smartLabel",smartLabel)});afterEach(function(){srs=undefined;toolBar=undefined;smartLabel=undefined;buttonStore=[]});it("FTSRS_TC_2:  To verify the size of button and component as a whole.",function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:[new Date(+new Date-5*2592e6),new Date],totalDomain:[new Date(+new Date-31536e6),new Date]});buttonStore=toolBar.getChildren().tool.elemStore;for(var i=0;i<buttonStore.length;i++){if(buttonStore[i].config.text){expect(buttonStore[i].config.height).toBe(15);expect(buttonStore[i].config.marginBottom).toBe(2.5);expect(buttonStore[i].config.marginLeft).toBe(7);expect(buttonStore[i].config.marginRight).toBe(7);expect(buttonStore[i].config.marginTop).toBe(2.5)}}})});xdescribe("FTSRS_TS_3: To verify the All button option of SRS",function(){var srs,toolBar,smartLabel,buttonStore=[],chart={id:"chart_1",getId:function getId(){return this.id}};beforeEach(function(){srs=new SRS;srs.addToEnv("chart",chart);toolBar=new ToolBar;srs.addToEnv("selectorToolbar",toolBar);smartLabel=new SmartLabel(document.body||document.getElementsByTagName("body")[0]);SmartLabel.prototype.getSmartText=function(text){return text};srs.addToEnv("smartLabel",smartLabel)});afterEach(function(){srs=undefined;toolBar=undefined;smartLabel=undefined;buttonStore=[]});it("FTSRS_TC_3:  All button should always be drawn for any data",function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:[new Date(+new Date-5*2592e6),new Date],totalDomain:[new Date(+new Date-31536e6),new Date]});buttonStore=toolBar.getChildren().tool.elemStore;expect(buttonStore[buttonStore.length-1].config.text).toBe("All")})});xdescribe("FTSRS_TS_4: To verify the End buttons of SRS",function(){var srs,toolBar,smartLabel,buttonStore=[],chart={id:"chart_1",getId:function getId(){return this.id}};beforeEach(function(){srs=new SRS;srs.addToEnv("chart",chart);toolBar=new ToolBar;srs.addToEnv("selectorToolbar",toolBar);smartLabel=new SmartLabel(document.body||document.getElementsByTagName("body")[0]);SmartLabel.prototype.getSmartText=function(text){return text};srs.addToEnv("smartLabel",smartLabel)});afterEach(function(){srs=undefined;toolBar=undefined;smartLabel=undefined;buttonStore=[]});it("FTSRS_TC_5:  For one year or greater data the available end buttons should be YTD, QTD, MTD, WTD",function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:[new Date(+new Date-5*2592e6),new Date],totalDomain:[new Date(+new Date-61536e6),new Date]});buttonStore=toolBar.getChildren().tool.elemStore;expect(buttonStore[0].config.text).toBe("YTD");expect(buttonStore[1].config.text).toBe("QTD");expect(buttonStore[2].config.text).toBe("MTD");expect(buttonStore[3].config.text).toBe("WTD")});it("FTSRS_TC_6:  For data of range beetween 1 year & 3 months the available end buttons should be QTD, MTD, WTD",function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:[new Date(+new Date-1*2592e6),new Date],totalDomain:[new Date(+new Date-4*2592e6),new Date]});buttonStore=toolBar.getChildren().tool.elemStore;expect(buttonStore[0].config.text).toBe("QTD");expect(buttonStore[1].config.text).toBe("MTD");expect(buttonStore[2].config.text).toBe("WTD")});it("FTSRS_TC_7:  For data of range beetween 3 months & 1 month the available end buttons should be MTD, WTD",function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:[new Date(+new Date-1*2592e6),new Date],totalDomain:[new Date(+new Date-2*2592e6),new Date]});buttonStore=toolBar.getChildren().tool.elemStore;expect(buttonStore[0].config.text).toBe("MTD");expect(buttonStore[1].config.text).toBe("WTD")});it("FTSRS_TC_8:  For data of range beetween 1 months & 1 Week the available end buttons should be WTD",function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:[new Date(+new Date-2552e6),new Date],totalDomain:[new Date(+new Date-2552e6),new Date]});buttonStore=toolBar.getChildren().tool.elemStore;expect(buttonStore[0].config.text).toBe("WTD")});it("FTSRS_TC_9:  For data of range below 1 Week the available end buttons should not be drawn",function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:[new Date(+new Date-2e6),new Date],totalDomain:[new Date(+new Date-2e6),new Date]});buttonStore=toolBar.getChildren().tool.elemStore;for(var i=0;i<buttonStore.length;i++){expect(buttonStore[i].config.text).not.toBe("YTD");expect(buttonStore[i].config.text).not.toBe("QTD");expect(buttonStore[i].config.text).not.toBe("MTD");expect(buttonStore[i].config.text).not.toBe("WTD")}})});xdescribe("FTSRS_TS_5: To verify the dynamic buttons",function(){var srs,toolBar,smartLabel,buttonStore=[],chart={id:"chart_1",getId:function getId(){return this.id}};beforeEach(function(){srs=new SRS;srs.addToEnv("chart",chart);toolBar=new ToolBar;srs.addToEnv("selectorToolbar",toolBar);smartLabel=new SmartLabel(document.body||document.getElementsByTagName("body")[0]);SmartLabel.prototype.getSmartText=function(text){return text};srs.addToEnv("smartLabel",smartLabel)});afterEach(function(){srs=undefined;toolBar=undefined;smartLabel=undefined;buttonStore=[]});it("FTSRS_TC_10:  For active window greater than 6 months the buttons will be 1Y,6M",function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:[new Date(+new Date-7*2592e6),new Date],totalDomain:[new Date(+new Date-12*2592e6),new Date]});buttonStore=toolBar.getChildren().tool.elemStore;expect(buttonStore[4].config.text).toBe("1Y");expect(buttonStore[5].config.text).toBe("6M")});it("FTSRS_TC_11:  For active window of 6 months & 3 months the buttons will be 1Y,6M,3M",function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:[new Date(+new Date-5*2592e6),new Date],totalDomain:[new Date(+new Date-12*2592e6),new Date]});buttonStore=toolBar.getChildren().tool.elemStore;expect(buttonStore[4].config.text).toBe("1Y");expect(buttonStore[5].config.text).toBe("6M");expect(buttonStore[6].config.text).toBe("3M")});it("FTSRS_TC_12: For active window 3 months & 1 months the buttons will be 6M,3M,1M",function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:[new Date(+new Date-2*2592e6),new Date],totalDomain:[new Date(+new Date-12*2592e6),new Date]});buttonStore=toolBar.getChildren().tool.elemStore;expect(buttonStore[4].config.text).toBe("6M");expect(buttonStore[5].config.text).toBe("3M");expect(buttonStore[6].config.text).toBe("1M")});it("FTSRS_TC_13: For active window 1 months & 15 days the buttons will be 3M,1M,15D",function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:[new Date(+new Date-16*864e5),new Date],totalDomain:[new Date(+new Date-12*2592e6),new Date]});buttonStore=toolBar.getChildren().tool.elemStore;expect(buttonStore[4].config.text).toBe("3M");expect(buttonStore[5].config.text).toBe("1M");expect(buttonStore[6].config.text).toBe("15D")});it("FTSRS_TC_14: For active window 15 days & 7 days the buttons will be 1M,15D,7D",function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:[new Date(+new Date-8*864e5),new Date],totalDomain:[new Date(+new Date-12*2592e6),new Date]});buttonStore=toolBar.getChildren().tool.elemStore;expect(buttonStore[4].config.text).toBe("1M");expect(buttonStore[5].config.text).toBe("15D");expect(buttonStore[6].config.text).toBe("7D")});it("FTSRS_TC_15: For active window 7 days & 1 day the buttons will be 15D,7D,1D",function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:[new Date(+new Date-5*864e5),new Date],totalDomain:[new Date(+new Date-12*2592e6),new Date]});buttonStore=toolBar.getChildren().tool.elemStore;expect(buttonStore[4].config.text).toBe("15D");expect(buttonStore[5].config.text).toBe("7D");expect(buttonStore[6].config.text).toBe("1D")});it("FTSRS_TC_16: For active window less than of 1 hour the buttons will be 3H, 1H",function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:[new Date(+new Date-26e5),new Date],totalDomain:[new Date(+new Date-12*2592e6),new Date]});buttonStore=toolBar.getChildren().tool.elemStore;expect(buttonStore[4].config.text).toBe("3H");expect(buttonStore[5].config.text).toBe("1H")});it("FTSRS_TC_17: For blank active window no buttons should be drawn",function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:[],totalDomain:[new Date(+new Date-13*2592e6),new Date]});buttonStore=toolBar.getChildren().tool.elemStore;expect(buttonStore.length).toBe(6)})});xdescribe("FTSRS_TS_8: To verify effect on timeNav window when interaction done with standard range selector buttons",function(){var srs,toolBar,smartLabel,buttonStore=[],domainStore,chart={id:"chart_1",config:{},getName:function getName(){return"chart"},getId:function getId(){return this.id},domainValidator:domainValidator,zoomTo:function zoomTo(domain){domainStore=domain;srs.configure({currentDomain:domain})},getFromEnv:function getFromEnv(param){return[this.config[param]]},addToEnv:function addToEnv(name,value){this.config[name]=value}};beforeEach(function(){srs=new SRS;srs.addToEnv("chart",chart);toolBar=new ToolBar;srs.addToEnv("selectorToolbar",toolBar);toolBar.addToEnv("chart",chart);smartLabel=new SmartLabel(document.body||document.getElementsByTagName("body")[0]);SmartLabel.prototype.getSmartText=function(text){return text};srs.addToEnv("smartLabel",smartLabel);chart.addToEnv("focusScalesX",{config:{domain:[new Date("Sat Feb 01 2014 05:30:00 GMT+0530"),new Date("Sat Feb 02 2014 20:30:00 GMT+0530")]},getDomain:function getDomain(){return this.config.domain}});chart.addToEnv("contextScalesX",{config:{domain:[new Date("Sat Feb 01 2014 05:30:00 GMT+0530"),new Date("Sat Feb 02 2014 20:30:00 GMT+0530")]},getDomain:function getDomain(){return this.config.domain}})});afterEach(function(){srs=undefined;toolBar=undefined;smartLabel=undefined;buttonStore=[]});it("FTSRS_TC_23:  On clicking All button active window should be from 5:30AM Feb1 to 8:30PM FEB2",function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:chart.getFromEnv("focusScalesX")[0].getDomain(),totalDomain:chart.getFromEnv("contextScalesX")[0].getDomain()});buttonStore=toolBar.getChildren().tool.elemStore;srs._handler.call(buttonStore[4]);expect(domainStore[0].toString()).toBe(new Date("Sat Feb 01 2014 05:30:00 GMT+0530").toString());expect(domainStore[1].toString()).toBe(new Date("Sun Feb 02 2014 20:30:00 GMT+0530").toString())});it("FTSRS_TC_24:  On clicking 1D button active window should be from 8:30PM Feb1 to 8:30PM FEB2",function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:chart.getFromEnv("focusScalesX")[0].getDomain(),totalDomain:chart.getFromEnv("contextScalesX")[0].getDomain()});buttonStore=toolBar.getChildren().tool.elemStore;srs._handler.call(buttonStore[2]);expect(domainStore[0].toString()).toBe(new Date("Sat Feb 01 2014 20:30:00 GMT+0530").toString());expect(domainStore[1].toString()).toBe(new Date("Sun Feb 02 2014 20:30:00 GMT+0530").toString())});it("FTSRS_TC_25:  On clicking 12H button active window should be from 8:30AM Feb2 to 8:30PM FEB2",function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:chart.getFromEnv("focusScalesX")[0].getDomain(),totalDomain:chart.getFromEnv("contextScalesX")[0].getDomain()});buttonStore=toolBar.getChildren().tool.elemStore;srs._handler.call(buttonStore[2]);buttonStore=toolBar.getChildren().tool.elemStore;srs._handler.call(buttonStore[2]);expect(domainStore[0].toString()).toBe(new Date("Sun Feb 02 2014 08:30:00 GMT+0530").toString());expect(domainStore[1].toString()).toBe(new Date("Sun Feb 02 2014 20:30:00 GMT+0530").toString())});it("FTSRS_TC_26:  On clicking 6H button active window should be from 2:30PM Feb2 to 8:30PM FEB2",function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:chart.getFromEnv("focusScalesX")[0].getDomain(),totalDomain:chart.getFromEnv("contextScalesX")[0].getDomain()});buttonStore=toolBar.getChildren().tool.elemStore;srs._handler.call(buttonStore[2]);buttonStore=toolBar.getChildren().tool.elemStore;srs._handler.call(buttonStore[2]);buttonStore=toolBar.getChildren().tool.elemStore;srs._handler.call(buttonStore[2]);expect(domainStore[0].toString()).toBe(new Date("Sun Feb 02 2014 14:30:00 GMT+0530").toString());expect(domainStore[1].toString()).toBe(new Date("Sun Feb 02 2014 20:30:00 GMT+0530").toString())})});xdescribe("FTSRS_TS_9: To verify interval buttons of SRS when interaction done with SRS buttons",function(){var srs,toolBar,smartLabel,buttonStore=[],chart={id:"chart_1",config:{},getName:function getName(){return"chart"},getId:function getId(){return this.id},domainValidator:domainValidator,zoomTo:function zoomTo(domain){srs.configure({currentDomain:domain})},getFromEnv:function getFromEnv(param){return[this.config[param]]},addToEnv:function addToEnv(name,value){this.config[name]=value}};beforeEach(function(){srs=new SRS;srs.addToEnv("chart",chart);toolBar=new ToolBar;srs.addToEnv("selectorToolbar",toolBar);toolBar.addToEnv("chart",chart);smartLabel=new SmartLabel(document.body||document.getElementsByTagName("body")[0]);SmartLabel.prototype.getSmartText=function(text){return text};srs.addToEnv("smartLabel",smartLabel);chart.addToEnv("focusScalesX",{config:{domain:[new Date("Sat Feb 01 2014 05:30:00 GMT+0530"),new Date("Sat Feb 02 2014 20:30:00 GMT+0530")]},getDomain:function getDomain(){return this.config.domain}});chart.addToEnv("contextScalesX",{config:{domain:[new Date("Sat Feb 01 2014 05:30:00 GMT+0530"),new Date("Sat Feb 02 2014 20:30:00 GMT+0530")]},getDomain:function getDomain(){return this.config.domain}})});afterEach(function(){srs=undefined;toolBar=undefined;smartLabel=undefined;buttonStore=[]});it("FTSRS_TC_27:  On clicking All button the available buttons should be [15D, 7D, 1D | All]",function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:chart.getFromEnv("focusScalesX")[0].getDomain(),totalDomain:chart.getFromEnv("contextScalesX")[0].getDomain()});buttonStore=toolBar.getChildren().tool.elemStore;expect(buttonStore[4].config.state).toBe("pressed");expect(buttonStore[0].config.text).toBe("15D");expect(buttonStore[1].config.text).toBe("7D");expect(buttonStore[2].config.text).toBe("1D")});it("FTSRS_TC_28:  On clicking 1D button the available buttons should be [7D, 1D, 12H | All]",function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:chart.getFromEnv("focusScalesX")[0].getDomain(),totalDomain:chart.getFromEnv("contextScalesX")[0].getDomain()});buttonStore=toolBar.getChildren().tool.elemStore;srs._handler.call(buttonStore[2]);buttonStore=toolBar.getChildren().tool.elemStore;expect(buttonStore[0].config.text).toBe("7D");expect(buttonStore[1].config.text).toBe("1D");expect(buttonStore[2].config.text).toBe("12H")});it("FTSRS_TC_29:  On clicking 12H button the available buttons should be [1D, 12H, 6H | All]",function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:chart.getFromEnv("focusScalesX")[0].getDomain(),totalDomain:chart.getFromEnv("contextScalesX")[0].getDomain()});buttonStore=toolBar.getChildren().tool.elemStore;srs._handler.call(buttonStore[2]);buttonStore=toolBar.getChildren().tool.elemStore;srs._handler.call(buttonStore[2]);buttonStore=toolBar.getChildren().tool.elemStore;expect(buttonStore[0].config.text).toBe("1D");expect(buttonStore[1].config.text).toBe("12H");expect(buttonStore[2].config.text).toBe("6H")});it("FTSRS_TC_30:  On clicking 6H button the available buttons should be [12H, 6H, 3H | All]",function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:chart.getFromEnv("focusScalesX")[0].getDomain(),totalDomain:chart.getFromEnv("contextScalesX")[0].getDomain()});buttonStore=toolBar.getChildren().tool.elemStore;srs._handler.call(buttonStore[2]);buttonStore=toolBar.getChildren().tool.elemStore;srs._handler.call(buttonStore[2]);buttonStore=toolBar.getChildren().tool.elemStore;srs._handler.call(buttonStore[2]);buttonStore=toolBar.getChildren().tool.elemStore;expect(buttonStore[0].config.text).toBe("12H");expect(buttonStore[1].config.text).toBe("6H");expect(buttonStore[2].config.text).toBe("3H")})});xdescribe("FTSRS_TS_10: To verify interval buttons on change of timeNav domains",function(){var srs,toolBar,smartLabel,buttonStore=[],chart={id:"chart_1",config:{},getName:function getName(){return"chart"},getId:function getId(){return this.id},domainValidator:domainValidator,zoomTo:function zoomTo(domain){srs.configure({currentDomain:domain})},getFromEnv:function getFromEnv(param){return[this.config[param]]},addToEnv:function addToEnv(name,value){this.config[name]=value}};beforeEach(function(){srs=new SRS;srs.addToEnv("chart",chart);toolBar=new ToolBar;srs.addToEnv("selectorToolbar",toolBar);toolBar.addToEnv("chart",chart);smartLabel=new SmartLabel(document.body||document.getElementsByTagName("body")[0]);SmartLabel.prototype.getSmartText=function(text){return text};srs.addToEnv("smartLabel",smartLabel);chart.addToEnv("focusScalesX",{config:{domain:[new Date("Sat Feb 01 2014 05:30:00 GMT+0530"),new Date("Sat Feb 02 2014 20:30:00 GMT+0530")]},getDomain:function getDomain(){return this.config.domain}});chart.addToEnv("contextScalesX",{config:{domain:[new Date("Sat Feb 01 2014 05:30:00 GMT+0530"),new Date("Sat Feb 02 2014 20:30:00 GMT+0530")]},getDomain:function getDomain(){return this.config.domain}})});afterEach(function(){srs=undefined;toolBar=undefined;smartLabel=undefined;buttonStore=[]});it("FTSRS_TC_31:  On time navigator range of  5:30AM FEB1 2014 to 8:30PM FEB2 2014, available buttons should be [15D, 7D, 1D | All]",function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:chart.getFromEnv("focusScalesX")[0].getDomain(),totalDomain:chart.getFromEnv("contextScalesX")[0].getDomain()});buttonStore=toolBar.getChildren().tool.elemStore;expect(buttonStore[0].config.text).toBe("15D");expect(buttonStore[1].config.text).toBe("7D");expect(buttonStore[2].config.text).toBe("1D")});it("FTSRS_TC_32:  On time navigator range of  8:30PM FEB1 2014 to 8:30PM FEB2 2014, available buttons should be [[7D, 1D, 12H | All]",function(){srs.__setDefaultConfig();chart.addToEnv("focusScalesX",{config:{domain:[new Date("Sat Feb 01 2014 20:30:00 GMT+0530"),new Date("Sat Feb 02 2014 20:30:00 GMT+0530")]},getDomain:function getDomain(){return this.config.domain}});srs.configureAttributes({currentDomain:chart.getFromEnv("focusScalesX")[0].getDomain(),totalDomain:chart.getFromEnv("contextScalesX")[0].getDomain()});buttonStore=toolBar.getChildren().tool.elemStore;expect(buttonStore[0].config.text).toBe("7D");expect(buttonStore[1].config.text).toBe("1D");expect(buttonStore[2].config.text).toBe("12H")});it("FTSRS_TC_33:  On time navigator range of  8:30PM FEB1 2014 to 8:30PM FEB2 2014, available buttons should be [[7D, 1D, 12H | All]",function(){srs.__setDefaultConfig();chart.addToEnv("focusScalesX",{config:{domain:[new Date("Sun Feb 02 2014 20:30:00 GMT+0530"),new Date("Sat Feb 02 2014 20:30:00 GMT+0530")]},getDomain:function getDomain(){return this.config.domain}});srs.configureAttributes({currentDomain:chart.getFromEnv("focusScalesX")[0].getDomain(),totalDomain:chart.getFromEnv("contextScalesX")[0].getDomain()});buttonStore=toolBar.getChildren().tool.elemStore;expect(buttonStore[0].config.text).toBe("All")});it("FTSRS_TC_33b:  On time navigator range of  8:30PM FEB1 2014 to 8:30PM FEB2 2014, available buttons should be [[YTD, QTD, MTD, WTD | All]",function(){srs.__setDefaultConfig();chart.addToEnv("focusScalesX",{config:{domain:[new Date("Sun Feb 02 2014 20:30:00 GMT+0530"),new Date("Sat Feb 02 2014 20:30:00 GMT+0530")]},getDomain:function getDomain(){return this.config.domain}});chart.addToEnv("contextScalesX",{config:{domain:[new Date("Sun Jan 01 2013 20:30:00 GMT+0530"),new Date("Sat Feb 02 2014 20:30:00 GMT+0530")]},getDomain:function getDomain(){return this.config.domain}});srs.configureAttributes({currentDomain:chart.getFromEnv("focusScalesX")[0].getDomain(),totalDomain:chart.getFromEnv("contextScalesX")[0].getDomain()});buttonStore=toolBar.getChildren().tool.elemStore;expect(buttonStore[5].config.text).toBe("All")})});xdescribe("FTSRS_TS_11: To verify effect on timeNav window when interaction done with tillDate  buttons",function(){var srs,toolBar,smartLabel,domainStore,buttonStore=[],chart={id:"chart_1",config:{},getName:function getName(){return"chart"},getId:function getId(){return this.id},domainValidator:domainValidator,zoomTo:function zoomTo(domain){domainStore=domain;srs.configure({currentDomain:domain})},getFromEnv:function getFromEnv(param){return[this.config[param]]},addToEnv:function addToEnv(name,value){this.config[name]=value}};beforeEach(function(){srs=new SRS;srs.addToEnv("chart",chart);toolBar=new ToolBar;srs.addToEnv("selectorToolbar",toolBar);toolBar.addToEnv("chart",chart);smartLabel=new SmartLabel(document.body||document.getElementsByTagName("body")[0]);SmartLabel.prototype.getSmartText=function(text){return text};srs.addToEnv("smartLabel",smartLabel);chart.addToEnv("focusScalesX",{config:{domain:[new Date("Sat Feb 01 2014 05:30:00 GMT+0530"),new Date("Sat Feb 02 2014 20:30:00 GMT+0530")]},getDomain:function getDomain(){return this.config.domain}});chart.addToEnv("contextScalesX",{config:{domain:[new Date("Sat Feb 01 2014 05:30:00 GMT+0530"),new Date("Sat Feb 02 2014 20:30:00 GMT+0530")]},getDomain:function getDomain(){return this.config.domain}})});afterEach(function(){srs=undefined;toolBar=undefined;smartLabel=undefined;buttonStore=[]});it("FTSRS_TC_34:  To check time navigator range when YTD is clicked.",function(){srs.__setDefaultConfig();chart.addToEnv("focusScalesX",{config:{domain:[new Date("Sat Feb 01 2014 5:30:00 GMT+0530"),new Date("Sun Feb 02 2014 20:30:00 GMT+0530")]},getDomain:function getDomain(){return this.config.domain}});chart.addToEnv("contextScalesX",{config:{domain:[new Date("Jan 01 2013 20:30:00 GMT+0530"),new Date("Sun Feb 02 2014 20:30:00 GMT+0530")]},getDomain:function getDomain(){return this.config.domain}});srs.configureAttributes({currentDomain:chart.getFromEnv("focusScalesX")[0].getDomain(),totalDomain:chart.getFromEnv("contextScalesX")[0].getDomain()});buttonStore=toolBar.getChildren().tool.elemStore;srs._handler.call(buttonStore[0]);expect(domainStore[0].toString()).toBe("Wed Jan 01 2014 00:00:00 GMT+0530 (India Standard Time)");expect(domainStore[1].toString()).toBe("Sun Feb 02 2014 20:30:00 GMT+0530 (India Standard Time)")});it("FTSRS_TC_35:  To check time navigator range when QTD is clicked.",function(){srs.__setDefaultConfig();chart.addToEnv("focusScalesX",{config:{domain:[new Date("Sat Feb 01 2014 5:30:00 GMT+0530"),new Date("Sun Feb 02 2014 20:30:00 GMT+0530")]},getDomain:function getDomain(){return this.config.domain}});chart.addToEnv("contextScalesX",{config:{domain:[new Date("Jan 01 2013 20:30:00 GMT+0530"),new Date("Sun Feb 02 2014 20:30:00 GMT+0530")]},getDomain:function getDomain(){return this.config.domain}});srs.configureAttributes({currentDomain:chart.getFromEnv("focusScalesX")[0].getDomain(),totalDomain:chart.getFromEnv("contextScalesX")[0].getDomain()});buttonStore=toolBar.getChildren().tool.elemStore;srs._handler.call(buttonStore[1]);expect(domainStore[0].toString()).toBe("Wed Jan 01 2014 00:00:00 GMT+0530 (India Standard Time)");expect(domainStore[1].toString()).toBe("Sun Feb 02 2014 20:30:00 GMT+0530 (India Standard Time)")});it("FTSRS_TC_36:  To check time navigator range when MTD is clicked.",function(){srs.__setDefaultConfig();chart.addToEnv("focusScalesX",{config:{domain:[new Date("Sat Feb 01 2014 5:30:00 GMT+0530"),new Date("Sun Feb 02 2014 20:30:00 GMT+0530")]},getDomain:function getDomain(){return this.config.domain}});chart.addToEnv("contextScalesX",{config:{domain:[new Date("Jan 01 2013 20:30:00 GMT+0530"),new Date("Sun Feb 02 2014 20:30:00 GMT+0530")]},getDomain:function getDomain(){return this.config.domain}});srs.configureAttributes({currentDomain:chart.getFromEnv("focusScalesX")[0].getDomain(),totalDomain:chart.getFromEnv("contextScalesX")[0].getDomain()});buttonStore=toolBar.getChildren().tool.elemStore;srs._handler.call(buttonStore[2]);expect(domainStore[0].toString()).toBe("Sat Feb 01 2014 00:00:00 GMT+0530 (India Standard Time)");expect(domainStore[1].toString()).toBe("Sun Feb 02 2014 20:30:00 GMT+0530 (India Standard Time)")});it("FTSRS_TC_37:  To check time navigator range when WTD is clicked.",function(){srs.__setDefaultConfig();chart.addToEnv("focusScalesX",{config:{domain:[new Date("Sat Feb 01 2014 5:30:00 GMT+0530"),new Date("Sun Feb 02 2014 20:30:00 GMT+0530")]},getDomain:function getDomain(){return this.config.domain}});chart.addToEnv("contextScalesX",{config:{domain:[new Date("Jan 01 2013 20:30:00 GMT+0530"),new Date("Sun Feb 02 2014 20:30:00 GMT+0530")]},getDomain:function getDomain(){return this.config.domain}});srs.configureAttributes({currentDomain:chart.getFromEnv("focusScalesX")[0].getDomain(),totalDomain:chart.getFromEnv("contextScalesX")[0].getDomain()});buttonStore=toolBar.getChildren().tool.elemStore;srs._handler.call(buttonStore[2]);expect(domainStore[0].toString()).toBe("Sat Feb 01 2014 00:00:00 GMT+0530 (India Standard Time)");expect(domainStore[1].toString()).toBe("Sun Feb 02 2014 20:30:00 GMT+0530 (India Standard Time)")})});