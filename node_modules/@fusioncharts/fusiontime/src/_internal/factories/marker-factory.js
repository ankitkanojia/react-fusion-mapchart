import FlagMarker from"./../components/data-marker/flag-marker";import stringHasContent from"@fusioncharts/utils/src/type/string-has-content";import arrayHasContent from"@fusioncharts/utils/src/type/array-has-content";import equals from"ramda/es/equals";import isObject from"@fusioncharts/utils/src/type/is-object";export default function(dataset){var dataSource=dataset.getFromEnv("dataSource"),seriesname=dataset.config.series,dataMarker,_dataset$config=dataset.config,measures=_dataset$config.measures,_dataset$config$serie=_dataset$config.seriesInfo,seriesInfo=_dataset$config$serie===void 0?{}:_dataset$config$serie,enableMarkers=_dataset$config.enableMarkers,visibility=_dataset$config.visibility,dataMarkerInstance,flag=[];if(enableMarkers&&(dataMarker=dataSource.datamarker)){dataMarker.forEach(function(data){var value=data.value,series=data.series,isConditionsMet=true;if(value){if(stringHasContent(value)){value=[value]}if(arrayHasContent(value)&&stringHasContent(value[0])){isConditionsMet=equals(value,measures)}}if(isObject(series)){var keys=Object.keys(series),i=keys.length,key;while(isConditionsMet&&i--){key=keys[i];if(stringHasContent(series[key])){if(series[key]!==seriesInfo[key])isConditionsMet=false}}}if(isConditionsMet){flag.push(data);data.seriesname=seriesname}});if(flag.length!==0){dataMarkerInstance=dataset.attachChild(FlagMarker,"flagMarker");dataMarkerInstance.configure({data:flag,visibility:visibility})}}}