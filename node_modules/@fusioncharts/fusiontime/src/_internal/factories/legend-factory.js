import Legend from"@fusioncharts/charts/src/_internal/components/legend/discrete";import{componentFactory,pluck,convertColor,pluckNumber}from"@fusioncharts/core/src/lib";var COLOR_5F5F5F="#5f5f5f",INHERIT="inherit";export default function(chart){var legend,showLegend=chart.config.showLegend,legendTextStyle=chart.config.mergedLegendStyle,legendFontColor=legendTextStyle.color=pluck(legendTextStyle.fill,COLOR_5F5F5F),legendTextOpacity=pluckNumber(legendTextStyle.opacity,1),legendTextFillOpacity=pluckNumber(legendTextStyle["fill-opacity"],1),styleObj=Object.assign({},chart.getFromEnv("baseTextStyle"),legendTextStyle);styleObj["font-size"]=+(styleObj["font-size"]+"").replace(/px/,"");if(showLegend){componentFactory(chart,Legend,"legend",1,[{drawcustomlegendicon:1,legendiconsides:4,alignlegendwithcanvas:1,legendborderthickness:0,legendiconscale:1.3,legendbgalpha:0,legendFontColor:legendFontColor,style:{text:styleObj}}]);legend=chart.getChildren("legend")[0];chart.addToEnv("legend",legend);legend.setStateCosmetics("hover",function(cosmetics,legenditem){if(!legenditem.hasState("hidden")){if(!cosmetics.text){cosmetics.text={}}cosmetics.text.fill=convertColor(legendFontColor,legendTextOpacity*legendTextFillOpacity*100);cosmetics.text.cursor=INHERIT}return cosmetics});var createLegend=function createLegend(info){if(info===void 0){info={}}for(var key in info){if(info.hasOwnProperty(key)){var itemInfo=info[key];if(itemInfo.hasOwnProperty("visibility")){chart._addLegend(itemInfo)}else{createLegend(itemInfo)}}}};createLegend(chart.getFromEnv("legendMap"))}else if(legend=chart.getChildren("legend")&&chart.getChildren("legend")[0]){legend.remove()}}