import FusionCharts from"../../../../fusioncharts/core/index";import TimeSeries from"./index";import DataStore from"../../../../fc-datatable";import{setup,CONTAINER_ID}from"../../../../../dev-tests/viz/utitilies";FusionCharts.addDep(TimeSeries);var data=[["2016-10-30 09:00:00","2018-10-30 09:00:00",1,"A",2,13],["2016-10-30 09:30:00","2018-10-30 09:30:00",20,"A",3,49],["2016-10-30 10:00:00","2018-10-30 10:00:00",3,"B",4,25],["2016-10-30 10:30:00","2018-10-30 10:30:00",14,"B",5,60],["2016-10-30 11:00:00","2018-10-30 11:00:00",50,"C",6,17],["2016-10-30 11:30:00","2018-10-30 11:30:00",26,"C",7,80]],schema=[{name:"Time",type:"date",format:"%Y-%m-%d %H:%M:%S"},{name:"Time-2",type:"date",format:"%Y-%m-%d %H:%M:%S"},{name:"Measure1",type:"number"},{name:"Item",type:"string"},{name:"Measure2",type:"number"},{name:"Measure3",type:"number"}];var fusionDataStore=new DataStore,fusionTable=fusionDataStore.createDataTable(data,schema);describe("Representation of predictive data",function(){var PREDICTIVE_LINE_COLOR="#00ff00",chartData={type:"timeseries",renderAt:CONTAINER_ID,width:600,height:400,dataSource:{chart:{},data:fusionTable}};var chart=setup(FusionCharts,chartData);afterEach(function(){return chart.dispose()});it("No predictive path will be drawn when prediction extension is not added",function(done){var renderComplete=function renderComplete(){var linePaths=document.querySelectorAll("[class$=-line-plot-meso]")[0].children;expect(linePaths.length).toBe(1);done()};chart.addEventListener("renderComplete",renderComplete);chart.render()});it("Shows predictive style for plots on or after the given predicted date",function(done){var renderComplete=function renderComplete(){var linePaths=document.querySelectorAll("[class$=-line-plot-meso]")[0].children;expect(linePaths.length).toBe(2);expect(linePaths.item(0).attributes.stroke.value).not.toBe(PREDICTIVE_LINE_COLOR);expect(linePaths.item(1).attributes.stroke.value).toBe(PREDICTIVE_LINE_COLOR);done()};chartData.dataSource["extensions"]={prediction:{date:"2016-10-30 09:30:00",style:{line:{stroke:PREDICTIVE_LINE_COLOR}}}};chart=setup(FusionCharts,chartData);chart.addEventListener("renderComplete",renderComplete);chart.render()})});