import validateBinsize from"./validate-binsize";import{DatetimeUnits}from"../../../../../fc-utils/src/datetime-enums";import{timeMillisecond,timeSecond,timeMinute,timeHour,timeDay,timeWeek,timeMonth,timeYear}from"../../../../../fc-utils/src/time-intervals";import standardBins from"../../../../../fc-utils/src/bin-decider/standard-bins";import{_calculateIndexOfIntervals}from"../../../../../fc-utils/src/bin-decider";var bins=standardBins(timeYear,timeMonth,timeWeek,timeDay,timeHour,timeMinute,timeSecond,timeMillisecond),intervalIndexMap=_calculateIndexOfIntervals(bins);describe("test validate bin size function",function(){it("6 ms duration will return {unit: ms, multiplier: 5}",function(){expect(validateBinsize(bins,intervalIndexMap,[DatetimeUnits.Millisecond,DatetimeUnits.Second,DatetimeUnits.Minute],6)).toEqual({unit:DatetimeUnits.Millisecond,multiplier:5})});it("100 ms duration will return {unit: ms, multiplier: 100}",function(){expect(validateBinsize(bins,intervalIndexMap,[DatetimeUnits.Millisecond,DatetimeUnits.Second,DatetimeUnits.Minute],100)).toEqual({unit:DatetimeUnits.Millisecond,multiplier:100})});it("749 ms duration will return {unit: ms, multiplier: 500}",function(){expect(validateBinsize(bins,intervalIndexMap,[DatetimeUnits.Millisecond,DatetimeUnits.Second,DatetimeUnits.Minute],749)).toEqual({unit:DatetimeUnits.Millisecond,multiplier:500})});it("750 ms duration will return {unit: second, multiplier: 1}",function(){expect(validateBinsize(bins,intervalIndexMap,[DatetimeUnits.Millisecond,DatetimeUnits.Second,DatetimeUnits.Minute],750)).toEqual({unit:DatetimeUnits.Second,multiplier:1})});it("1100 ms duration will return {unit: second, multiplier: 1}",function(){expect(validateBinsize(bins,intervalIndexMap,[DatetimeUnits.Millisecond,DatetimeUnits.Second,DatetimeUnits.Minute],1100)).toEqual({unit:DatetimeUnits.Second,multiplier:1})});it("15500 ms duration will return {unit: second, multiplier: 1}",function(){expect(validateBinsize(bins,intervalIndexMap,[DatetimeUnits.Millisecond,DatetimeUnits.Second,DatetimeUnits.Minute],15500)).toEqual({unit:DatetimeUnits.Second,multiplier:15})});it("1850000 ms duration will return {unit: minute, multiplier: 31}",function(){expect(validateBinsize(bins,intervalIndexMap,[DatetimeUnits.Millisecond,DatetimeUnits.Second,DatetimeUnits.Minute],185e4)).toEqual({unit:DatetimeUnits.Minute,multiplier:31})});it("18500000 ms duration will return {unit: minute, multiplier: 308}",function(){expect(validateBinsize(bins,intervalIndexMap,[DatetimeUnits.Millisecond,DatetimeUnits.Second,DatetimeUnits.Minute],185e5)).toEqual({unit:DatetimeUnits.Minute,multiplier:308})});it("18500000 ms duration will return {unit: hour, multiplier: 6}",function(){expect(validateBinsize(bins,intervalIndexMap,[DatetimeUnits.Millisecond,DatetimeUnits.Second,DatetimeUnits.Hour],185e5)).toEqual({unit:DatetimeUnits.Hour,multiplier:6})});it("2332800000 ms duration will return {unit: month, multiplier: 1}",function(){expect(validateBinsize(bins,intervalIndexMap,[DatetimeUnits.Millisecond,DatetimeUnits.Second,DatetimeUnits.Month],23328e5)).toEqual({unit:DatetimeUnits.Month,multiplier:1})});it("325576e+5 ms duration will return {unit: year, multiplier: 5}",function(){expect(validateBinsize(bins,intervalIndexMap,[DatetimeUnits.Millisecond,DatetimeUnits.Second,DatetimeUnits.Year],325576e5*5)).toEqual({unit:DatetimeUnits.Year,multiplier:5})});it("2419200000 duration will return {unit: month, multiplier: 1}",function(){expect(validateBinsize(bins,intervalIndexMap,[DatetimeUnits.Month,DatetimeUnits.Year],24192e5)).toEqual({unit:DatetimeUnits.Month,multiplier:1})})});