import merge from"ramda/es/merge";import TimeNavigator from"../../../_internal/components/time-navigator";import{componentFactory}from"@fusioncharts/core/src/lib";import panelConfig from"./_utils/panel-configurer";var DEFAULT_AXIS_X={orientation:"bottom",align:"bottom",visible:true,overlap:true,dayinmajor:true,stickycontextlabel:false,scalemode:"random",skipinfo:{minor:true},offset:{x:2,y:2}},DEFAULT_AXIS_Y={orientation:"left",align:"left",visible:true,overlap:false},hydrateX=merge(DEFAULT_AXIS_X),hydrateY=merge(DEFAULT_AXIS_Y);export default function(chart){var chartConfig=chart.config,contextAxesX=chartConfig.contextAxesX||[],contextAxesY=chartConfig.contextAxesY||[],contextPanels=(chartConfig.contextPanels||[]).map(function(panel){return merge(panel,{x:panel.x.map(function(xCfg){return merge(hydrateX(xCfg),panelConfig(contextAxesX,xCfg.index))}),y:panel.y.map(function(yCfg){return merge(hydrateY(yCfg),merge(panelConfig(contextAxesY,yCfg.index),{plottype:"line"}))}),dataTable:chartConfig.dataTable})}),tableMap=chart.config.contextTableMap,values=chart.getFocusLimit(),mergedContextPanels=contextPanels.map(function(cfg){return merge(cfg,{tableMap:tableMap,values:values})});componentFactory(chart,TimeNavigator,"timeNavigator",contextPanels.length,mergedContextPanels);chartConfig.contextPanels=mergedContextPanels;if(chart.getChildren("timeNavigator")){var timeNavigator=chart.getChildren("timeNavigator")[0],brush=timeNavigator.getChildren("brush"),scrollbar=timeNavigator.getChildren("scrollbar");timeNavigator.attachHandlers();timeNavigator.addExtEventListener("focusLimitChanged",function(){timeNavigator.config.values=chart.getFocusLimit();timeNavigator.setChildDimension();brush[0]&&brush[0].asyncDraw&&brush[0].asyncDraw();scrollbar[0]&&scrollbar[0].asyncDraw&&scrollbar[0].asyncDraw()},chart)}}